(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jp(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Hu={exports:{}},li={},Vu={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ln=Symbol.for("react.element"),_p=Symbol.for("react.portal"),Np=Symbol.for("react.fragment"),kp=Symbol.for("react.strict_mode"),Sp=Symbol.for("react.profiler"),Cp=Symbol.for("react.provider"),Ep=Symbol.for("react.context"),Pp=Symbol.for("react.forward_ref"),Tp=Symbol.for("react.suspense"),Op=Symbol.for("react.memo"),Ip=Symbol.for("react.lazy"),Jc=Symbol.iterator;function Ap(e){return e===null||typeof e!="object"?null:(e=Jc&&e[Jc]||e["@@iterator"],typeof e=="function"?e:null)}var Gu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ku=Object.assign,Qu={};function Is(e,t,r){this.props=e,this.context=t,this.refs=Qu,this.updater=r||Gu}Is.prototype.isReactComponent={};Is.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Is.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ju(){}Ju.prototype=Is.prototype;function Il(e,t,r){this.props=e,this.context=t,this.refs=Qu,this.updater=r||Gu}var Al=Il.prototype=new Ju;Al.constructor=Il;Ku(Al,Is.prototype);Al.isPureReactComponent=!0;var Yc=Array.isArray,Yu=Object.prototype.hasOwnProperty,Rl={current:null},Zu={key:!0,ref:!0,__self:!0,__source:!0};function Xu(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Yu.call(t,n)&&!Zu.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Ln,type:e,key:i,ref:o,props:a,_owner:Rl.current}}function Rp(e,t){return{$$typeof:Ln,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $l(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ln}function $p(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Zc=/\/+/g;function Fi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$p(""+e.key):t.toString(36)}function xa(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ln:case _p:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Fi(o,0):n,Yc(a)?(r="",e!=null&&(r=e.replace(Zc,"$&/")+"/"),xa(a,t,r,"",function(d){return d})):a!=null&&($l(a)&&(a=Rp(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Zc,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Yc(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Fi(i,l);o+=xa(i,t,r,c,a)}else if(c=Ap(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Fi(i,l++),o+=xa(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Qn(e,t,r){if(e==null)return e;var n=[],a=0;return xa(e,n,"","",function(i){return t.call(r,i,a++)}),n}function Lp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ze={current:null},ya={transition:null},Dp={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:ya,ReactCurrentOwner:Rl};function eh(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:Qn,forEach:function(e,t,r){Qn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Qn(e,function(){t++}),t},toArray:function(e){return Qn(e,function(t){return t})||[]},only:function(e){if(!$l(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Q.Component=Is;Q.Fragment=Np;Q.Profiler=Sp;Q.PureComponent=Il;Q.StrictMode=kp;Q.Suspense=Tp;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dp;Q.act=eh;Q.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ku({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Rl.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Yu.call(t,c)&&!Zu.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Ln,type:e.type,key:a,ref:i,props:n,_owner:o}};Q.createContext=function(e){return e={$$typeof:Ep,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Cp,_context:e},e.Consumer=e};Q.createElement=Xu;Q.createFactory=function(e){var t=Xu.bind(null,e);return t.type=e,t};Q.createRef=function(){return{current:null}};Q.forwardRef=function(e){return{$$typeof:Pp,render:e}};Q.isValidElement=$l;Q.lazy=function(e){return{$$typeof:Ip,_payload:{_status:-1,_result:e},_init:Lp}};Q.memo=function(e,t){return{$$typeof:Op,type:e,compare:t===void 0?null:t}};Q.startTransition=function(e){var t=ya.transition;ya.transition={};try{e()}finally{ya.transition=t}};Q.unstable_act=eh;Q.useCallback=function(e,t){return ze.current.useCallback(e,t)};Q.useContext=function(e){return ze.current.useContext(e)};Q.useDebugValue=function(){};Q.useDeferredValue=function(e){return ze.current.useDeferredValue(e)};Q.useEffect=function(e,t){return ze.current.useEffect(e,t)};Q.useId=function(){return ze.current.useId()};Q.useImperativeHandle=function(e,t,r){return ze.current.useImperativeHandle(e,t,r)};Q.useInsertionEffect=function(e,t){return ze.current.useInsertionEffect(e,t)};Q.useLayoutEffect=function(e,t){return ze.current.useLayoutEffect(e,t)};Q.useMemo=function(e,t){return ze.current.useMemo(e,t)};Q.useReducer=function(e,t,r){return ze.current.useReducer(e,t,r)};Q.useRef=function(e){return ze.current.useRef(e)};Q.useState=function(e){return ze.current.useState(e)};Q.useSyncExternalStore=function(e,t,r){return ze.current.useSyncExternalStore(e,t,r)};Q.useTransition=function(){return ze.current.useTransition()};Q.version="18.3.1";Vu.exports=Q;var g=Vu.exports;const ue=bp(g);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp=g,Fp=Symbol.for("react.element"),Up=Symbol.for("react.fragment"),zp=Object.prototype.hasOwnProperty,Bp=Mp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qp={key:!0,ref:!0,__self:!0,__source:!0};function th(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)zp.call(t,n)&&!qp.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Fp,type:e,key:i,ref:o,props:a,_owner:Bp.current}}li.Fragment=Up;li.jsx=th;li.jsxs=th;Hu.exports=li;var s=Hu.exports,rh={exports:{}},tt={},sh={exports:{}},nh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,B){var z=$.length;$.push(B);e:for(;0<z;){var L=z-1>>>1,O=$[L];if(0<a(O,B))$[L]=B,$[z]=O,z=L;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var B=$[0],z=$.pop();if(z!==B){$[0]=z;e:for(var L=0,O=$.length,X=O>>>1;L<X;){var he=2*(L+1)-1,ge=$[he],st=he+1,q=$[st];if(0>a(ge,z))st<O&&0>a(q,ge)?($[L]=q,$[st]=z,L=st):($[L]=ge,$[he]=z,L=he);else if(st<O&&0>a(q,z))$[L]=q,$[st]=z,L=st;else break e}}return B}function a($,B){var z=$.sortIndex-B.sortIndex;return z!==0?z:$.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,w=!1,b=!1,j=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f($){for(var B=r(d);B!==null;){if(B.callback===null)n(d);else if(B.startTime<=$)n(d),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(d)}}function v($){if(b=!1,f($),!w)if(r(c)!==null)w=!0,M(k);else{var B=r(d);B!==null&&Y(v,B.startTime-$)}}function k($,B){w=!1,b&&(b=!1,x(S),S=-1),p=!0;var z=m;try{for(f(B),h=r(c);h!==null&&(!(h.expirationTime>B)||$&&!D());){var L=h.callback;if(typeof L=="function"){h.callback=null,m=h.priorityLevel;var O=L(h.expirationTime<=B);B=e.unstable_now(),typeof O=="function"?h.callback=O:h===r(c)&&n(c),f(B)}else n(c);h=r(c)}if(h!==null)var X=!0;else{var he=r(d);he!==null&&Y(v,he.startTime-B),X=!1}return X}finally{h=null,m=z,p=!1}}var N=!1,_=null,S=-1,C=5,P=-1;function D(){return!(e.unstable_now()-P<C)}function T(){if(_!==null){var $=e.unstable_now();P=$;var B=!0;try{B=_(!0,$)}finally{B?R():(N=!1,_=null)}}else N=!1}var R;if(typeof y=="function")R=function(){y(T)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,E=V.port2;V.port1.onmessage=T,R=function(){E.postMessage(null)}}else R=function(){j(T,0)};function M($){_=$,N||(N=!0,R())}function Y($,B){S=j(function(){$(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){w||p||(w=!0,M(k))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function($){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var z=m;m=B;try{return $()}finally{m=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,B){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var z=m;m=$;try{return B()}finally{m=z}},e.unstable_scheduleCallback=function($,B,z){var L=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?L+z:L):z=L,$){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=z+O,$={id:u++,callback:B,priorityLevel:$,startTime:z,expirationTime:O,sortIndex:-1},z>L?($.sortIndex=z,t(d,$),r(c)===null&&$===r(d)&&(b?(x(S),S=-1):b=!0,Y(v,z-L))):($.sortIndex=O,t(c,$),w||p||(w=!0,M(k))),$},e.unstable_shouldYield=D,e.unstable_wrapCallback=function($){var B=m;return function(){var z=m;m=B;try{return $.apply(this,arguments)}finally{m=z}}}})(nh);sh.exports=nh;var Wp=sh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=g,et=Wp;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ah=new Set,xn={};function Wr(e,t){js(e,t),js(e+"Capture",t)}function js(e,t){for(xn[e]=t,e=0;e<t.length;e++)ah.add(t[e])}var Ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jo=Object.prototype.hasOwnProperty,Vp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xc={},ed={};function Gp(e){return jo.call(ed,e)?!0:jo.call(Xc,e)?!1:Vp.test(e)?ed[e]=!0:(Xc[e]=!0,!1)}function Kp(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Qp(e,t,r,n){if(t===null||typeof t>"u"||Kp(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Be(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ee[e]=new Be(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ee[t]=new Be(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ee[e]=new Be(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ee[e]=new Be(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ee[e]=new Be(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ee[e]=new Be(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ee[e]=new Be(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ee[e]=new Be(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ee[e]=new Be(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ll=/[\-:]([a-z])/g;function Dl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ll,Dl);Ee[t]=new Be(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ll,Dl);Ee[t]=new Be(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ll,Dl);Ee[t]=new Be(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ee[e]=new Be(e,1,!1,e.toLowerCase(),null,!1,!1)});Ee.xlinkHref=new Be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ee[e]=new Be(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ml(e,t,r,n){var a=Ee.hasOwnProperty(t)?Ee[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Qp(t,r,a,n)&&(r=null),n||a===null?Gp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Gt=Hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jn=Symbol.for("react.element"),ns=Symbol.for("react.portal"),as=Symbol.for("react.fragment"),Fl=Symbol.for("react.strict_mode"),_o=Symbol.for("react.profiler"),ih=Symbol.for("react.provider"),oh=Symbol.for("react.context"),Ul=Symbol.for("react.forward_ref"),No=Symbol.for("react.suspense"),ko=Symbol.for("react.suspense_list"),zl=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),lh=Symbol.for("react.offscreen"),td=Symbol.iterator;function Bs(e){return e===null||typeof e!="object"?null:(e=td&&e[td]||e["@@iterator"],typeof e=="function"?e:null)}var ce=Object.assign,Ui;function Zs(e){if(Ui===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ui=t&&t[1]||""}return`
`+Ui+e}var zi=!1;function Bi(e,t){if(!e||zi)return"";zi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{zi=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Zs(e):""}function Jp(e){switch(e.tag){case 5:return Zs(e.type);case 16:return Zs("Lazy");case 13:return Zs("Suspense");case 19:return Zs("SuspenseList");case 0:case 2:case 15:return e=Bi(e.type,!1),e;case 11:return e=Bi(e.type.render,!1),e;case 1:return e=Bi(e.type,!0),e;default:return""}}function So(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case as:return"Fragment";case ns:return"Portal";case _o:return"Profiler";case Fl:return"StrictMode";case No:return"Suspense";case ko:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case oh:return(e.displayName||"Context")+".Consumer";case ih:return(e._context.displayName||"Context")+".Provider";case Ul:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zl:return t=e.displayName||null,t!==null?t:So(e.type)||"Memo";case sr:t=e._payload,e=e._init;try{return So(e(t))}catch{}}return null}function Yp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return So(t);case 8:return t===Fl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ch(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zp(e){var t=ch(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yn(e){e._valueTracker||(e._valueTracker=Zp(e))}function dh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ch(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Oa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Co(e,t){var r=t.checked;return ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function rd(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=vr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uh(e,t){t=t.checked,t!=null&&Ml(e,"checked",t,!1)}function Eo(e,t){uh(e,t);var r=vr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Po(e,t.type,r):t.hasOwnProperty("defaultValue")&&Po(e,t.type,vr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sd(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Po(e,t,r){(t!=="number"||Oa(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Xs=Array.isArray;function gs(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+vr(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function To(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nd(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(I(92));if(Xs(r)){if(1<r.length)throw Error(I(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:vr(r)}}function hh(e,t){var r=vr(t.value),n=vr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function ad(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function mh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?mh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zn,fh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zn=Zn||document.createElement("div"),Zn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var sn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xp=["Webkit","ms","Moz","O"];Object.keys(sn).forEach(function(e){Xp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),sn[t]=sn[e]})});function ph(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||sn.hasOwnProperty(e)&&sn[e]?(""+t).trim():t+"px"}function gh(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=ph(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var eg=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Io(e,t){if(t){if(eg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function Ao(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ro=null;function Bl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $o=null,xs=null,ys=null;function id(e){if(e=Fn(e)){if(typeof $o!="function")throw Error(I(280));var t=e.stateNode;t&&(t=mi(t),$o(e.stateNode,e.type,t))}}function xh(e){xs?ys?ys.push(e):ys=[e]:xs=e}function yh(){if(xs){var e=xs,t=ys;if(ys=xs=null,id(e),t)for(e=0;e<t.length;e++)id(t[e])}}function vh(e,t){return e(t)}function wh(){}var qi=!1;function bh(e,t,r){if(qi)return e(t,r);qi=!0;try{return vh(e,t,r)}finally{qi=!1,(xs!==null||ys!==null)&&(wh(),yh())}}function vn(e,t){var r=e.stateNode;if(r===null)return null;var n=mi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(I(231,t,typeof r));return r}var Lo=!1;if(Ut)try{var qs={};Object.defineProperty(qs,"passive",{get:function(){Lo=!0}}),window.addEventListener("test",qs,qs),window.removeEventListener("test",qs,qs)}catch{Lo=!1}function tg(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var nn=!1,Ia=null,Aa=!1,Do=null,rg={onError:function(e){nn=!0,Ia=e}};function sg(e,t,r,n,a,i,o,l,c){nn=!1,Ia=null,tg.apply(rg,arguments)}function ng(e,t,r,n,a,i,o,l,c){if(sg.apply(this,arguments),nn){if(nn){var d=Ia;nn=!1,Ia=null}else throw Error(I(198));Aa||(Aa=!0,Do=d)}}function Hr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function jh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function od(e){if(Hr(e)!==e)throw Error(I(188))}function ag(e){var t=e.alternate;if(!t){if(t=Hr(e),t===null)throw Error(I(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return od(a),e;if(i===n)return od(a),t;i=i.sibling}throw Error(I(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(I(189))}}if(r.alternate!==n)throw Error(I(190))}if(r.tag!==3)throw Error(I(188));return r.stateNode.current===r?e:t}function _h(e){return e=ag(e),e!==null?Nh(e):null}function Nh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Nh(e);if(t!==null)return t;e=e.sibling}return null}var kh=et.unstable_scheduleCallback,ld=et.unstable_cancelCallback,ig=et.unstable_shouldYield,og=et.unstable_requestPaint,me=et.unstable_now,lg=et.unstable_getCurrentPriorityLevel,ql=et.unstable_ImmediatePriority,Sh=et.unstable_UserBlockingPriority,Ra=et.unstable_NormalPriority,cg=et.unstable_LowPriority,Ch=et.unstable_IdlePriority,ci=null,St=null;function dg(e){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(ci,e,void 0,(e.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:mg,ug=Math.log,hg=Math.LN2;function mg(e){return e>>>=0,e===0?32:31-(ug(e)/hg|0)|0}var Xn=64,ea=4194304;function en(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $a(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=en(l):(i&=o,i!==0&&(n=en(i)))}else o=r&~a,o!==0?n=en(o):i!==0&&(n=en(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-vt(t),a=1<<r,n|=e[r],t&=~a;return n}function fg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pg(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-vt(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=fg(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Mo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Eh(){var e=Xn;return Xn<<=1,!(Xn&4194240)&&(Xn=64),e}function Wi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Dn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vt(t),e[t]=r}function gg(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-vt(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Wl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-vt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Z=0;function Ph(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Th,Hl,Oh,Ih,Ah,Fo=!1,ta=[],dr=null,ur=null,hr=null,wn=new Map,bn=new Map,ar=[],xg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cd(e,t){switch(e){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":wn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bn.delete(t.pointerId)}}function Ws(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Fn(t),t!==null&&Hl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function yg(e,t,r,n,a){switch(t){case"focusin":return dr=Ws(dr,e,t,r,n,a),!0;case"dragenter":return ur=Ws(ur,e,t,r,n,a),!0;case"mouseover":return hr=Ws(hr,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return wn.set(i,Ws(wn.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,bn.set(i,Ws(bn.get(i)||null,e,t,r,n,a)),!0}return!1}function Rh(e){var t=Ir(e.target);if(t!==null){var r=Hr(t);if(r!==null){if(t=r.tag,t===13){if(t=jh(r),t!==null){e.blockedOn=t,Ah(e.priority,function(){Oh(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function va(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Uo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ro=n,r.target.dispatchEvent(n),Ro=null}else return t=Fn(r),t!==null&&Hl(t),e.blockedOn=r,!1;t.shift()}return!0}function dd(e,t,r){va(e)&&r.delete(t)}function vg(){Fo=!1,dr!==null&&va(dr)&&(dr=null),ur!==null&&va(ur)&&(ur=null),hr!==null&&va(hr)&&(hr=null),wn.forEach(dd),bn.forEach(dd)}function Hs(e,t){e.blockedOn===t&&(e.blockedOn=null,Fo||(Fo=!0,et.unstable_scheduleCallback(et.unstable_NormalPriority,vg)))}function jn(e){function t(a){return Hs(a,e)}if(0<ta.length){Hs(ta[0],e);for(var r=1;r<ta.length;r++){var n=ta[r];n.blockedOn===e&&(n.blockedOn=null)}}for(dr!==null&&Hs(dr,e),ur!==null&&Hs(ur,e),hr!==null&&Hs(hr,e),wn.forEach(t),bn.forEach(t),r=0;r<ar.length;r++)n=ar[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ar.length&&(r=ar[0],r.blockedOn===null);)Rh(r),r.blockedOn===null&&ar.shift()}var vs=Gt.ReactCurrentBatchConfig,La=!0;function wg(e,t,r,n){var a=Z,i=vs.transition;vs.transition=null;try{Z=1,Vl(e,t,r,n)}finally{Z=a,vs.transition=i}}function bg(e,t,r,n){var a=Z,i=vs.transition;vs.transition=null;try{Z=4,Vl(e,t,r,n)}finally{Z=a,vs.transition=i}}function Vl(e,t,r,n){if(La){var a=Uo(e,t,r,n);if(a===null)eo(e,t,n,Da,r),cd(e,n);else if(yg(a,e,t,r,n))n.stopPropagation();else if(cd(e,n),t&4&&-1<xg.indexOf(e)){for(;a!==null;){var i=Fn(a);if(i!==null&&Th(i),i=Uo(e,t,r,n),i===null&&eo(e,t,n,Da,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else eo(e,t,n,null,r)}}var Da=null;function Uo(e,t,r,n){if(Da=null,e=Bl(n),e=Ir(e),e!==null)if(t=Hr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=jh(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Da=e,null}function $h(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lg()){case ql:return 1;case Sh:return 4;case Ra:case cg:return 16;case Ch:return 536870912;default:return 16}default:return 16}}var lr=null,Gl=null,wa=null;function Lh(){if(wa)return wa;var e,t=Gl,r=t.length,n,a="value"in lr?lr.value:lr.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return wa=a.slice(e,1<n?1-n:void 0)}function ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ra(){return!0}function ud(){return!1}function rt(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ra:ud,this.isPropagationStopped=ud,this}return ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),t}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kl=rt(As),Mn=ce({},As,{view:0,detail:0}),jg=rt(Mn),Hi,Vi,Vs,di=ce({},Mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ql,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vs&&(Vs&&e.type==="mousemove"?(Hi=e.screenX-Vs.screenX,Vi=e.screenY-Vs.screenY):Vi=Hi=0,Vs=e),Hi)},movementY:function(e){return"movementY"in e?e.movementY:Vi}}),hd=rt(di),_g=ce({},di,{dataTransfer:0}),Ng=rt(_g),kg=ce({},Mn,{relatedTarget:0}),Gi=rt(kg),Sg=ce({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),Cg=rt(Sg),Eg=ce({},As,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pg=rt(Eg),Tg=ce({},As,{data:0}),md=rt(Tg),Og={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ig={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ag={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ag[e])?!!t[e]:!1}function Ql(){return Rg}var $g=ce({},Mn,{key:function(e){if(e.key){var t=Og[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ig[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ql,charCode:function(e){return e.type==="keypress"?ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lg=rt($g),Dg=ce({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fd=rt(Dg),Mg=ce({},Mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ql}),Fg=rt(Mg),Ug=ce({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),zg=rt(Ug),Bg=ce({},di,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qg=rt(Bg),Wg=[9,13,27,32],Jl=Ut&&"CompositionEvent"in window,an=null;Ut&&"documentMode"in document&&(an=document.documentMode);var Hg=Ut&&"TextEvent"in window&&!an,Dh=Ut&&(!Jl||an&&8<an&&11>=an),pd=" ",gd=!1;function Mh(e,t){switch(e){case"keyup":return Wg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var is=!1;function Vg(e,t){switch(e){case"compositionend":return Fh(t);case"keypress":return t.which!==32?null:(gd=!0,pd);case"textInput":return e=t.data,e===pd&&gd?null:e;default:return null}}function Gg(e,t){if(is)return e==="compositionend"||!Jl&&Mh(e,t)?(e=Lh(),wa=Gl=lr=null,is=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dh&&t.locale!=="ko"?null:t.data;default:return null}}var Kg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Kg[e.type]:t==="textarea"}function Uh(e,t,r,n){xh(n),t=Ma(t,"onChange"),0<t.length&&(r=new Kl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var on=null,_n=null;function Qg(e){Yh(e,0)}function ui(e){var t=cs(e);if(dh(t))return e}function Jg(e,t){if(e==="change")return t}var zh=!1;if(Ut){var Ki;if(Ut){var Qi="oninput"in document;if(!Qi){var yd=document.createElement("div");yd.setAttribute("oninput","return;"),Qi=typeof yd.oninput=="function"}Ki=Qi}else Ki=!1;zh=Ki&&(!document.documentMode||9<document.documentMode)}function vd(){on&&(on.detachEvent("onpropertychange",Bh),_n=on=null)}function Bh(e){if(e.propertyName==="value"&&ui(_n)){var t=[];Uh(t,_n,e,Bl(e)),bh(Qg,t)}}function Yg(e,t,r){e==="focusin"?(vd(),on=t,_n=r,on.attachEvent("onpropertychange",Bh)):e==="focusout"&&vd()}function Zg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ui(_n)}function Xg(e,t){if(e==="click")return ui(t)}function e0(e,t){if(e==="input"||e==="change")return ui(t)}function t0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:t0;function Nn(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!jo.call(t,a)||!bt(e[a],t[a]))return!1}return!0}function wd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bd(e,t){var r=wd(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wd(r)}}function qh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wh(){for(var e=window,t=Oa();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Oa(e.document)}return t}function Yl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function r0(e){var t=Wh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&qh(r.ownerDocument.documentElement,r)){if(n!==null&&Yl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=bd(r,i);var o=bd(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var s0=Ut&&"documentMode"in document&&11>=document.documentMode,os=null,zo=null,ln=null,Bo=!1;function jd(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Bo||os==null||os!==Oa(n)||(n=os,"selectionStart"in n&&Yl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ln&&Nn(ln,n)||(ln=n,n=Ma(zo,"onSelect"),0<n.length&&(t=new Kl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=os)))}function sa(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ls={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionend:sa("Transition","TransitionEnd")},Ji={},Hh={};Ut&&(Hh=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function hi(e){if(Ji[e])return Ji[e];if(!ls[e])return e;var t=ls[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Hh)return Ji[e]=t[r];return e}var Vh=hi("animationend"),Gh=hi("animationiteration"),Kh=hi("animationstart"),Qh=hi("transitionend"),Jh=new Map,_d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Jh.set(e,t),Wr(t,[e])}for(var Yi=0;Yi<_d.length;Yi++){var Zi=_d[Yi],n0=Zi.toLowerCase(),a0=Zi[0].toUpperCase()+Zi.slice(1);jr(n0,"on"+a0)}jr(Vh,"onAnimationEnd");jr(Gh,"onAnimationIteration");jr(Kh,"onAnimationStart");jr("dblclick","onDoubleClick");jr("focusin","onFocus");jr("focusout","onBlur");jr(Qh,"onTransitionEnd");js("onMouseEnter",["mouseout","mouseover"]);js("onMouseLeave",["mouseout","mouseover"]);js("onPointerEnter",["pointerout","pointerover"]);js("onPointerLeave",["pointerout","pointerover"]);Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i0=new Set("cancel close invalid load scroll toggle".split(" ").concat(tn));function Nd(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ng(n,t,void 0,e),e.currentTarget=null}function Yh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Nd(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Nd(a,l,d),i=c}}}if(Aa)throw e=Do,Aa=!1,Do=null,e}function re(e,t){var r=t[Go];r===void 0&&(r=t[Go]=new Set);var n=e+"__bubble";r.has(n)||(Zh(t,e,2,!1),r.add(n))}function Xi(e,t,r){var n=0;t&&(n|=4),Zh(r,e,n,t)}var na="_reactListening"+Math.random().toString(36).slice(2);function kn(e){if(!e[na]){e[na]=!0,ah.forEach(function(r){r!=="selectionchange"&&(i0.has(r)||Xi(r,!1,e),Xi(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[na]||(t[na]=!0,Xi("selectionchange",!1,t))}}function Zh(e,t,r,n){switch($h(t)){case 1:var a=wg;break;case 4:a=bg;break;default:a=Vl}r=a.bind(null,t,r,e),a=void 0,!Lo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function eo(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Ir(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}bh(function(){var d=i,u=Bl(r),h=[];e:{var m=Jh.get(e);if(m!==void 0){var p=Kl,w=e;switch(e){case"keypress":if(ba(r)===0)break e;case"keydown":case"keyup":p=Lg;break;case"focusin":w="focus",p=Gi;break;case"focusout":w="blur",p=Gi;break;case"beforeblur":case"afterblur":p=Gi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=hd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Ng;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Fg;break;case Vh:case Gh:case Kh:p=Cg;break;case Qh:p=zg;break;case"scroll":p=jg;break;case"wheel":p=qg;break;case"copy":case"cut":case"paste":p=Pg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=fd}var b=(t&4)!==0,j=!b&&e==="scroll",x=b?m!==null?m+"Capture":null:m;b=[];for(var y=d,f;y!==null;){f=y;var v=f.stateNode;if(f.tag===5&&v!==null&&(f=v,x!==null&&(v=vn(y,x),v!=null&&b.push(Sn(y,v,f)))),j)break;y=y.return}0<b.length&&(m=new p(m,w,null,r,u),h.push({event:m,listeners:b}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&r!==Ro&&(w=r.relatedTarget||r.fromElement)&&(Ir(w)||w[zt]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(w=r.relatedTarget||r.toElement,p=d,w=w?Ir(w):null,w!==null&&(j=Hr(w),w!==j||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=d),p!==w)){if(b=hd,v="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(b=fd,v="onPointerLeave",x="onPointerEnter",y="pointer"),j=p==null?m:cs(p),f=w==null?m:cs(w),m=new b(v,y+"leave",p,r,u),m.target=j,m.relatedTarget=f,v=null,Ir(u)===d&&(b=new b(x,y+"enter",w,r,u),b.target=f,b.relatedTarget=j,v=b),j=v,p&&w)t:{for(b=p,x=w,y=0,f=b;f;f=Qr(f))y++;for(f=0,v=x;v;v=Qr(v))f++;for(;0<y-f;)b=Qr(b),y--;for(;0<f-y;)x=Qr(x),f--;for(;y--;){if(b===x||x!==null&&b===x.alternate)break t;b=Qr(b),x=Qr(x)}b=null}else b=null;p!==null&&kd(h,m,p,b,!1),w!==null&&j!==null&&kd(h,j,w,b,!0)}}e:{if(m=d?cs(d):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var k=Jg;else if(xd(m))if(zh)k=e0;else{k=Zg;var N=Yg}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=Xg);if(k&&(k=k(e,d))){Uh(h,k,r,u);break e}N&&N(e,m,d),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Po(m,"number",m.value)}switch(N=d?cs(d):window,e){case"focusin":(xd(N)||N.contentEditable==="true")&&(os=N,zo=d,ln=null);break;case"focusout":ln=zo=os=null;break;case"mousedown":Bo=!0;break;case"contextmenu":case"mouseup":case"dragend":Bo=!1,jd(h,r,u);break;case"selectionchange":if(s0)break;case"keydown":case"keyup":jd(h,r,u)}var _;if(Jl)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else is?Mh(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(Dh&&r.locale!=="ko"&&(is||S!=="onCompositionStart"?S==="onCompositionEnd"&&is&&(_=Lh()):(lr=u,Gl="value"in lr?lr.value:lr.textContent,is=!0)),N=Ma(d,S),0<N.length&&(S=new md(S,e,null,r,u),h.push({event:S,listeners:N}),_?S.data=_:(_=Fh(r),_!==null&&(S.data=_)))),(_=Hg?Vg(e,r):Gg(e,r))&&(d=Ma(d,"onBeforeInput"),0<d.length&&(u=new md("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=_))}Yh(h,t)})}function Sn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ma(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=vn(e,r),i!=null&&n.unshift(Sn(e,i,a)),i=vn(e,t),i!=null&&n.push(Sn(e,i,a))),e=e.return}return n}function Qr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function kd(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=vn(r,i),c!=null&&o.unshift(Sn(r,c,l))):a||(c=vn(r,i),c!=null&&o.push(Sn(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var o0=/\r\n?/g,l0=/\u0000|\uFFFD/g;function Sd(e){return(typeof e=="string"?e:""+e).replace(o0,`
`).replace(l0,"")}function aa(e,t,r){if(t=Sd(t),Sd(e)!==t&&r)throw Error(I(425))}function Fa(){}var qo=null,Wo=null;function Ho(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vo=typeof setTimeout=="function"?setTimeout:void 0,c0=typeof clearTimeout=="function"?clearTimeout:void 0,Cd=typeof Promise=="function"?Promise:void 0,d0=typeof queueMicrotask=="function"?queueMicrotask:typeof Cd<"u"?function(e){return Cd.resolve(null).then(e).catch(u0)}:Vo;function u0(e){setTimeout(function(){throw e})}function to(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),jn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);jn(t)}function mr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ed(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Rs=Math.random().toString(36).slice(2),kt="__reactFiber$"+Rs,Cn="__reactProps$"+Rs,zt="__reactContainer$"+Rs,Go="__reactEvents$"+Rs,h0="__reactListeners$"+Rs,m0="__reactHandles$"+Rs;function Ir(e){var t=e[kt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zt]||r[kt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ed(e);e!==null;){if(r=e[kt])return r;e=Ed(e)}return t}e=r,r=e.parentNode}return null}function Fn(e){return e=e[kt]||e[zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function cs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function mi(e){return e[Cn]||null}var Ko=[],ds=-1;function _r(e){return{current:e}}function se(e){0>ds||(e.current=Ko[ds],Ko[ds]=null,ds--)}function te(e,t){ds++,Ko[ds]=e.current,e.current=t}var wr={},Re=_r(wr),Ve=_r(!1),Mr=wr;function _s(e,t){var r=e.type.contextTypes;if(!r)return wr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ge(e){return e=e.childContextTypes,e!=null}function Ua(){se(Ve),se(Re)}function Pd(e,t,r){if(Re.current!==wr)throw Error(I(168));te(Re,t),te(Ve,r)}function Xh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(I(108,Yp(e)||"Unknown",a));return ce({},r,n)}function za(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wr,Mr=Re.current,te(Re,e),te(Ve,Ve.current),!0}function Td(e,t,r){var n=e.stateNode;if(!n)throw Error(I(169));r?(e=Xh(e,t,Mr),n.__reactInternalMemoizedMergedChildContext=e,se(Ve),se(Re),te(Re,e)):se(Ve),te(Ve,r)}var $t=null,fi=!1,ro=!1;function em(e){$t===null?$t=[e]:$t.push(e)}function f0(e){fi=!0,em(e)}function Nr(){if(!ro&&$t!==null){ro=!0;var e=0,t=Z;try{var r=$t;for(Z=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}$t=null,fi=!1}catch(a){throw $t!==null&&($t=$t.slice(e+1)),kh(ql,Nr),a}finally{Z=t,ro=!1}}return null}var us=[],hs=0,Ba=null,qa=0,nt=[],at=0,Fr=null,Lt=1,Dt="";function Er(e,t){us[hs++]=qa,us[hs++]=Ba,Ba=e,qa=t}function tm(e,t,r){nt[at++]=Lt,nt[at++]=Dt,nt[at++]=Fr,Fr=e;var n=Lt;e=Dt;var a=32-vt(n)-1;n&=~(1<<a),r+=1;var i=32-vt(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Lt=1<<32-vt(t)+a|r<<a|n,Dt=i+e}else Lt=1<<i|r<<a|n,Dt=e}function Zl(e){e.return!==null&&(Er(e,1),tm(e,1,0))}function Xl(e){for(;e===Ba;)Ba=us[--hs],us[hs]=null,qa=us[--hs],us[hs]=null;for(;e===Fr;)Fr=nt[--at],nt[at]=null,Dt=nt[--at],nt[at]=null,Lt=nt[--at],nt[at]=null}var Xe=null,Ye=null,ae=!1,yt=null;function rm(e,t){var r=it(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Od(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xe=e,Ye=mr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xe=e,Ye=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Fr!==null?{id:Lt,overflow:Dt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=it(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Xe=e,Ye=null,!0):!1;default:return!1}}function Qo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Jo(e){if(ae){var t=Ye;if(t){var r=t;if(!Od(e,t)){if(Qo(e))throw Error(I(418));t=mr(r.nextSibling);var n=Xe;t&&Od(e,t)?rm(n,r):(e.flags=e.flags&-4097|2,ae=!1,Xe=e)}}else{if(Qo(e))throw Error(I(418));e.flags=e.flags&-4097|2,ae=!1,Xe=e}}}function Id(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xe=e}function ia(e){if(e!==Xe)return!1;if(!ae)return Id(e),ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ho(e.type,e.memoizedProps)),t&&(t=Ye)){if(Qo(e))throw sm(),Error(I(418));for(;t;)rm(e,t),t=mr(t.nextSibling)}if(Id(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ye=mr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ye=null}}else Ye=Xe?mr(e.stateNode.nextSibling):null;return!0}function sm(){for(var e=Ye;e;)e=mr(e.nextSibling)}function Ns(){Ye=Xe=null,ae=!1}function ec(e){yt===null?yt=[e]:yt.push(e)}var p0=Gt.ReactCurrentBatchConfig;function Gs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(I(309));var n=r.stateNode}if(!n)throw Error(I(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(I(284));if(!r._owner)throw Error(I(290,e))}return e}function oa(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ad(e){var t=e._init;return t(e._payload)}function nm(e){function t(x,y){if(e){var f=x.deletions;f===null?(x.deletions=[y],x.flags|=16):f.push(y)}}function r(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=xr(x,y),x.index=0,x.sibling=null,x}function i(x,y,f){return x.index=f,e?(f=x.alternate,f!==null?(f=f.index,f<y?(x.flags|=2,y):f):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,f,v){return y===null||y.tag!==6?(y=co(f,x.mode,v),y.return=x,y):(y=a(y,f),y.return=x,y)}function c(x,y,f,v){var k=f.type;return k===as?u(x,y,f.props.children,v,f.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===sr&&Ad(k)===y.type)?(v=a(y,f.props),v.ref=Gs(x,y,f),v.return=x,v):(v=Ea(f.type,f.key,f.props,null,x.mode,v),v.ref=Gs(x,y,f),v.return=x,v)}function d(x,y,f,v){return y===null||y.tag!==4||y.stateNode.containerInfo!==f.containerInfo||y.stateNode.implementation!==f.implementation?(y=uo(f,x.mode,v),y.return=x,y):(y=a(y,f.children||[]),y.return=x,y)}function u(x,y,f,v,k){return y===null||y.tag!==7?(y=Lr(f,x.mode,v,k),y.return=x,y):(y=a(y,f),y.return=x,y)}function h(x,y,f){if(typeof y=="string"&&y!==""||typeof y=="number")return y=co(""+y,x.mode,f),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Jn:return f=Ea(y.type,y.key,y.props,null,x.mode,f),f.ref=Gs(x,null,y),f.return=x,f;case ns:return y=uo(y,x.mode,f),y.return=x,y;case sr:var v=y._init;return h(x,v(y._payload),f)}if(Xs(y)||Bs(y))return y=Lr(y,x.mode,f,null),y.return=x,y;oa(x,y)}return null}function m(x,y,f,v){var k=y!==null?y.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return k!==null?null:l(x,y,""+f,v);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Jn:return f.key===k?c(x,y,f,v):null;case ns:return f.key===k?d(x,y,f,v):null;case sr:return k=f._init,m(x,y,k(f._payload),v)}if(Xs(f)||Bs(f))return k!==null?null:u(x,y,f,v,null);oa(x,f)}return null}function p(x,y,f,v,k){if(typeof v=="string"&&v!==""||typeof v=="number")return x=x.get(f)||null,l(y,x,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Jn:return x=x.get(v.key===null?f:v.key)||null,c(y,x,v,k);case ns:return x=x.get(v.key===null?f:v.key)||null,d(y,x,v,k);case sr:var N=v._init;return p(x,y,f,N(v._payload),k)}if(Xs(v)||Bs(v))return x=x.get(f)||null,u(y,x,v,k,null);oa(y,v)}return null}function w(x,y,f,v){for(var k=null,N=null,_=y,S=y=0,C=null;_!==null&&S<f.length;S++){_.index>S?(C=_,_=null):C=_.sibling;var P=m(x,_,f[S],v);if(P===null){_===null&&(_=C);break}e&&_&&P.alternate===null&&t(x,_),y=i(P,y,S),N===null?k=P:N.sibling=P,N=P,_=C}if(S===f.length)return r(x,_),ae&&Er(x,S),k;if(_===null){for(;S<f.length;S++)_=h(x,f[S],v),_!==null&&(y=i(_,y,S),N===null?k=_:N.sibling=_,N=_);return ae&&Er(x,S),k}for(_=n(x,_);S<f.length;S++)C=p(_,x,S,f[S],v),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?S:C.key),y=i(C,y,S),N===null?k=C:N.sibling=C,N=C);return e&&_.forEach(function(D){return t(x,D)}),ae&&Er(x,S),k}function b(x,y,f,v){var k=Bs(f);if(typeof k!="function")throw Error(I(150));if(f=k.call(f),f==null)throw Error(I(151));for(var N=k=null,_=y,S=y=0,C=null,P=f.next();_!==null&&!P.done;S++,P=f.next()){_.index>S?(C=_,_=null):C=_.sibling;var D=m(x,_,P.value,v);if(D===null){_===null&&(_=C);break}e&&_&&D.alternate===null&&t(x,_),y=i(D,y,S),N===null?k=D:N.sibling=D,N=D,_=C}if(P.done)return r(x,_),ae&&Er(x,S),k;if(_===null){for(;!P.done;S++,P=f.next())P=h(x,P.value,v),P!==null&&(y=i(P,y,S),N===null?k=P:N.sibling=P,N=P);return ae&&Er(x,S),k}for(_=n(x,_);!P.done;S++,P=f.next())P=p(_,x,S,P.value,v),P!==null&&(e&&P.alternate!==null&&_.delete(P.key===null?S:P.key),y=i(P,y,S),N===null?k=P:N.sibling=P,N=P);return e&&_.forEach(function(T){return t(x,T)}),ae&&Er(x,S),k}function j(x,y,f,v){if(typeof f=="object"&&f!==null&&f.type===as&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Jn:e:{for(var k=f.key,N=y;N!==null;){if(N.key===k){if(k=f.type,k===as){if(N.tag===7){r(x,N.sibling),y=a(N,f.props.children),y.return=x,x=y;break e}}else if(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===sr&&Ad(k)===N.type){r(x,N.sibling),y=a(N,f.props),y.ref=Gs(x,N,f),y.return=x,x=y;break e}r(x,N);break}else t(x,N);N=N.sibling}f.type===as?(y=Lr(f.props.children,x.mode,v,f.key),y.return=x,x=y):(v=Ea(f.type,f.key,f.props,null,x.mode,v),v.ref=Gs(x,y,f),v.return=x,x=v)}return o(x);case ns:e:{for(N=f.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===f.containerInfo&&y.stateNode.implementation===f.implementation){r(x,y.sibling),y=a(y,f.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else t(x,y);y=y.sibling}y=uo(f,x.mode,v),y.return=x,x=y}return o(x);case sr:return N=f._init,j(x,y,N(f._payload),v)}if(Xs(f))return w(x,y,f,v);if(Bs(f))return b(x,y,f,v);oa(x,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,y!==null&&y.tag===6?(r(x,y.sibling),y=a(y,f),y.return=x,x=y):(r(x,y),y=co(f,x.mode,v),y.return=x,x=y),o(x)):r(x,y)}return j}var ks=nm(!0),am=nm(!1),Wa=_r(null),Ha=null,ms=null,tc=null;function rc(){tc=ms=Ha=null}function sc(e){var t=Wa.current;se(Wa),e._currentValue=t}function Yo(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ws(e,t){Ha=e,tc=ms=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(He=!0),e.firstContext=null)}function ct(e){var t=e._currentValue;if(tc!==e)if(e={context:e,memoizedValue:t,next:null},ms===null){if(Ha===null)throw Error(I(308));ms=e,Ha.dependencies={lanes:0,firstContext:e}}else ms=ms.next=e;return t}var Ar=null;function nc(e){Ar===null?Ar=[e]:Ar.push(e)}function im(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,nc(t)):(r.next=a.next,a.next=r),t.interleaved=r,Bt(e,n)}function Bt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var nr=!1;function ac(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function om(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,J&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Bt(e,r)}return a=n.interleaved,a===null?(t.next=t,nc(n)):(t.next=a.next,a.next=t),n.interleaved=t,Bt(e,r)}function ja(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Wl(e,r)}}function Rd(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Va(e,t,r,n){var a=e.updateQueue;nr=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,u=d=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,b=l;switch(m=t,p=r,b.tag){case 1:if(w=b.payload,typeof w=="function"){h=w.call(p,h,m);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=b.payload,m=typeof w=="function"?w.call(p,h,m):w,m==null)break e;h=ce({},h,m);break e;case 2:nr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=h):u=u.next=p,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);zr|=o,e.lanes=o,e.memoizedState=h}}function $d(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(I(191,a));a.call(n)}}}var Un={},Ct=_r(Un),En=_r(Un),Pn=_r(Un);function Rr(e){if(e===Un)throw Error(I(174));return e}function ic(e,t){switch(te(Pn,t),te(En,e),te(Ct,Un),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Oo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Oo(t,e)}se(Ct),te(Ct,t)}function Ss(){se(Ct),se(En),se(Pn)}function lm(e){Rr(Pn.current);var t=Rr(Ct.current),r=Oo(t,e.type);t!==r&&(te(En,e),te(Ct,r))}function oc(e){En.current===e&&(se(Ct),se(En))}var ie=_r(0);function Ga(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var so=[];function lc(){for(var e=0;e<so.length;e++)so[e]._workInProgressVersionPrimary=null;so.length=0}var _a=Gt.ReactCurrentDispatcher,no=Gt.ReactCurrentBatchConfig,Ur=0,oe=null,ve=null,je=null,Ka=!1,cn=!1,Tn=0,g0=0;function Te(){throw Error(I(321))}function cc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!bt(e[r],t[r]))return!1;return!0}function dc(e,t,r,n,a,i){if(Ur=i,oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_a.current=e===null||e.memoizedState===null?w0:b0,e=r(n,a),cn){i=0;do{if(cn=!1,Tn=0,25<=i)throw Error(I(301));i+=1,je=ve=null,t.updateQueue=null,_a.current=j0,e=r(n,a)}while(cn)}if(_a.current=Qa,t=ve!==null&&ve.next!==null,Ur=0,je=ve=oe=null,Ka=!1,t)throw Error(I(300));return e}function uc(){var e=Tn!==0;return Tn=0,e}function _t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?oe.memoizedState=je=e:je=je.next=e,je}function dt(){if(ve===null){var e=oe.alternate;e=e!==null?e.memoizedState:null}else e=ve.next;var t=je===null?oe.memoizedState:je.next;if(t!==null)je=t,ve=e;else{if(e===null)throw Error(I(310));ve=e,e={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},je===null?oe.memoizedState=je=e:je=je.next=e}return je}function On(e,t){return typeof t=="function"?t(e):t}function ao(e){var t=dt(),r=t.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=e;var n=ve,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Ur&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,oe.lanes|=u,zr|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,bt(n,t.memoizedState)||(He=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,oe.lanes|=i,zr|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function io(e){var t=dt(),r=t.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);bt(i,t.memoizedState)||(He=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function cm(){}function dm(e,t){var r=oe,n=dt(),a=t(),i=!bt(n.memoizedState,a);if(i&&(n.memoizedState=a,He=!0),n=n.queue,hc(mm.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||je!==null&&je.memoizedState.tag&1){if(r.flags|=2048,In(9,hm.bind(null,r,n,a,t),void 0,null),_e===null)throw Error(I(349));Ur&30||um(r,t,a)}return a}function um(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function hm(e,t,r,n){t.value=r,t.getSnapshot=n,fm(t)&&pm(e)}function mm(e,t,r){return r(function(){fm(t)&&pm(e)})}function fm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!bt(e,r)}catch{return!0}}function pm(e){var t=Bt(e,1);t!==null&&wt(t,e,1,-1)}function Ld(e){var t=_t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:e},t.queue=e,e=e.dispatch=v0.bind(null,oe,e),[t.memoizedState,e]}function In(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function gm(){return dt().memoizedState}function Na(e,t,r,n){var a=_t();oe.flags|=e,a.memoizedState=In(1|t,r,void 0,n===void 0?null:n)}function pi(e,t,r,n){var a=dt();n=n===void 0?null:n;var i=void 0;if(ve!==null){var o=ve.memoizedState;if(i=o.destroy,n!==null&&cc(n,o.deps)){a.memoizedState=In(t,r,i,n);return}}oe.flags|=e,a.memoizedState=In(1|t,r,i,n)}function Dd(e,t){return Na(8390656,8,e,t)}function hc(e,t){return pi(2048,8,e,t)}function xm(e,t){return pi(4,2,e,t)}function ym(e,t){return pi(4,4,e,t)}function vm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wm(e,t,r){return r=r!=null?r.concat([e]):null,pi(4,4,vm.bind(null,t,e),r)}function mc(){}function bm(e,t){var r=dt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&cc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function jm(e,t){var r=dt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&cc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function _m(e,t,r){return Ur&21?(bt(r,t)||(r=Eh(),oe.lanes|=r,zr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,He=!0),e.memoizedState=r)}function x0(e,t){var r=Z;Z=r!==0&&4>r?r:4,e(!0);var n=no.transition;no.transition={};try{e(!1),t()}finally{Z=r,no.transition=n}}function Nm(){return dt().memoizedState}function y0(e,t,r){var n=gr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},km(e))Sm(t,r);else if(r=im(e,t,r,n),r!==null){var a=Fe();wt(r,e,n,a),Cm(r,t,n)}}function v0(e,t,r){var n=gr(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(km(e))Sm(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,bt(l,o)){var c=t.interleaved;c===null?(a.next=a,nc(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=im(e,t,a,n),r!==null&&(a=Fe(),wt(r,e,n,a),Cm(r,t,n))}}function km(e){var t=e.alternate;return e===oe||t!==null&&t===oe}function Sm(e,t){cn=Ka=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Cm(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Wl(e,r)}}var Qa={readContext:ct,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},w0={readContext:ct,useCallback:function(e,t){return _t().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:Dd,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Na(4194308,4,vm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Na(4194308,4,e,t)},useInsertionEffect:function(e,t){return Na(4,2,e,t)},useMemo:function(e,t){var r=_t();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=_t();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=y0.bind(null,oe,e),[n.memoizedState,e]},useRef:function(e){var t=_t();return e={current:e},t.memoizedState=e},useState:Ld,useDebugValue:mc,useDeferredValue:function(e){return _t().memoizedState=e},useTransition:function(){var e=Ld(!1),t=e[0];return e=x0.bind(null,e[1]),_t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=oe,a=_t();if(ae){if(r===void 0)throw Error(I(407));r=r()}else{if(r=t(),_e===null)throw Error(I(349));Ur&30||um(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Dd(mm.bind(null,n,i,e),[e]),n.flags|=2048,In(9,hm.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=_t(),t=_e.identifierPrefix;if(ae){var r=Dt,n=Lt;r=(n&~(1<<32-vt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Tn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=g0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},b0={readContext:ct,useCallback:bm,useContext:ct,useEffect:hc,useImperativeHandle:wm,useInsertionEffect:xm,useLayoutEffect:ym,useMemo:jm,useReducer:ao,useRef:gm,useState:function(){return ao(On)},useDebugValue:mc,useDeferredValue:function(e){var t=dt();return _m(t,ve.memoizedState,e)},useTransition:function(){var e=ao(On)[0],t=dt().memoizedState;return[e,t]},useMutableSource:cm,useSyncExternalStore:dm,useId:Nm,unstable_isNewReconciler:!1},j0={readContext:ct,useCallback:bm,useContext:ct,useEffect:hc,useImperativeHandle:wm,useInsertionEffect:xm,useLayoutEffect:ym,useMemo:jm,useReducer:io,useRef:gm,useState:function(){return io(On)},useDebugValue:mc,useDeferredValue:function(e){var t=dt();return ve===null?t.memoizedState=e:_m(t,ve.memoizedState,e)},useTransition:function(){var e=io(On)[0],t=dt().memoizedState;return[e,t]},useMutableSource:cm,useSyncExternalStore:dm,useId:Nm,unstable_isNewReconciler:!1};function pt(e,t){if(e&&e.defaultProps){t=ce({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Zo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ce({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var gi={isMounted:function(e){return(e=e._reactInternals)?Hr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Fe(),a=gr(e),i=Mt(n,a);i.payload=t,r!=null&&(i.callback=r),t=fr(e,i,a),t!==null&&(wt(t,e,a,n),ja(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Fe(),a=gr(e),i=Mt(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=fr(e,i,a),t!==null&&(wt(t,e,a,n),ja(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Fe(),n=gr(e),a=Mt(r,n);a.tag=2,t!=null&&(a.callback=t),t=fr(e,a,n),t!==null&&(wt(t,e,n,r),ja(t,e,n))}};function Md(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Nn(r,n)||!Nn(a,i):!0}function Em(e,t,r){var n=!1,a=wr,i=t.contextType;return typeof i=="object"&&i!==null?i=ct(i):(a=Ge(t)?Mr:Re.current,n=t.contextTypes,i=(n=n!=null)?_s(e,a):wr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gi,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Fd(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&gi.enqueueReplaceState(t,t.state,null)}function Xo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},ac(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ct(i):(i=Ge(t)?Mr:Re.current,a.context=_s(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Zo(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&gi.enqueueReplaceState(a,a.state,null),Va(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Cs(e,t){try{var r="",n=t;do r+=Jp(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function oo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function el(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var _0=typeof WeakMap=="function"?WeakMap:Map;function Pm(e,t,r){r=Mt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ya||(Ya=!0,dl=n),el(e,t)},r}function Tm(e,t,r){r=Mt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){el(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){el(e,t),typeof n!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Ud(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new _0;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=D0.bind(null,e,t,r),t.then(e,e))}function zd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Bd(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Mt(-1,1),t.tag=2,fr(r,t,1))),r.lanes|=1),e)}var N0=Gt.ReactCurrentOwner,He=!1;function Me(e,t,r,n){t.child=e===null?am(t,null,r,n):ks(t,e.child,r,n)}function qd(e,t,r,n,a){r=r.render;var i=t.ref;return ws(t,a),n=dc(e,t,r,n,i,a),r=uc(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qt(e,t,a)):(ae&&r&&Zl(t),t.flags|=1,Me(e,t,n,a),t.child)}function Wd(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!bc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Om(e,t,i,n,a)):(e=Ea(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Nn,r(o,n)&&e.ref===t.ref)return qt(e,t,a)}return t.flags|=1,e=xr(i,n),e.ref=t.ref,e.return=t,t.child=e}function Om(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Nn(i,n)&&e.ref===t.ref)if(He=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(He=!0);else return t.lanes=e.lanes,qt(e,t,a)}return tl(e,t,r,n,a)}function Im(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(ps,Je),Je|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,te(ps,Je),Je|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,te(ps,Je),Je|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,te(ps,Je),Je|=n;return Me(e,t,a,r),t.child}function Am(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function tl(e,t,r,n,a){var i=Ge(r)?Mr:Re.current;return i=_s(t,i),ws(t,a),r=dc(e,t,r,n,i,a),n=uc(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qt(e,t,a)):(ae&&n&&Zl(t),t.flags|=1,Me(e,t,r,a),t.child)}function Hd(e,t,r,n,a){if(Ge(r)){var i=!0;za(t)}else i=!1;if(ws(t,a),t.stateNode===null)ka(e,t),Em(t,r,n),Xo(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=ct(d):(d=Ge(r)?Mr:Re.current,d=_s(t,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Fd(t,o,n,d),nr=!1;var m=t.memoizedState;o.state=m,Va(t,n,o,a),c=t.memoizedState,l!==n||m!==c||Ve.current||nr?(typeof u=="function"&&(Zo(t,r,u,n),c=t.memoizedState),(l=nr||Md(t,r,l,n,m,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,om(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:pt(t.type,l),o.props=d,h=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ct(c):(c=Ge(r)?Mr:Re.current,c=_s(t,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&Fd(t,o,n,c),nr=!1,m=t.memoizedState,o.state=m,Va(t,n,o,a);var w=t.memoizedState;l!==h||m!==w||Ve.current||nr?(typeof p=="function"&&(Zo(t,r,p,n),w=t.memoizedState),(d=nr||Md(t,r,d,n,m,w,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,w,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),o.props=n,o.state=w,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return rl(e,t,r,n,i,a)}function rl(e,t,r,n,a,i){Am(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Td(t,r,!1),qt(e,t,i);n=t.stateNode,N0.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ks(t,e.child,null,i),t.child=ks(t,null,l,i)):Me(e,t,l,i),t.memoizedState=n.state,a&&Td(t,r,!0),t.child}function Rm(e){var t=e.stateNode;t.pendingContext?Pd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pd(e,t.context,!1),ic(e,t.containerInfo)}function Vd(e,t,r,n,a){return Ns(),ec(a),t.flags|=256,Me(e,t,r,n),t.child}var sl={dehydrated:null,treeContext:null,retryLane:0};function nl(e){return{baseLanes:e,cachePool:null,transitions:null}}function $m(e,t,r){var n=t.pendingProps,a=ie.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),te(ie,a&1),e===null)return Jo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vi(o,n,0,null),e=Lr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=nl(r),t.memoizedState=sl,e):fc(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return k0(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=xr(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=xr(l,i):(i=Lr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?nl(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=sl,n}return i=e.child,e=i.sibling,n=xr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function fc(e,t){return t=vi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function la(e,t,r,n){return n!==null&&ec(n),ks(t,e.child,null,r),e=fc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function k0(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=oo(Error(I(422))),la(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=vi({mode:"visible",children:n.children},a,0,null),i=Lr(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&ks(t,e.child,null,o),t.child.memoizedState=nl(o),t.memoizedState=sl,i);if(!(t.mode&1))return la(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(I(419)),n=oo(i,n,void 0),la(e,t,o,n)}if(l=(o&e.childLanes)!==0,He||l){if(n=_e,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Bt(e,a),wt(n,e,a,-1))}return wc(),n=oo(Error(I(421))),la(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=M0.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ye=mr(a.nextSibling),Xe=t,ae=!0,yt=null,e!==null&&(nt[at++]=Lt,nt[at++]=Dt,nt[at++]=Fr,Lt=e.id,Dt=e.overflow,Fr=t),t=fc(t,n.children),t.flags|=4096,t)}function Gd(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Yo(e.return,t,r)}function lo(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Lm(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Me(e,t,n.children,r),n=ie.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gd(e,r,t);else if(e.tag===19)Gd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(te(ie,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ga(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),lo(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ga(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}lo(t,!0,r,null,i);break;case"together":lo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ka(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),zr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,r=xr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=xr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function S0(e,t,r){switch(t.tag){case 3:Rm(t),Ns();break;case 5:lm(t);break;case 1:Ge(t.type)&&za(t);break;case 4:ic(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;te(Wa,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(te(ie,ie.current&1),t.flags|=128,null):r&t.child.childLanes?$m(e,t,r):(te(ie,ie.current&1),e=qt(e,t,r),e!==null?e.sibling:null);te(ie,ie.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Lm(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),te(ie,ie.current),n)break;return null;case 22:case 23:return t.lanes=0,Im(e,t,r)}return qt(e,t,r)}var Dm,al,Mm,Fm;Dm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};al=function(){};Mm=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Rr(Ct.current);var i=null;switch(r){case"input":a=Co(e,a),n=Co(e,n),i=[];break;case"select":a=ce({},a,{value:void 0}),n=ce({},n,{value:void 0}),i=[];break;case"textarea":a=To(e,a),n=To(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Fa)}Io(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(xn.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(xn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&re("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Fm=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ks(e,t){if(!ae)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function C0(e,t,r){var n=t.pendingProps;switch(Xl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return Ge(t.type)&&Ua(),Oe(t),null;case 3:return n=t.stateNode,Ss(),se(Ve),se(Re),lc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ia(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yt!==null&&(ml(yt),yt=null))),al(e,t),Oe(t),null;case 5:oc(t);var a=Rr(Pn.current);if(r=t.type,e!==null&&t.stateNode!=null)Mm(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(I(166));return Oe(t),null}if(e=Rr(Ct.current),ia(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[kt]=t,n[Cn]=i,e=(t.mode&1)!==0,r){case"dialog":re("cancel",n),re("close",n);break;case"iframe":case"object":case"embed":re("load",n);break;case"video":case"audio":for(a=0;a<tn.length;a++)re(tn[a],n);break;case"source":re("error",n);break;case"img":case"image":case"link":re("error",n),re("load",n);break;case"details":re("toggle",n);break;case"input":rd(n,i),re("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},re("invalid",n);break;case"textarea":nd(n,i),re("invalid",n)}Io(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&aa(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&aa(n.textContent,l,e),a=["children",""+l]):xn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&re("scroll",n)}switch(r){case"input":Yn(n),sd(n,i,!0);break;case"textarea":Yn(n),ad(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Fa)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=mh(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[kt]=t,e[Cn]=n,Dm(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ao(r,n),r){case"dialog":re("cancel",e),re("close",e),a=n;break;case"iframe":case"object":case"embed":re("load",e),a=n;break;case"video":case"audio":for(a=0;a<tn.length;a++)re(tn[a],e);a=n;break;case"source":re("error",e),a=n;break;case"img":case"image":case"link":re("error",e),re("load",e),a=n;break;case"details":re("toggle",e),a=n;break;case"input":rd(e,n),a=Co(e,n),re("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=ce({},n,{value:void 0}),re("invalid",e);break;case"textarea":nd(e,n),a=To(e,n),re("invalid",e);break;default:a=n}Io(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?gh(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&fh(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&yn(e,c):typeof c=="number"&&yn(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&re("scroll",e):c!=null&&Ml(e,i,c,o))}switch(r){case"input":Yn(e),sd(e,n,!1);break;case"textarea":Yn(e),ad(e);break;case"option":n.value!=null&&e.setAttribute("value",""+vr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?gs(e,!!n.multiple,i,!1):n.defaultValue!=null&&gs(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Fa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oe(t),null;case 6:if(e&&t.stateNode!=null)Fm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(I(166));if(r=Rr(Pn.current),Rr(Ct.current),ia(t)){if(n=t.stateNode,r=t.memoizedProps,n[kt]=t,(i=n.nodeValue!==r)&&(e=Xe,e!==null))switch(e.tag){case 3:aa(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&aa(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[kt]=t,t.stateNode=n}return Oe(t),null;case 13:if(se(ie),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ae&&Ye!==null&&t.mode&1&&!(t.flags&128))sm(),Ns(),t.flags|=98560,i=!1;else if(i=ia(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(I(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(I(317));i[kt]=t}else Ns(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oe(t),i=!1}else yt!==null&&(ml(yt),yt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ie.current&1?we===0&&(we=3):wc())),t.updateQueue!==null&&(t.flags|=4),Oe(t),null);case 4:return Ss(),al(e,t),e===null&&kn(t.stateNode.containerInfo),Oe(t),null;case 10:return sc(t.type._context),Oe(t),null;case 17:return Ge(t.type)&&Ua(),Oe(t),null;case 19:if(se(ie),i=t.memoizedState,i===null)return Oe(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Ks(i,!1);else{if(we!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ga(e),o!==null){for(t.flags|=128,Ks(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return te(ie,ie.current&1|2),t.child}e=e.sibling}i.tail!==null&&me()>Es&&(t.flags|=128,n=!0,Ks(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ga(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ks(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ae)return Oe(t),null}else 2*me()-i.renderingStartTime>Es&&r!==1073741824&&(t.flags|=128,n=!0,Ks(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=me(),t.sibling=null,r=ie.current,te(ie,n?r&1|2:r&1),t):(Oe(t),null);case 22:case 23:return vc(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Je&1073741824&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function E0(e,t){switch(Xl(t),t.tag){case 1:return Ge(t.type)&&Ua(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ss(),se(Ve),se(Re),lc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return oc(t),null;case 13:if(se(ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));Ns()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return se(ie),null;case 4:return Ss(),null;case 10:return sc(t.type._context),null;case 22:case 23:return vc(),null;case 24:return null;default:return null}}var ca=!1,Ae=!1,P0=typeof WeakSet=="function"?WeakSet:Set,F=null;function fs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){de(e,t,n)}else r.current=null}function il(e,t,r){try{r()}catch(n){de(e,t,n)}}var Kd=!1;function T0(e,t){if(qo=La,e=Wh(),Yl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===e)break t;if(m===r&&++d===a&&(l=o),m===i&&++u===n&&(c=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wo={focusedElem:e,selectionRange:r},La=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var b=w.memoizedProps,j=w.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?b:pt(t.type,b),j);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(v){de(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return w=Kd,Kd=!1,w}function dn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&il(t,r,i)}a=a.next}while(a!==n)}}function xi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ol(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Um(e){var t=e.alternate;t!==null&&(e.alternate=null,Um(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kt],delete t[Cn],delete t[Go],delete t[h0],delete t[m0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zm(e){return e.tag===5||e.tag===3||e.tag===4}function Qd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Fa));else if(n!==4&&(e=e.child,e!==null))for(ll(e,t,r),e=e.sibling;e!==null;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(cl(e,t,r),e=e.sibling;e!==null;)cl(e,t,r),e=e.sibling}var Se=null,gt=!1;function er(e,t,r){for(r=r.child;r!==null;)Bm(e,t,r),r=r.sibling}function Bm(e,t,r){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(ci,r)}catch{}switch(r.tag){case 5:Ae||fs(r,t);case 6:var n=Se,a=gt;Se=null,er(e,t,r),Se=n,gt=a,Se!==null&&(gt?(e=Se,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Se.removeChild(r.stateNode));break;case 18:Se!==null&&(gt?(e=Se,r=r.stateNode,e.nodeType===8?to(e.parentNode,r):e.nodeType===1&&to(e,r),jn(e)):to(Se,r.stateNode));break;case 4:n=Se,a=gt,Se=r.stateNode.containerInfo,gt=!0,er(e,t,r),Se=n,gt=a;break;case 0:case 11:case 14:case 15:if(!Ae&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&il(r,t,o),a=a.next}while(a!==n)}er(e,t,r);break;case 1:if(!Ae&&(fs(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){de(r,t,l)}er(e,t,r);break;case 21:er(e,t,r);break;case 22:r.mode&1?(Ae=(n=Ae)||r.memoizedState!==null,er(e,t,r),Ae=n):er(e,t,r);break;default:er(e,t,r)}}function Jd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new P0),t.forEach(function(n){var a=F0.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function mt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Se=l.stateNode,gt=!1;break e;case 3:Se=l.stateNode.containerInfo,gt=!0;break e;case 4:Se=l.stateNode.containerInfo,gt=!0;break e}l=l.return}if(Se===null)throw Error(I(160));Bm(i,o,a),Se=null,gt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){de(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qm(t,e),t=t.sibling}function qm(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mt(t,e),jt(e),n&4){try{dn(3,e,e.return),xi(3,e)}catch(b){de(e,e.return,b)}try{dn(5,e,e.return)}catch(b){de(e,e.return,b)}}break;case 1:mt(t,e),jt(e),n&512&&r!==null&&fs(r,r.return);break;case 5:if(mt(t,e),jt(e),n&512&&r!==null&&fs(r,r.return),e.flags&32){var a=e.stateNode;try{yn(a,"")}catch(b){de(e,e.return,b)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&uh(a,i),Ao(l,o);var d=Ao(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?gh(a,h):u==="dangerouslySetInnerHTML"?fh(a,h):u==="children"?yn(a,h):Ml(a,u,h,d)}switch(l){case"input":Eo(a,i);break;case"textarea":hh(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?gs(a,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?gs(a,!!i.multiple,i.defaultValue,!0):gs(a,!!i.multiple,i.multiple?[]:"",!1))}a[Cn]=i}catch(b){de(e,e.return,b)}}break;case 6:if(mt(t,e),jt(e),n&4){if(e.stateNode===null)throw Error(I(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(b){de(e,e.return,b)}}break;case 3:if(mt(t,e),jt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{jn(t.containerInfo)}catch(b){de(e,e.return,b)}break;case 4:mt(t,e),jt(e);break;case 13:mt(t,e),jt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(xc=me())),n&4&&Jd(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Ae=(d=Ae)||u,mt(t,e),Ae=d):mt(t,e),jt(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(F=e,u=e.child;u!==null;){for(h=F=u;F!==null;){switch(m=F,p=m.child,m.tag){case 0:case 11:case 14:case 15:dn(4,m,m.return);break;case 1:fs(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(b){de(n,r,b)}}break;case 5:fs(m,m.return);break;case 22:if(m.memoizedState!==null){Zd(h);continue}}p!==null?(p.return=m,F=p):Zd(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ph("display",o))}catch(b){de(e,e.return,b)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(b){de(e,e.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mt(t,e),jt(e),n&4&&Jd(e);break;case 21:break;default:mt(t,e),jt(e)}}function jt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(zm(r)){var n=r;break e}r=r.return}throw Error(I(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(yn(a,""),n.flags&=-33);var i=Qd(e);cl(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Qd(e);ll(e,l,o);break;default:throw Error(I(161))}}catch(c){de(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function O0(e,t,r){F=e,Wm(e)}function Wm(e,t,r){for(var n=(e.mode&1)!==0;F!==null;){var a=F,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||ca;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Ae;l=ca;var d=Ae;if(ca=o,(Ae=c)&&!d)for(F=a;F!==null;)o=F,c=o.child,o.tag===22&&o.memoizedState!==null?Xd(a):c!==null?(c.return=o,F=c):Xd(a);for(;i!==null;)F=i,Wm(i),i=i.sibling;F=a,ca=l,Ae=d}Yd(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,F=i):Yd(e)}}function Yd(e){for(;F!==null;){var t=F;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ae||xi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ae)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:pt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&$d(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}$d(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&jn(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Ae||t.flags&512&&ol(t)}catch(m){de(t,t.return,m)}}if(t===e){F=null;break}if(r=t.sibling,r!==null){r.return=t.return,F=r;break}F=t.return}}function Zd(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var r=t.sibling;if(r!==null){r.return=t.return,F=r;break}F=t.return}}function Xd(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{xi(4,t)}catch(c){de(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){de(t,a,c)}}var i=t.return;try{ol(t)}catch(c){de(t,i,c)}break;case 5:var o=t.return;try{ol(t)}catch(c){de(t,o,c)}}}catch(c){de(t,t.return,c)}if(t===e){F=null;break}var l=t.sibling;if(l!==null){l.return=t.return,F=l;break}F=t.return}}var I0=Math.ceil,Ja=Gt.ReactCurrentDispatcher,pc=Gt.ReactCurrentOwner,ot=Gt.ReactCurrentBatchConfig,J=0,_e=null,pe=null,Ce=0,Je=0,ps=_r(0),we=0,An=null,zr=0,yi=0,gc=0,un=null,qe=null,xc=0,Es=1/0,At=null,Ya=!1,dl=null,pr=null,da=!1,cr=null,Za=0,hn=0,ul=null,Sa=-1,Ca=0;function Fe(){return J&6?me():Sa!==-1?Sa:Sa=me()}function gr(e){return e.mode&1?J&2&&Ce!==0?Ce&-Ce:p0.transition!==null?(Ca===0&&(Ca=Eh()),Ca):(e=Z,e!==0||(e=window.event,e=e===void 0?16:$h(e.type)),e):1}function wt(e,t,r,n){if(50<hn)throw hn=0,ul=null,Error(I(185));Dn(e,r,n),(!(J&2)||e!==_e)&&(e===_e&&(!(J&2)&&(yi|=r),we===4&&ir(e,Ce)),Ke(e,n),r===1&&J===0&&!(t.mode&1)&&(Es=me()+500,fi&&Nr()))}function Ke(e,t){var r=e.callbackNode;pg(e,t);var n=$a(e,e===_e?Ce:0);if(n===0)r!==null&&ld(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&ld(r),t===1)e.tag===0?f0(eu.bind(null,e)):em(eu.bind(null,e)),d0(function(){!(J&6)&&Nr()}),r=null;else{switch(Ph(n)){case 1:r=ql;break;case 4:r=Sh;break;case 16:r=Ra;break;case 536870912:r=Ch;break;default:r=Ra}r=Zm(r,Hm.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Hm(e,t){if(Sa=-1,Ca=0,J&6)throw Error(I(327));var r=e.callbackNode;if(bs()&&e.callbackNode!==r)return null;var n=$a(e,e===_e?Ce:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Xa(e,n);else{t=n;var a=J;J|=2;var i=Gm();(_e!==e||Ce!==t)&&(At=null,Es=me()+500,$r(e,t));do try{$0();break}catch(l){Vm(e,l)}while(!0);rc(),Ja.current=i,J=a,pe!==null?t=0:(_e=null,Ce=0,t=we)}if(t!==0){if(t===2&&(a=Mo(e),a!==0&&(n=a,t=hl(e,a))),t===1)throw r=An,$r(e,0),ir(e,n),Ke(e,me()),r;if(t===6)ir(e,n);else{if(a=e.current.alternate,!(n&30)&&!A0(a)&&(t=Xa(e,n),t===2&&(i=Mo(e),i!==0&&(n=i,t=hl(e,i))),t===1))throw r=An,$r(e,0),ir(e,n),Ke(e,me()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(I(345));case 2:Pr(e,qe,At);break;case 3:if(ir(e,n),(n&130023424)===n&&(t=xc+500-me(),10<t)){if($a(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Fe(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Vo(Pr.bind(null,e,qe,At),t);break}Pr(e,qe,At);break;case 4:if(ir(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-vt(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=me()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*I0(n/1960))-n,10<n){e.timeoutHandle=Vo(Pr.bind(null,e,qe,At),n);break}Pr(e,qe,At);break;case 5:Pr(e,qe,At);break;default:throw Error(I(329))}}}return Ke(e,me()),e.callbackNode===r?Hm.bind(null,e):null}function hl(e,t){var r=un;return e.current.memoizedState.isDehydrated&&($r(e,t).flags|=256),e=Xa(e,t),e!==2&&(t=qe,qe=r,t!==null&&ml(t)),e}function ml(e){qe===null?qe=e:qe.push.apply(qe,e)}function A0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!bt(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ir(e,t){for(t&=~gc,t&=~yi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-vt(t),n=1<<r;e[r]=-1,t&=~n}}function eu(e){if(J&6)throw Error(I(327));bs();var t=$a(e,0);if(!(t&1))return Ke(e,me()),null;var r=Xa(e,t);if(e.tag!==0&&r===2){var n=Mo(e);n!==0&&(t=n,r=hl(e,n))}if(r===1)throw r=An,$r(e,0),ir(e,t),Ke(e,me()),r;if(r===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pr(e,qe,At),Ke(e,me()),null}function yc(e,t){var r=J;J|=1;try{return e(t)}finally{J=r,J===0&&(Es=me()+500,fi&&Nr())}}function Br(e){cr!==null&&cr.tag===0&&!(J&6)&&bs();var t=J;J|=1;var r=ot.transition,n=Z;try{if(ot.transition=null,Z=1,e)return e()}finally{Z=n,ot.transition=r,J=t,!(J&6)&&Nr()}}function vc(){Je=ps.current,se(ps)}function $r(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,c0(r)),pe!==null)for(r=pe.return;r!==null;){var n=r;switch(Xl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ua();break;case 3:Ss(),se(Ve),se(Re),lc();break;case 5:oc(n);break;case 4:Ss();break;case 13:se(ie);break;case 19:se(ie);break;case 10:sc(n.type._context);break;case 22:case 23:vc()}r=r.return}if(_e=e,pe=e=xr(e.current,null),Ce=Je=t,we=0,An=null,gc=yi=zr=0,qe=un=null,Ar!==null){for(t=0;t<Ar.length;t++)if(r=Ar[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Ar=null}return e}function Vm(e,t){do{var r=pe;try{if(rc(),_a.current=Qa,Ka){for(var n=oe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ka=!1}if(Ur=0,je=ve=oe=null,cn=!1,Tn=0,pc.current=null,r===null||r.return===null){we=1,An=t,pe=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Ce,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=zd(o);if(p!==null){p.flags&=-257,Bd(p,o,l,i,t),p.mode&1&&Ud(i,d,t),t=p,c=d;var w=t.updateQueue;if(w===null){var b=new Set;b.add(c),t.updateQueue=b}else w.add(c);break e}else{if(!(t&1)){Ud(i,d,t),wc();break e}c=Error(I(426))}}else if(ae&&l.mode&1){var j=zd(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Bd(j,o,l,i,t),ec(Cs(c,l));break e}}i=c=Cs(c,l),we!==4&&(we=2),un===null?un=[i]:un.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=Pm(i,c,t);Rd(i,x);break e;case 1:l=c;var y=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(pr===null||!pr.has(f)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=Tm(i,l,t);Rd(i,v);break e}}i=i.return}while(i!==null)}Qm(r)}catch(k){t=k,pe===r&&r!==null&&(pe=r=r.return);continue}break}while(!0)}function Gm(){var e=Ja.current;return Ja.current=Qa,e===null?Qa:e}function wc(){(we===0||we===3||we===2)&&(we=4),_e===null||!(zr&268435455)&&!(yi&268435455)||ir(_e,Ce)}function Xa(e,t){var r=J;J|=2;var n=Gm();(_e!==e||Ce!==t)&&(At=null,$r(e,t));do try{R0();break}catch(a){Vm(e,a)}while(!0);if(rc(),J=r,Ja.current=n,pe!==null)throw Error(I(261));return _e=null,Ce=0,we}function R0(){for(;pe!==null;)Km(pe)}function $0(){for(;pe!==null&&!ig();)Km(pe)}function Km(e){var t=Ym(e.alternate,e,Je);e.memoizedProps=e.pendingProps,t===null?Qm(e):pe=t,pc.current=null}function Qm(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=E0(r,t),r!==null){r.flags&=32767,pe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{we=6,pe=null;return}}else if(r=C0(r,t,Je),r!==null){pe=r;return}if(t=t.sibling,t!==null){pe=t;return}pe=t=e}while(t!==null);we===0&&(we=5)}function Pr(e,t,r){var n=Z,a=ot.transition;try{ot.transition=null,Z=1,L0(e,t,r,n)}finally{ot.transition=a,Z=n}return null}function L0(e,t,r,n){do bs();while(cr!==null);if(J&6)throw Error(I(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(gg(e,i),e===_e&&(pe=_e=null,Ce=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||da||(da=!0,Zm(Ra,function(){return bs(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ot.transition,ot.transition=null;var o=Z;Z=1;var l=J;J|=4,pc.current=null,T0(e,r),qm(r,e),r0(Wo),La=!!qo,Wo=qo=null,e.current=r,O0(r),og(),J=l,Z=o,ot.transition=i}else e.current=r;if(da&&(da=!1,cr=e,Za=a),i=e.pendingLanes,i===0&&(pr=null),dg(r.stateNode),Ke(e,me()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ya)throw Ya=!1,e=dl,dl=null,e;return Za&1&&e.tag!==0&&bs(),i=e.pendingLanes,i&1?e===ul?hn++:(hn=0,ul=e):hn=0,Nr(),null}function bs(){if(cr!==null){var e=Ph(Za),t=ot.transition,r=Z;try{if(ot.transition=null,Z=16>e?16:e,cr===null)var n=!1;else{if(e=cr,cr=null,Za=0,J&6)throw Error(I(331));var a=J;for(J|=4,F=e.current;F!==null;){var i=F,o=i.child;if(F.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(F=d;F!==null;){var u=F;switch(u.tag){case 0:case 11:case 15:dn(8,u,i)}var h=u.child;if(h!==null)h.return=u,F=h;else for(;F!==null;){u=F;var m=u.sibling,p=u.return;if(Um(u),u===d){F=null;break}if(m!==null){m.return=p,F=m;break}F=p}}}var w=i.alternate;if(w!==null){var b=w.child;if(b!==null){w.child=null;do{var j=b.sibling;b.sibling=null,b=j}while(b!==null)}}F=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,F=o;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:dn(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,F=x;break e}F=i.return}}var y=e.current;for(F=y;F!==null;){o=F;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,F=f;else e:for(o=y;F!==null;){if(l=F,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xi(9,l)}}catch(k){de(l,l.return,k)}if(l===o){F=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,F=v;break e}F=l.return}}if(J=a,Nr(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(ci,e)}catch{}n=!0}return n}finally{Z=r,ot.transition=t}}return!1}function tu(e,t,r){t=Cs(r,t),t=Pm(e,t,1),e=fr(e,t,1),t=Fe(),e!==null&&(Dn(e,1,t),Ke(e,t))}function de(e,t,r){if(e.tag===3)tu(e,e,r);else for(;t!==null;){if(t.tag===3){tu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(pr===null||!pr.has(n))){e=Cs(r,e),e=Tm(t,e,1),t=fr(t,e,1),e=Fe(),t!==null&&(Dn(t,1,e),Ke(t,e));break}}t=t.return}}function D0(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Fe(),e.pingedLanes|=e.suspendedLanes&r,_e===e&&(Ce&r)===r&&(we===4||we===3&&(Ce&130023424)===Ce&&500>me()-xc?$r(e,0):gc|=r),Ke(e,t)}function Jm(e,t){t===0&&(e.mode&1?(t=ea,ea<<=1,!(ea&130023424)&&(ea=4194304)):t=1);var r=Fe();e=Bt(e,t),e!==null&&(Dn(e,t,r),Ke(e,r))}function M0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Jm(e,r)}function F0(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(I(314))}n!==null&&n.delete(t),Jm(e,r)}var Ym;Ym=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ve.current)He=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return He=!1,S0(e,t,r);He=!!(e.flags&131072)}else He=!1,ae&&t.flags&1048576&&tm(t,qa,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ka(e,t),e=t.pendingProps;var a=_s(t,Re.current);ws(t,r),a=dc(null,t,n,e,a,r);var i=uc();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ge(n)?(i=!0,za(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ac(t),a.updater=gi,t.stateNode=a,a._reactInternals=t,Xo(t,n,e,r),t=rl(null,t,n,!0,i,r)):(t.tag=0,ae&&i&&Zl(t),Me(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ka(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=z0(n),e=pt(n,e),a){case 0:t=tl(null,t,n,e,r);break e;case 1:t=Hd(null,t,n,e,r);break e;case 11:t=qd(null,t,n,e,r);break e;case 14:t=Wd(null,t,n,pt(n.type,e),r);break e}throw Error(I(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:pt(n,a),tl(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:pt(n,a),Hd(e,t,n,a,r);case 3:e:{if(Rm(t),e===null)throw Error(I(387));n=t.pendingProps,i=t.memoizedState,a=i.element,om(e,t),Va(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Cs(Error(I(423)),t),t=Vd(e,t,n,r,a);break e}else if(n!==a){a=Cs(Error(I(424)),t),t=Vd(e,t,n,r,a);break e}else for(Ye=mr(t.stateNode.containerInfo.firstChild),Xe=t,ae=!0,yt=null,r=am(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ns(),n===a){t=qt(e,t,r);break e}Me(e,t,n,r)}t=t.child}return t;case 5:return lm(t),e===null&&Jo(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Ho(n,a)?o=null:i!==null&&Ho(n,i)&&(t.flags|=32),Am(e,t),Me(e,t,o,r),t.child;case 6:return e===null&&Jo(t),null;case 13:return $m(e,t,r);case 4:return ic(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ks(t,null,n,r):Me(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:pt(n,a),qd(e,t,n,a,r);case 7:return Me(e,t,t.pendingProps,r),t.child;case 8:return Me(e,t,t.pendingProps.children,r),t.child;case 12:return Me(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,te(Wa,n._currentValue),n._currentValue=o,i!==null)if(bt(i.value,o)){if(i.children===a.children&&!Ve.current){t=qt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Mt(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Yo(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(I(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Yo(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Me(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ws(t,r),a=ct(a),n=n(a),t.flags|=1,Me(e,t,n,r),t.child;case 14:return n=t.type,a=pt(n,t.pendingProps),a=pt(n.type,a),Wd(e,t,n,a,r);case 15:return Om(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:pt(n,a),ka(e,t),t.tag=1,Ge(n)?(e=!0,za(t)):e=!1,ws(t,r),Em(t,n,a),Xo(t,n,a,r),rl(null,t,n,!0,e,r);case 19:return Lm(e,t,r);case 22:return Im(e,t,r)}throw Error(I(156,t.tag))};function Zm(e,t){return kh(e,t)}function U0(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(e,t,r,n){return new U0(e,t,r,n)}function bc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function z0(e){if(typeof e=="function")return bc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ul)return 11;if(e===zl)return 14}return 2}function xr(e,t){var r=e.alternate;return r===null?(r=it(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ea(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")bc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case as:return Lr(r.children,a,i,t);case Fl:o=8,a|=8;break;case _o:return e=it(12,r,t,a|2),e.elementType=_o,e.lanes=i,e;case No:return e=it(13,r,t,a),e.elementType=No,e.lanes=i,e;case ko:return e=it(19,r,t,a),e.elementType=ko,e.lanes=i,e;case lh:return vi(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ih:o=10;break e;case oh:o=9;break e;case Ul:o=11;break e;case zl:o=14;break e;case sr:o=16,n=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=it(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Lr(e,t,r,n){return e=it(7,e,n,t),e.lanes=r,e}function vi(e,t,r,n){return e=it(22,e,n,t),e.elementType=lh,e.lanes=r,e.stateNode={isHidden:!1},e}function co(e,t,r){return e=it(6,e,null,t),e.lanes=r,e}function uo(e,t,r){return t=it(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function B0(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wi(0),this.expirationTimes=Wi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wi(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function jc(e,t,r,n,a,i,o,l,c){return e=new B0(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=it(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ac(i),e}function q0(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ns,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Xm(e){if(!e)return wr;e=e._reactInternals;e:{if(Hr(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ge(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var r=e.type;if(Ge(r))return Xh(e,r,t)}return t}function ef(e,t,r,n,a,i,o,l,c){return e=jc(r,n,!0,e,a,i,o,l,c),e.context=Xm(null),r=e.current,n=Fe(),a=gr(r),i=Mt(n,a),i.callback=t??null,fr(r,i,a),e.current.lanes=a,Dn(e,a,n),Ke(e,n),e}function wi(e,t,r,n){var a=t.current,i=Fe(),o=gr(a);return r=Xm(r),t.context===null?t.context=r:t.pendingContext=r,t=Mt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=fr(a,t,o),e!==null&&(wt(e,a,o,i),ja(e,a,o)),o}function ei(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ru(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function _c(e,t){ru(e,t),(e=e.alternate)&&ru(e,t)}function W0(){return null}var tf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nc(e){this._internalRoot=e}bi.prototype.render=Nc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));wi(e,t,null,null)};bi.prototype.unmount=Nc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Br(function(){wi(null,e,null,null)}),t[zt]=null}};function bi(e){this._internalRoot=e}bi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ih();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ar.length&&t!==0&&t<ar[r].priority;r++);ar.splice(r,0,e),r===0&&Rh(e)}};function kc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ji(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function su(){}function H0(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=ei(o);i.call(d)}}var o=ef(t,n,e,0,null,!1,!1,"",su);return e._reactRootContainer=o,e[zt]=o.current,kn(e.nodeType===8?e.parentNode:e),Br(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=ei(c);l.call(d)}}var c=jc(e,0,!1,null,null,!1,!1,"",su);return e._reactRootContainer=c,e[zt]=c.current,kn(e.nodeType===8?e.parentNode:e),Br(function(){wi(t,c,r,n)}),c}function _i(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=ei(o);l.call(c)}}wi(t,o,e,a)}else o=H0(r,t,e,a,n);return ei(o)}Th=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=en(t.pendingLanes);r!==0&&(Wl(t,r|1),Ke(t,me()),!(J&6)&&(Es=me()+500,Nr()))}break;case 13:Br(function(){var n=Bt(e,1);if(n!==null){var a=Fe();wt(n,e,1,a)}}),_c(e,1)}};Hl=function(e){if(e.tag===13){var t=Bt(e,134217728);if(t!==null){var r=Fe();wt(t,e,134217728,r)}_c(e,134217728)}};Oh=function(e){if(e.tag===13){var t=gr(e),r=Bt(e,t);if(r!==null){var n=Fe();wt(r,e,t,n)}_c(e,t)}};Ih=function(){return Z};Ah=function(e,t){var r=Z;try{return Z=e,t()}finally{Z=r}};$o=function(e,t,r){switch(t){case"input":if(Eo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=mi(n);if(!a)throw Error(I(90));dh(n),Eo(n,a)}}}break;case"textarea":hh(e,r);break;case"select":t=r.value,t!=null&&gs(e,!!r.multiple,t,!1)}};vh=yc;wh=Br;var V0={usingClientEntryPoint:!1,Events:[Fn,cs,mi,xh,yh,yc]},Qs={findFiberByHostInstance:Ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G0={bundleType:Qs.bundleType,version:Qs.version,rendererPackageName:Qs.rendererPackageName,rendererConfig:Qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_h(e),e===null?null:e.stateNode},findFiberByHostInstance:Qs.findFiberByHostInstance||W0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ua=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ua.isDisabled&&ua.supportsFiber)try{ci=ua.inject(G0),St=ua}catch{}}tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V0;tt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kc(t))throw Error(I(200));return q0(e,t,null,r)};tt.createRoot=function(e,t){if(!kc(e))throw Error(I(299));var r=!1,n="",a=tf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=jc(e,1,!1,null,null,r,!1,n,a),e[zt]=t.current,kn(e.nodeType===8?e.parentNode:e),new Nc(t)};tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=_h(t),e=e===null?null:e.stateNode,e};tt.flushSync=function(e){return Br(e)};tt.hydrate=function(e,t,r){if(!ji(t))throw Error(I(200));return _i(null,e,t,!0,r)};tt.hydrateRoot=function(e,t,r){if(!kc(e))throw Error(I(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=tf;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=ef(t,null,e,1,r??null,a,!1,i,o),e[zt]=t.current,kn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new bi(t)};tt.render=function(e,t,r){if(!ji(t))throw Error(I(200));return _i(null,e,t,!1,r)};tt.unmountComponentAtNode=function(e){if(!ji(e))throw Error(I(40));return e._reactRootContainer?(Br(function(){_i(null,null,e,!1,function(){e._reactRootContainer=null,e[zt]=null})}),!0):!1};tt.unstable_batchedUpdates=yc;tt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ji(r))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return _i(e,t,r,!1,n)};tt.version="18.3.1-next-f1338f8080-20240426";function rf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rf)}catch(e){console.error(e)}}rf(),rh.exports=tt;var K0=rh.exports,sf,nu=K0;sf=nu.createRoot,nu.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var au="popstate";function Q0(e={}){function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return fl("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Rn(a)}return Y0(t,r,null,e)}function le(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Pt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function J0(){return Math.random().toString(36).substring(2,10)}function iu(e,t){return{usr:e.state,key:e.key,idx:t}}function fl(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?$s(t):t,state:r,key:t&&t.key||n||J0()}}function Rn({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $s(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Y0(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let j=u(),x=j==null?null:j-d;d=j,c&&c({action:l,location:b.location,delta:x})}function m(j,x){l="PUSH";let y=fl(b.location,j,x);d=u()+1;let f=iu(y,d),v=b.createHref(y);try{o.pushState(f,"",v)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(v)}i&&c&&c({action:l,location:b.location,delta:1})}function p(j,x){l="REPLACE";let y=fl(b.location,j,x);d=u();let f=iu(y,d),v=b.createHref(y);o.replaceState(f,"",v),i&&c&&c({action:l,location:b.location,delta:0})}function w(j){return Z0(j)}let b={get action(){return l},get location(){return e(a,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(au,h),c=j,()=>{a.removeEventListener(au,h),c=null}},createHref(j){return t(a,j)},createURL:w,encodeLocation(j){let x=w(j);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:p,go(j){return o.go(j)}};return b}function Z0(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),le(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Rn(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function nf(e,t,r="/"){return X0(e,t,r,!1)}function X0(e,t,r,n){let a=typeof t=="string"?$s(t):t,i=Wt(a.pathname||"/",r);if(i==null)return null;let o=af(e);ex(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=ux(i);l=cx(o[c],d,n)}return l}function af(e,t=[],r=[],n="",a=!1){let i=(o,l,c=a,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&c)return;le(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let h=Ft([n,u.relativePath]),m=r.concat(u);o.children&&o.children.length>0&&(le(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),af(o.children,t,m,h,c)),!(o.path==null&&!o.index)&&t.push({path:h,score:ox(h,o.index),routesMeta:m})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let d of of(o.path))i(o,l,!0,d)}),t}function of(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=of(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function ex(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:lx(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var tx=/^:[\w-]+$/,rx=3,sx=2,nx=1,ax=10,ix=-2,ou=e=>e==="*";function ox(e,t){let r=e.split("/"),n=r.length;return r.some(ou)&&(n+=ix),t&&(n+=sx),r.filter(a=>!ou(a)).reduce((a,i)=>a+(tx.test(i)?rx:i===""?nx:ax),n)}function lx(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function cx(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=ti({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h&&d&&r&&!n[n.length-1].route.index&&(h=ti({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:Ft([i,h.pathname]),pathnameBase:px(Ft([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Ft([i,h.pathnameBase]))}return o}function ti(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=dx(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,{paramName:u,isOptional:h},m)=>{if(u==="*"){let w=l[m]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const p=l[m];return h&&!p?d[u]=void 0:d[u]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function dx(e,t=!1,r=!0){Pt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function ux(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Pt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Wt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function hx(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?$s(e):e;return{pathname:r?r.startsWith("/")?r:mx(r,t):t,search:gx(n),hash:xx(a)}}function mx(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function ho(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fx(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function lf(e){let t=fx(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function cf(e,t,r,n=!1){let a;typeof e=="string"?a=$s(e):(a={...e},le(!a.pathname||!a.pathname.includes("?"),ho("?","pathname","search",a)),le(!a.pathname||!a.pathname.includes("#"),ho("#","pathname","hash",a)),le(!a.search||!a.search.includes("#"),ho("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=hx(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var Ft=e=>e.join("/").replace(/\/\/+/g,"/"),px=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,xx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function yx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var df=["POST","PUT","PATCH","DELETE"];new Set(df);var vx=["GET",...df];new Set(vx);var Ls=g.createContext(null);Ls.displayName="DataRouter";var Ni=g.createContext(null);Ni.displayName="DataRouterState";g.createContext(!1);var uf=g.createContext({isTransitioning:!1});uf.displayName="ViewTransition";var wx=g.createContext(new Map);wx.displayName="Fetchers";var bx=g.createContext(null);bx.displayName="Await";var Ot=g.createContext(null);Ot.displayName="Navigation";var zn=g.createContext(null);zn.displayName="Location";var Kt=g.createContext({outlet:null,matches:[],isDataRoute:!1});Kt.displayName="Route";var Sc=g.createContext(null);Sc.displayName="RouteError";function jx(e,{relative:t}={}){le(Bn(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=g.useContext(Ot),{hash:a,pathname:i,search:o}=qn(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:Ft([r,i])),n.createHref({pathname:l,search:o,hash:a})}function Bn(){return g.useContext(zn)!=null}function Vr(){return le(Bn(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(zn).location}var hf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mf(e){g.useContext(Ot).static||g.useLayoutEffect(e)}function Ds(){let{isDataRoute:e}=g.useContext(Kt);return e?$x():_x()}function _x(){le(Bn(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Ls),{basename:t,navigator:r}=g.useContext(Ot),{matches:n}=g.useContext(Kt),{pathname:a}=Vr(),i=JSON.stringify(lf(n)),o=g.useRef(!1);return mf(()=>{o.current=!0}),g.useCallback((c,d={})=>{if(Pt(o.current,hf),!o.current)return;if(typeof c=="number"){r.go(c);return}let u=cf(c,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Ft([t,u.pathname])),(d.replace?r.replace:r.push)(u,d.state,d)},[t,r,i,a,e])}g.createContext(null);function qn(e,{relative:t}={}){let{matches:r}=g.useContext(Kt),{pathname:n}=Vr(),a=JSON.stringify(lf(r));return g.useMemo(()=>cf(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function Nx(e,t){return ff(e,t)}function ff(e,t,r,n,a){var y;le(Bn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(Ot),{matches:o}=g.useContext(Kt),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",u=l?l.pathnameBase:"/",h=l&&l.route;{let f=h&&h.path||"";pf(d,!h||f.endsWith("*")||f.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${f}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${f}"> to <Route path="${f==="/"?"*":`${f}/*`}">.`)}let m=Vr(),p;if(t){let f=typeof t=="string"?$s(t):t;le(u==="/"||((y=f.pathname)==null?void 0:y.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${f.pathname}" was given in the \`location\` prop.`),p=f}else p=m;let w=p.pathname||"/",b=w;if(u!=="/"){let f=u.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(f.length).join("/")}let j=nf(e,{pathname:b});Pt(h||j!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Pt(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=Px(j&&j.map(f=>Object.assign({},f,{params:Object.assign({},c,f.params),pathname:Ft([u,i.encodeLocation?i.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?u:Ft([u,i.encodeLocation?i.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),o,r,n,a);return t&&x?g.createElement(zn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function kx(){let e=Rx(),t=yx(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:a},r):null,o)}var Sx=g.createElement(kx,null),Cx=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(Kt.Provider,{value:this.props.routeContext},g.createElement(Sc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ex({routeContext:e,match:t,children:r}){let n=g.useContext(Ls);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Kt.Provider,{value:e},r)}function Px(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let d=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);le(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(r)for(let d=0;d<i.length;d++){let u=i[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=d),u.route.id){let{loaderData:h,errors:m}=r,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!m||m[u.route.id]===void 0);if(u.route.lazy||p){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,u,h)=>{let m,p=!1,w=null,b=null;r&&(m=o&&u.route.id?o[u.route.id]:void 0,w=u.route.errorElement||Sx,l&&(c<0&&h===0?(pf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,b=null):c===h&&(p=!0,b=u.route.hydrateFallbackElement||null)));let j=t.concat(i.slice(0,h+1)),x=()=>{let y;return m?y=w:p?y=b:u.route.Component?y=g.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=d,g.createElement(Ex,{match:u,routeContext:{outlet:d,matches:j,isDataRoute:r!=null},children:y})};return r&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?g.createElement(Cx,{location:r.location,revalidation:r.revalidation,component:w,error:m,children:x(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:n}):x()},null)}function Cc(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tx(e){let t=g.useContext(Ls);return le(t,Cc(e)),t}function Ox(e){let t=g.useContext(Ni);return le(t,Cc(e)),t}function Ix(e){let t=g.useContext(Kt);return le(t,Cc(e)),t}function Ec(e){let t=Ix(e),r=t.matches[t.matches.length-1];return le(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Ax(){return Ec("useRouteId")}function Rx(){var n;let e=g.useContext(Sc),t=Ox("useRouteError"),r=Ec("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function $x(){let{router:e}=Tx("useNavigate"),t=Ec("useNavigate"),r=g.useRef(!1);return mf(()=>{r.current=!0}),g.useCallback(async(a,i={})=>{Pt(r.current,hf),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var lu={};function pf(e,t,r){!t&&!lu[e]&&(lu[e]=!0,Pt(!1,r))}g.memo(Lx);function Lx({routes:e,future:t,state:r,unstable_onError:n}){return ff(e,void 0,r,n,t)}function Ie(e){le(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dx({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){le(!Bn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof r=="string"&&(r=$s(r));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:m="default"}=r,p=g.useMemo(()=>{let w=Wt(c,o);return w==null?null:{location:{pathname:w,search:d,hash:u,state:h,key:m},navigationType:n}},[o,c,d,u,h,m,n]);return Pt(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:g.createElement(Ot.Provider,{value:l},g.createElement(zn.Provider,{children:t,value:p}))}function Mx({children:e,location:t}){return Nx(pl(e),t)}function pl(e,t=[]){let r=[];return g.Children.forEach(e,(n,a)=>{if(!g.isValidElement(n))return;let i=[...t,a];if(n.type===g.Fragment){r.push.apply(r,pl(n.props.children,i));return}le(n.type===Ie,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),le(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=pl(n.props.children,i)),r.push(o)}),r}var Pa="get",Ta="application/x-www-form-urlencoded";function ki(e){return e!=null&&typeof e.tagName=="string"}function Fx(e){return ki(e)&&e.tagName.toLowerCase()==="button"}function Ux(e){return ki(e)&&e.tagName.toLowerCase()==="form"}function zx(e){return ki(e)&&e.tagName.toLowerCase()==="input"}function Bx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function qx(e,t){return e.button===0&&(!t||t==="_self")&&!Bx(e)}var ha=null;function Wx(){if(ha===null)try{new FormData(document.createElement("form"),0),ha=!1}catch{ha=!0}return ha}var Hx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mo(e){return e!=null&&!Hx.has(e)?(Pt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ta}"`),null):e}function Vx(e,t){let r,n,a,i,o;if(Ux(e)){let l=e.getAttribute("action");n=l?Wt(l,t):null,r=e.getAttribute("method")||Pa,a=mo(e.getAttribute("enctype"))||Ta,i=new FormData(e)}else if(Fx(e)||zx(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?Wt(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||Pa,a=mo(e.getAttribute("formenctype"))||mo(l.getAttribute("enctype"))||Ta,i=new FormData(l,e),!Wx()){let{name:d,type:u,value:h}=e;if(u==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,h)}}else{if(ki(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Pa,n=null,a=Ta,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Pc(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gx(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Wt(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Kx(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qx(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Jx(e,t,r){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let o=await Kx(i,r);return o.links?o.links():[]}return[]}));return ey(n.flat(1).filter(Qx).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function cu(e,t,r,n,a,i){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>{var u;return r[d].pathname!==c.pathname||((u=r[d].route.path)==null?void 0:u.endsWith("*"))&&r[d].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{var h;let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Yx(e,t,{includeHydrateFallback:r}={}){return Zx(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function Zx(e){return[...new Set(e)]}function Xx(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function ey(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(Xx(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function gf(){let e=g.useContext(Ls);return Pc(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ty(){let e=g.useContext(Ni);return Pc(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Tc=g.createContext(void 0);Tc.displayName="FrameworkContext";function xf(){let e=g.useContext(Tc);return Pc(e,"You must render this element inside a <HydratedRouter> element"),e}function ry(e,t){let r=g.useContext(Tc),[n,a]=g.useState(!1),[i,o]=g.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,m=g.useRef(null);g.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let b=x=>{x.forEach(y=>{o(y.isIntersecting)})},j=new IntersectionObserver(b,{threshold:.5});return m.current&&j.observe(m.current),()=>{j.disconnect()}}},[e]),g.useEffect(()=>{if(n){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[n]);let p=()=>{a(!0)},w=()=>{a(!1),o(!1)};return r?e!=="intent"?[i,m,{}]:[i,m,{onFocus:Js(l,p),onBlur:Js(c,w),onMouseEnter:Js(d,p),onMouseLeave:Js(u,w),onTouchStart:Js(h,p)}]:[!1,m,{}]}function Js(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function sy({page:e,...t}){let{router:r}=gf(),n=g.useMemo(()=>nf(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?g.createElement(ay,{page:e,matches:n,...t}):null}function ny(e){let{manifest:t,routeModules:r}=xf(),[n,a]=g.useState([]);return g.useEffect(()=>{let i=!1;return Jx(e,t,r).then(o=>{i||a(o)}),()=>{i=!0}},[e,t,r]),n}function ay({page:e,matches:t,...r}){let n=Vr(),{manifest:a,routeModules:i}=xf(),{basename:o}=gf(),{loaderData:l,matches:c}=ty(),d=g.useMemo(()=>cu(e,t,c,a,n,"data"),[e,t,c,a,n]),u=g.useMemo(()=>cu(e,t,c,a,n,"assets"),[e,t,c,a,n]),h=g.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let w=new Set,b=!1;if(t.forEach(x=>{var f;let y=a.routes[x.route.id];!y||!y.hasLoader||(!d.some(v=>v.route.id===x.route.id)&&x.route.id in l&&((f=i[x.route.id])!=null&&f.shouldRevalidate)||y.hasClientLoader?b=!0:w.add(x.route.id))}),w.size===0)return[];let j=Gx(e,o,"data");return b&&w.size>0&&j.searchParams.set("_routes",t.filter(x=>w.has(x.route.id)).map(x=>x.route.id).join(",")),[j.pathname+j.search]},[o,l,n,a,d,t,e,i]),m=g.useMemo(()=>Yx(u,a),[u,a]),p=ny(u);return g.createElement(g.Fragment,null,h.map(w=>g.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),m.map(w=>g.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),p.map(({key:w,link:b})=>g.createElement("link",{key:w,nonce:r.nonce,...b})))}function iy(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var yf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yf&&(window.__reactRouterVersion="7.8.2")}catch{}function oy({basename:e,children:t,window:r}){let n=g.useRef();n.current==null&&(n.current=Q0({window:r,v5Compat:!0}));let a=n.current,[i,o]=g.useState({action:a.action,location:a.location}),l=g.useCallback(c=>{g.startTransition(()=>o(c))},[o]);return g.useLayoutEffect(()=>a.listen(l),[a,l]),g.createElement(Dx,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var vf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wf=g.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,...m},p){let{basename:w}=g.useContext(Ot),b=typeof d=="string"&&vf.test(d),j,x=!1;if(typeof d=="string"&&b&&(j=d,yf))try{let C=new URL(window.location.href),P=d.startsWith("//")?new URL(C.protocol+d):new URL(d),D=Wt(P.pathname,w);P.origin===C.origin&&D!=null?d=D+P.search+P.hash:x=!0}catch{Pt(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=jx(d,{relative:a}),[f,v,k]=ry(n,m),N=uy(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:h});function _(C){t&&t(C),C.defaultPrevented||N(C)}let S=g.createElement("a",{...m,...k,href:j||y,onClick:x||i?t:_,ref:iy(p,v),target:c,"data-discover":!b&&r==="render"?"true":void 0});return f&&!b?g.createElement(g.Fragment,null,S,g.createElement(sy,{page:y})):S});wf.displayName="Link";var ly=g.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=qn(o,{relative:d.relative}),m=Vr(),p=g.useContext(Ni),{navigator:w,basename:b}=g.useContext(Ot),j=p!=null&&gy(h)&&l===!0,x=w.encodeLocation?w.encodeLocation(h).pathname:h.pathname,y=m.pathname,f=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(y=y.toLowerCase(),f=f?f.toLowerCase():null,x=x.toLowerCase()),f&&b&&(f=Wt(f,b)||f);const v=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let k=y===x||!a&&y.startsWith(x)&&y.charAt(v)==="/",N=f!=null&&(f===x||!a&&f.startsWith(x)&&f.charAt(x.length)==="/"),_={isActive:k,isPending:N,isTransitioning:j},S=k?t:void 0,C;typeof n=="function"?C=n(_):C=[n,k?"active":null,N?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(_):i;return g.createElement(wf,{...d,"aria-current":S,className:C,ref:u,style:P,to:o,viewTransition:l},typeof c=="function"?c(_):c)});ly.displayName="NavLink";var cy=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:i,method:o=Pa,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,...m},p)=>{let w=fy(),b=py(l,{relative:d}),j=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&vf.test(l),y=f=>{if(c&&c(f),f.defaultPrevented)return;f.preventDefault();let v=f.nativeEvent.submitter,k=(v==null?void 0:v.getAttribute("formmethod"))||o;w(v||f.currentTarget,{fetcherKey:t,method:k,navigate:r,replace:a,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return g.createElement("form",{ref:p,method:j,action:b,onSubmit:n?c:y,...m,"data-discover":!x&&e==="render"?"true":void 0})});cy.displayName="Form";function dy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bf(e){let t=g.useContext(Ls);return le(t,dy(e)),t}function uy(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:o}={}){let l=Ds(),c=Vr(),d=qn(e,{relative:i});return g.useCallback(u=>{if(qx(u,t)){u.preventDefault();let h=r!==void 0?r:Rn(c)===Rn(d);l(e,{replace:h,state:n,preventScrollReset:a,relative:i,viewTransition:o})}},[c,l,d,r,n,t,e,a,i,o])}var hy=0,my=()=>`__${String(++hy)}__`;function fy(){let{router:e}=bf("useSubmit"),{basename:t}=g.useContext(Ot),r=Ax();return g.useCallback(async(n,a={})=>{let{action:i,method:o,encType:l,formData:c,body:d}=Vx(n,t);if(a.navigate===!1){let u=a.fetcherKey||my();await e.fetch(u,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function py(e,{relative:t}={}){let{basename:r}=g.useContext(Ot),n=g.useContext(Kt);le(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...qn(e||".",{relative:t})},o=Vr();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Ft([r,i.pathname])),Rn(i)}function gy(e,{relative:t}={}){let r=g.useContext(uf);le(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=bf("useViewTransitionState"),a=qn(e,{relative:t});if(!r.isTransitioning)return!1;let i=Wt(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Wt(r.nextLocation.pathname,n)||r.nextLocation.pathname;return ti(a.pathname,o)!=null||ti(a.pathname,i)!=null}const jf=g.createContext(void 0),Oc=()=>{const e=g.useContext(jf);if(!e)throw new Error("useCart must be used within a CartProvider");return e},xy=({children:e})=>{const[t,r]=g.useState([]),d={items:t,addToCart:u=>{r(h=>h.find(p=>p.id===u.id)?h:[...h,{...u,quantity:1,selectedApparelTypeId:void 0,customWidth:void 0,customHeight:void 0}])},updateCartItem:(u,h)=>{r(m=>m.map(p=>p.id===u?{...p,...h}:p))},removeFromCart:u=>{r(h=>h.filter(m=>m.id!==u))},clearCart:()=>{r([])},getTotalItems:()=>t.reduce((u,h)=>u+h.quantity,0),getTotalPrice:()=>t.reduce((u,h)=>{const m=parseFloat(h.price.replace("$",""));return u+m*h.quantity},0)};return s.jsx(jf.Provider,{value:d,children:e})},yy="modulepreload",vy=function(e){return"/"+e},du={},Qt=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=vy(c),c in du)return;du[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":yy,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},wy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Qt(async()=>{const{default:n}=await Promise.resolve().then(()=>Ms);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Ic extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class by extends Ic{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class uu extends Ic{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class hu extends Ic{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var gl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(gl||(gl={}));var jy=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class _y{constructor(t,{headers:r={},customFetch:n,region:a=gl.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=wy(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return jy(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(b=>{throw new by(b)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new uu(h);if(!h.ok)throw new hu(h);let p=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),w;return p==="application/json"?w=yield h.json():p==="application/octet-stream"?w=yield h.blob():p==="text/event-stream"?w=h:p==="multipart/form-data"?w=yield h.formData():w=yield h.text(),{data:w,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof hu||a instanceof uu?a.context:void 0}}})}}var We={},Ac={},Si={},Wn={},Ci={},Ei={},Ny=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ps=Ny();const ky=Ps.fetch,_f=Ps.fetch.bind(Ps),Nf=Ps.Headers,Sy=Ps.Request,Cy=Ps.Response,Ms=Object.freeze(Object.defineProperty({__proto__:null,Headers:Nf,Request:Sy,Response:Cy,default:_f,fetch:ky},Symbol.toStringTag,{value:"Module"})),Ey=jp(Ms);var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});let Py=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Pi.default=Py;var kf=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ei,"__esModule",{value:!0});const Ty=kf(Ey),Oy=kf(Pi);let Iy=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Ty.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,d;let u=null,h=null,m=null,p=i.status,w=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const j=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");j&&x&&x.length>1&&(m=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,p=406,w="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const j=await i.text();try{u=JSON.parse(j),Array.isArray(u)&&i.status===404&&(h=[],u=null,p=200,w="OK")}catch{i.status===404&&j===""?(p=204,w="No Content"):u={message:j}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,p=200,w="OK"),u&&this.shouldThrowOnError)throw new Oy.default(u)}return{error:u,data:h,count:m,status:p,statusText:w}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Ei.default=Iy;var Ay=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ci,"__esModule",{value:!0});const Ry=Ay(Ei);let $y=class extends Ry.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Ci.default=$y;var Ly=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wn,"__esModule",{value:!0});const Dy=Ly(Ci);let My=class extends Dy.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Wn.default=My;var Fy=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Si,"__esModule",{value:!0});const Ys=Fy(Wn);let Uy=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Ys.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var a;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ys.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Ys.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Ys.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ys.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Si.default=Uy;var Sf=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ac,"__esModule",{value:!0});const zy=Sf(Si),By=Sf(Wn);let qy=class Cf{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new zy.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Cf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",d=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new By.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Ac.default=qy;var Fs=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(We,"__esModule",{value:!0});We.PostgrestError=We.PostgrestBuilder=We.PostgrestTransformBuilder=We.PostgrestFilterBuilder=We.PostgrestQueryBuilder=We.PostgrestClient=void 0;const Ef=Fs(Ac);We.PostgrestClient=Ef.default;const Pf=Fs(Si);We.PostgrestQueryBuilder=Pf.default;const Tf=Fs(Wn);We.PostgrestFilterBuilder=Tf.default;const Of=Fs(Ci);We.PostgrestTransformBuilder=Of.default;const If=Fs(Ei);We.PostgrestBuilder=If.default;const Af=Fs(Pi);We.PostgrestError=Af.default;var Wy=We.default={PostgrestClient:Ef.default,PostgrestQueryBuilder:Pf.default,PostgrestFilterBuilder:Tf.default,PostgrestTransformBuilder:Of.default,PostgrestBuilder:If.default,PostgrestError:Af.default};const{PostgrestClient:Hy,PostgrestQueryBuilder:Hj,PostgrestFilterBuilder:Vj,PostgrestTransformBuilder:Gj,PostgrestBuilder:Kj,PostgrestError:Qj}=Wy;class Vy{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Gy="2.15.5",Ky=`realtime-js/${Gy}`,Qy="1.0.0",xl=1e4,Jy=1e3,Yy=100;var mn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(mn||(mn={}));var xe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(xe||(xe={}));var xt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(xt||(xt={}));var yl;(function(e){e.websocket="websocket"})(yl||(yl={}));var Or;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Or||(Or={}));class Zy{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Rf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ee;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ee||(ee={}));const mu=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=Xy(o,e,t,a),i),{})},Xy=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?$f(i,o):vl(o)},$f=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return sv(t,r)}switch(e){case ee.bool:return ev(t);case ee.float4:case ee.float8:case ee.int2:case ee.int4:case ee.int8:case ee.numeric:case ee.oid:return tv(t);case ee.json:case ee.jsonb:return rv(t);case ee.timestamp:return nv(t);case ee.abstime:case ee.date:case ee.daterange:case ee.int4range:case ee.int8range:case ee.money:case ee.reltime:case ee.text:case ee.time:case ee.timestamptz:case ee.timetz:case ee.tsrange:case ee.tstzrange:return vl(t);default:return vl(t)}},vl=e=>e,ev=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},tv=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},rv=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},sv=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>$f(t,l))}return e},nv=e=>typeof e=="string"?e.replace(" ","T"):e,Lf=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class fo{constructor(t,r,n={},a=xl){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var fu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(fu||(fu={}));class fn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fn.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=fn.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=fn.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const m=u.map(j=>j.presence_ref),p=h.map(j=>j.presence_ref),w=u.filter(j=>p.indexOf(j.presence_ref)<0),b=h.filter(j=>m.indexOf(j.presence_ref)<0);w.length>0&&(l[d]=w),b.length>0&&(c[d]=b)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(p=>p.presence_ref),m=u.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...m)}n(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(pu||(pu={}));var pn;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(pn||(pn={}));var Rt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Rt||(Rt={}));class Rc{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new fo(this,xt.join,this.params,this.timeout),this.rejoinTimer=new Rf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xe.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new fn(this),this.broadcastEndpointURL=Lf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==xe.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[pn.PRESENCE]&&this.bindings[pn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Rt.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Rt.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var w;if(this.socket.setAuth(),p===void 0){t==null||t(Rt.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,j=(w=b==null?void 0:b.length)!==null&&w!==void 0?w:0,x=[];for(let y=0;y<j;y++){const f=b[y],{filter:{event:v,schema:k,table:N,filter:_}}=f,S=p&&p[y];if(S&&S.event===v&&S.schema===k&&S.table===N&&S.filter===_)x.push(Object.assign(Object.assign({},f),{id:S.id}));else{this.unsubscribe(),this.state=xe.errored,t==null||t(Rt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Rt.SUBSCRIBED);return}}).receive("error",p=>{this.state=xe.errored,t==null||t(Rt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Rt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===xe.joined&&t===pn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=xe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new fo(this,xt.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xe.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new fo(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Yy){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=xt;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var w,b,j;return((w=p.filter)===null||w===void 0?void 0:w.event)==="*"||((j=(b=p.filter)===null||b===void 0?void 0:b.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(p=>p.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var w,b,j,x,y,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const v=p.id,k=(w=p.filter)===null||w===void 0?void 0:w.event;return v&&((b=r.ids)===null||b===void 0?void 0:b.includes(v))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const v=(y=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return v==="*"||v===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const w=m.data,{schema:b,table:j,commit_timestamp:x,type:y,errors:f}=w;m=Object.assign(Object.assign({},{schema:b,table:j,commit_timestamp:x,eventType:y,new:{},old:{},errors:f}),this._getPayloadRecords(w))}p.callback(m,n)})}_isClosed(){return this.state===xe.closed}_isJoined(){return this.state===xe.joined}_isJoining(){return this.state===xe.joining}_isLeaving(){return this.state===xe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Rc.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(xt.close,{},t)}_onError(t){this._on(xt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=mu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=mu(t.columns,t.old_record)),r}}const po=()=>{},ma={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},av=[1e3,2e3,5e3,1e4],iv=1e4,ov=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class lv{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xl,this.transport=null,this.heartbeatIntervalMs=ma.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=po,this.ref=0,this.reconnectTimer=null,this.logger=po,this.conn=null,this.sendBuffer=[],this.serializer=new Zy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>Qt(async()=>{const{default:l}=await Promise.resolve().then(()=>Ms);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${yl.websocket}`,this.httpEndpoint=Lf(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Vy.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Qy}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case mn.connecting:return Or.Connecting;case mn.open:return Or.Open;case mn.closing:return Or.Closing;default:return Or.Closed}}isConnected(){return this.connectionState()===Or.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Rc(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Jy,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ma.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(xt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([ov],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:Ky};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(xt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Rf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ma.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,d,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:xl,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:ma.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:po,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>av[h-1]||iv,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(h,m)=>m(JSON.stringify(h)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class $c extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ye(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class cv extends $c{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wl extends $c{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var dv=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const Df=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Qt(async()=>{const{default:n}=await Promise.resolve().then(()=>Ms);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},uv=()=>dv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Qt(()=>Promise.resolve().then(()=>Ms),void 0)).Response:Response}),bl=e=>{if(Array.isArray(e))return e.map(r=>bl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=bl(n)}),t},hv=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Gr=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const go=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),mv=(e,t,r)=>Gr(void 0,void 0,void 0,function*(){const n=yield uv();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new cv(go(a),i,o))}).catch(a=>{t(new wl(go(a),a))}):t(new wl(go(e),e))}),fv=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(hv(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Hn(e,t,r,n,a,i){return Gr(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,fv(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>mv(c,l,n))})})}function ri(e,t,r,n){return Gr(this,void 0,void 0,function*(){return Hn(e,"GET",t,r,n)})}function Nt(e,t,r,n,a){return Gr(this,void 0,void 0,function*(){return Hn(e,"POST",t,n,a,r)})}function jl(e,t,r,n,a){return Gr(this,void 0,void 0,function*(){return Hn(e,"PUT",t,n,a,r)})}function pv(e,t,r,n){return Gr(this,void 0,void 0,function*(){return Hn(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Mf(e,t,r,n,a){return Gr(this,void 0,void 0,function*(){return Hn(e,"DELETE",t,n,a,r)})}var De=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const gv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xv{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Df(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return De(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},gu),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield(t=="PUT"?jl:Nt)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ye(i))return{data:null,error:i};throw i}})}upload(t,r,n){return De(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return De(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:gu.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield jl(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ye(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return De(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Nt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new $c("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}})}update(t,r,n){return De(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return De(this,void 0,void 0,function*(){try{return{data:yield Nt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ye(a))return{data:null,error:a};throw a}})}copy(t,r,n){return De(this,void 0,void 0,function*(){try{return{data:{path:(yield Nt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ye(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return De(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Nt(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ye(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return De(this,void 0,void 0,function*(){try{const a=yield Nt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ye(a))return{data:null,error:a};throw a}})}download(t,r){return De(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield ri(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ye(l))return{data:null,error:l};throw l}})}info(t){return De(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ri(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:bl(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}})}exists(t){return De(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield pv(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ye(n)&&n instanceof wl){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return De(this,void 0,void 0,function*(){try{return{data:yield Mf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}})}list(t,r,n){return De(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},gv),r),{prefix:t||""});return{data:yield Nt(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ye(a))return{data:null,error:a};throw a}})}listV2(t,r){return De(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Nt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const yv="2.12.1",vv={"X-Client-Info":`storage-js/${yv}`};var Jr=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class wv{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},vv),r),this.fetch=Df(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Jr(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ye(t))return{data:null,error:t};throw t}})}getBucket(t){return Jr(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Jr(this,void 0,void 0,function*(){try{return{data:yield Nt(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Jr(this,void 0,void 0,function*(){try{return{data:yield jl(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Jr(this,void 0,void 0,function*(){try{return{data:yield Nt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Jr(this,void 0,void 0,function*(){try{return{data:yield Mf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}})}}class bv extends wv{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new xv(this.url,this.headers,t,this.fetch)}}const jv="2.57.4";let rn="";typeof Deno<"u"?rn="deno":typeof document<"u"?rn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rn="react-native":rn="node";const _v={"X-Client-Info":`supabase-js-${rn}/${jv}`},Nv={headers:_v},kv={schema:"public"},Sv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Cv={};var Ev=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const Pv=e=>{let t;return e?t=e:typeof fetch>"u"?t=_f:t=fetch,(...r)=>t(...r)},Tv=()=>typeof Headers>"u"?Nf:Headers,Ov=(e,t,r)=>{const n=Pv(r),a=Tv();return(i,o)=>Ev(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var Iv=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};function Av(e){return e.endsWith("/")?e:e+"/"}function Rv(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:h}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Iv(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function $v(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Av(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ff="2.71.1",rs=30*1e3,_l=3,xo=_l*rs,Lv="http://localhost:9999",Dv="supabase.auth.token",Mv={"X-Client-Info":`gotrue-js/${Ff}`},Nl="X-Supabase-Api-Version",Uf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Fv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Uv=10*60*1e3;class Lc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function G(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class zv extends Lc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Bv(e){return G(e)&&e.name==="AuthApiError"}class zf extends Lc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class kr extends Lc{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class rr extends kr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function qv(e){return G(e)&&e.name==="AuthSessionMissingError"}class fa extends kr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pa extends kr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ga extends kr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Wv(e){return G(e)&&e.name==="AuthImplicitGrantRedirectError"}class xu extends kr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kl extends kr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function yo(e){return G(e)&&e.name==="AuthRetryableFetchError"}class yu extends kr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Sl extends kr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const si="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vu=` 	
\r=`.split(""),Hv=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<vu.length;t+=1)e[vu[t].charCodeAt(0)]=-2;for(let t=0;t<si.length;t+=1)e[si[t].charCodeAt(0)]=t;return e})();function wu(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(si[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(si[n]),t.queuedBits-=6}}function Bf(e,t,r){const n=Hv[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function bu(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{Kv(o,n,r)};for(let o=0;o<e.length;o+=1)Bf(e.charCodeAt(o),a,i);return t.join("")}function Vv(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Gv(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Vv(n,t)}}function Kv(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Qv(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Bf(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Jv(e){const t=[];return Gv(e,r=>t.push(r)),new Uint8Array(t)}function Yv(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>wu(a,r,n)),wu(null,r,n),t.join("")}function Zv(e){return Math.round(Date.now()/1e3)+e}function Xv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ft=()=>typeof window<"u"&&typeof document<"u",Sr={tested:!1,writable:!1},qf=()=>{if(!ft())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Sr.tested)return Sr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Sr.tested=!0,Sr.writable=!0}catch{Sr.tested=!0,Sr.writable=!1}return Sr.writable};function ew(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const Wf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Qt(async()=>{const{default:n}=await Promise.resolve().then(()=>Ms);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},tw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ss=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Cr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},tr=async(e,t)=>{await e.removeItem(t)};class Ti{constructor(){this.promise=new Ti.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Ti.promiseConstructor=Promise;function vo(e){const t=e.split(".");if(t.length!==3)throw new Sl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Fv.test(t[n]))throw new Sl("JWT not in base64url format");return{header:JSON.parse(bu(t[0])),payload:JSON.parse(bu(t[1])),signature:Qv(t[2]),raw:{header:t[0],payload:t[1]}}}async function rw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function sw(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function nw(e){return("0"+e.toString(16)).substr(-2)}function aw(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,nw).join("")}async function iw(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function ow(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await iw(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yr(e,t,r=!1){const n=aw();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await ss(e,`${t}-code-verifier`,a);const i=await ow(n);return[i,n===i?"plain":"s256"]}const lw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cw(e){const t=e.headers.get(Nl);if(!t||!t.match(lw))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function dw(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function uw(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zr(e){if(!hw.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wo(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ju(e){return JSON.parse(JSON.stringify(e))}var mw=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Tr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),fw=[502,503,504];async function _u(e){var t;if(!tw(e))throw new kl(Tr(e),0);if(fw.includes(e.status))throw new kl(Tr(e),e.status);let r;try{r=await e.json()}catch(i){throw new zf(Tr(i),i)}let n;const a=cw(e);if(a&&a.getTime()>=Uf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new yu(Tr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new rr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new yu(Tr(r),e.status,r.weak_password.reasons);throw new zv(Tr(r),e.status||500,n)}const pw=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function K(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[Nl]||(i[Nl]=Uf["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await gw(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function gw(e,t,r,n,a,i){const o=pw(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new kl(Tr(c),0)}if(l.ok||await _u(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await _u(c)}}function It(e){var t;let r=null;ww(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Zv(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Nu(e){const t=It(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function or(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function xw(e){return{data:e,error:null}}function yw(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=mw(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function vw(e){return e}function ww(e){return e.access_token&&e.refresh_token&&e.expires_in}const bo=["global","local","others"];var bw=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class jw{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Wf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=bo[0]){if(bo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bo.join(", ")}`);try{return await K(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await K(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:or})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=bw(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await K(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:yw,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(G(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await K(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:or})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await K(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:vw});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(w=>{const b=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(w.split(";")[1].split("=")[1]);d[`${j}Page`]=b}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(G(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Zr(t);try{return await K(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:or})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Zr(t);try{return await K(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:or})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Zr(t);try{return await K(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:or})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Zr(t.userId);try{const{data:r,error:n}=await K(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(G(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Zr(t.userId),Zr(t.id);try{return{data:await K(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}}function ku(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function _w(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xr={debug:!!(globalThis&&qf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Nw extends Hf{}async function kw(e,t,r){Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Nw(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}_w();const Sw={url:Lv,storageKey:Dv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Mv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Su(e,t,r){return await r()}const es={};class $n{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$n.nextInstanceID,$n.nextInstanceID+=1,this.instanceID>0&&ft()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Sw),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new jw({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Wf(a.fetch),this.lock=a.lock||Su,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ft()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=kw:this.lock=Su,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:qf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ku(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=ku(this.memoryStorage)),ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=es[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){es[this.storageKey]=Object.assign(Object.assign({},es[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=es[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){es[this.storageKey]=Object.assign(Object.assign({},es[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ff}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=ew(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ft()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Wv(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return G(r)?{error:r}:{error:new zf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:It}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(G(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:u,password:h,options:m}=t;let p=null,w=null;this.flowType==="pkce"&&([p,w]=await Yr(this.storage,this.storageKey)),i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:w},xform:It})}else if("phone"in t){const{phone:u,password:h,options:m}=t;i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:It})}else throw new pa("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(G(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Nu})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Nu})}else throw new pa("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new fa}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,i,o,l,c,d,u,h,m,p;let w,b;if("message"in t)w=t.message,b=t.signature;else{const{chain:j,wallet:x,statement:y,options:f}=t;let v;if(ft())if(typeof x=="object")v=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))v=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=x}const k=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in v&&v.signIn){const N=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),y?{statement:y}:null));let _;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")_=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)_=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)w=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),b=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${k.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(n=f==null?void 0:f.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((d=f==null?void 0:f.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((h=(u=f==null?void 0:f.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...f.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const N=await v.signMessage(new TextEncoder().encode(w),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=N}}try{const{data:j,error:x}=await K(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Yv(b)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:It});if(x)throw x;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new fa}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:x})}catch(j){if(G(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(t){const r=await Cr(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await K(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:It});if(await tr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(G(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await K(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:It}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new fa}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Yr(this.storage,this.storageKey));const{error:h}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new pa("You must provide either an email or phone number.")}catch(l){if(G(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await K(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:It});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(G(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Yr(this.storage,this.storageKey)),await K(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:xw})}catch(i){if(G(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new rr;const{error:a}=await K(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await K(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await K(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new pa("You must provide either an email or phone number and a type")}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Cr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<xo:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Cr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=wo()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:or}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rr}:await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:or})})}catch(r){if(G(r))return qv(r)&&(await this._removeSession(),await tr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new rr;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Yr(this.storage,this.storageKey));const{data:d,error:u}=await K(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:or});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new rr;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=vo(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(G(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new rr;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ft())throw new ga("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ga(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new xu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ga("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new xu("No code detected.");const{data:y,error:f}=await this._exchangeCodeForSession(t.code);if(f)throw f;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new ga("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;c&&(m=parseInt(c));const p=m-u;p*1e3<=rs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const w=m-h;u-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,m,u):u-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,m,u);const{data:b,error:j}=await this._getUser(i);if(j)throw j;const x={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(G(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Cr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Bv(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await tr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Xv(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Yr(this.storage,this.storageKey,!0));try{return await K(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(G(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await K(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return ft()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(G(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await K(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await sw(async a=>(a>0&&await rw(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await K(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:It})),(a,i)=>{const o=200*Math.pow(2,a);return i&&yo(i)&&Date.now()+o-n<rs})}catch(n){if(this._debug(r,"error",n),G(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ft()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Cr(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Cr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await ss(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:wo()}else if(a&&!a.user&&!a.user){const o=await Cr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await tr(this.storage,this.storageKey+"-user"),await ss(this.storage,this.storageKey,a)):a.user=wo()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xo;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${xo}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),yo(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new rr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ti;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new rr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),G(i)){const o={session:null,error:i};return yo(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ss(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=ju(a);await ss(this.storage,this.storageKey,i)}else{const a=ju(r);await ss(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await tr(this.storage,this.storageKey),await tr(this.storage,this.storageKey+"-code-verifier"),await tr(this.storage,this.storageKey+"-user"),this.userStorage&&await tr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ft()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),rs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/rs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${rs}ms, refresh threshold is ${_l} ticks`),a<=_l&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Hf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ft()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Yr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await K(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await K(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await K(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(G(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await K(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(G(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=vo(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+Uv>a)return n;const{data:i,error:o}=await K(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:w}=await this.getSession();if(w||!p.session)return{data:null,error:w};n=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=vo(n);r!=null&&r.allowExpired||dw(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const u=uw(a.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Jv(`${l}.${c}`)))throw new Sl("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}}}$n.nextInstanceID=0;const Cw=$n;class Ew extends Cw{constructor(t){super(t)}}var Pw=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class Tw{constructor(t,r,n){var a,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=$v(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:kv,realtime:Cv,auth:Object.assign(Object.assign({},Sv),{storageKey:c}),global:Nv},u=Rv(n??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Ov(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Hy(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new bv(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new _y(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Pw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:d},u,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ew({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),u),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new lv(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ow=(e,t,r)=>new Tw(e,t,r);function Iw(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Iw()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Aw="https://iutxllhudjckcaiwabud.supabase.co",Rw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml1dHhsbGh1ZGpja2NhaXdhYnVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxODUwMTAsImV4cCI6MjA3Mzc2MTAxMH0.B7caM5jpTbxINeE_x6xYAAjNTN_25UjmfHHosy9PUFI",A=Ow(Aw,Rw),Vf=async(e,t)=>{const{data:r,error:n}=await A.auth.signUp({email:e,password:t});if(n)throw n;return r},Dc=async()=>{const{error:e}=await A.auth.signOut();if(e)throw e},fe=async()=>{const{data:{user:e}}=await A.auth.getUser();return e},$e=async e=>{const{data:t,error:r}=await A.from("employees").select("*").eq("id",e).maybeSingle();if(t)return{...t,role:t.role};const{data:n,error:a}=await A.from("customers").select("*").eq("id",e).maybeSingle();return n?{...n,role:"customer"}:null},$w=async e=>{const{data:t,error:r}=await A.from("customers").insert([e]).select().single();if(r)throw r;try{const{notifyAdminsAboutNewCustomer:n}=await Qt(async()=>{const{notifyAdminsAboutNewCustomer:a}=await Promise.resolve().then(()=>zc);return{notifyAdminsAboutNewCustomer:a}},void 0);await n(e.full_name)}catch(n){console.error("Error creating customer signup notifications:",n)}return t},Lw=async e=>{const{data:t,error:r}=await A.from("employees").insert([{...e,status:"disabled"}]).select().single();if(r)throw r;try{const{notifyAdminsAboutNewEmployee:n}=await Qt(async()=>{const{notifyAdminsAboutNewEmployee:a}=await Promise.resolve().then(()=>zc);return{notifyAdminsAboutNewEmployee:a}},void 0);await n(e.full_name,e.role)}catch(n){console.error("Error creating employee signup notifications:",n)}return t},Dw=async(e,t)=>{const{data:r,error:n}=await A.auth.signInWithPassword({email:e,password:t});if(n)throw n;if(r.user){const a=await $e(r.user.id);if(a&&"status"in a&&a.status==="disabled")throw await A.auth.signOut(),new Error("Your account is currently inactive and will be activated by an administrator after review.")}return r},ni=e=>{switch(e){case"admin":return"/admin";case"sales_rep":return"/sales/dashboard";case"designer":return"/designer/dashboard";case"customer":return"/customer/dashboard";default:return null}},Gf=async e=>{let t=A.from("products").select(`
      *,
      apparel_type:apparel_types(type_name)
    `).eq("status","active");switch(e!=null&&e.apparelType&&e.apparelType!=="All"&&(t=t.eq("apparel_type_id",e.apparelType)),e!=null&&e.search&&(t=t.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e==null?void 0:e.sortBy){case"price-low":t=t.order("price",{ascending:!0});break;case"price-high":t=t.order("price",{ascending:!1});break;case"title":t=t.order("title",{ascending:!0});break;default:t=t.order("created_at",{ascending:!1})}e!=null&&e.limit&&(t=t.limit(e.limit)),e!=null&&e.offset&&(t=t.range(e.offset,e.offset+(e.limit||10)-1));const{data:r,error:n}=await t;return n?(console.error("Error fetching products:",n),[]):r},Oi=async()=>{const{data:e,error:t}=await A.from("apparel_types").select("id, type_name").order("type_name");return t?(console.error("Error fetching apparel types:",t),[]):e||[]},Kf=g.createContext(void 0),Qf=()=>{const e=g.useContext(Kf);if(!e)throw new Error("useOrders must be used within an OrderProvider");return e},Mw=({children:e})=>{const[t,r]=g.useState([]),n=async(d,u)=>{try{const h=await fe();if(!h)return;const m=await $e(h.id);if(!m)return;const{data:p,error:w}=await A.from("customers").select("assigned_sales_rep_id").eq("id",m.id).single();if(w)throw console.error("Error fetching customer profile:",w),new Error("Failed to fetch customer information");const{data:b,error:j}=await A.from("orders").insert({customer_id:m.id,order_type:d.order_type,product_id:d.product_id||null,custom_description:d.custom_description,apparel_type_id:d.apparel_type_id||null,custom_width:d.custom_width||null,custom_height:d.custom_height||null,file_urls:null,assigned_sales_rep_id:p.assigned_sales_rep_id,total_amount:d.total_amount,payment_status:"unpaid",status:"new"}).select().single();if(j)throw j;try{const{notifyAboutNewOrder:x}=await Qt(async()=>{const{notifyAboutNewOrder:f}=await Promise.resolve().then(()=>zc);return{notifyAboutNewOrder:f}},void 0),y=b.order_number||`ORD-${b.id.slice(0,8)}`;await x(m.id,m.full_name,y,d.order_type,p.assigned_sales_rep_id)}catch(x){console.error("Error creating order notifications:",x)}return await a(),b}catch(h){throw console.error("Error adding order:",h),h}},a=async()=>{try{const d=await fe();if(!d)return;const u=await $e(d.id);if(!u)return;const h=["*","customer:customers(id, full_name, email, phone, company_name)","apparel_type:apparel_types(type_name)"];u.role!=="customer"&&h.push("sales_rep:employees!orders_assigned_sales_rep_id_fkey(id, full_name)","designer:employees!orders_assigned_designer_id_fkey(id, full_name)");let m=A.from("orders").select(h.join(", "));switch(u.role){case"customer":m=m.eq("customer_id",u.id);break;case"sales_rep":m=m.eq("assigned_sales_rep_id",u.id);break;case"designer":m=m.eq("assigned_designer_id",u.id);break}const{data:p,error:w}=await m.order("created_at",{ascending:!1});if(w)throw w;const b=(p||[]).map(j=>{var x,y,f,v,k,N,_;return{id:j.id,order_number:j.order_number||`ORD-${j.id.slice(0,8)}`,customer_name:((x=j.customer)==null?void 0:x.full_name)||"Unknown",customer_email:((y=j.customer)==null?void 0:y.email)||"",customer_phone:((f=j.customer)==null?void 0:f.phone)||"",customer_company_name:((v=j.customer)==null?void 0:v.company_name)||"",customerId:j.customer_id,order_type:j.order_type||"custom",file_urls:j.file_urls||(j.file_url?[j.file_url]:null),status:j.status,payment_status:j.payment_status||"unpaid",total_amount:j.total_amount||0,created_at:j.created_at,updated_at:j.updated_at,custom_description:j.custom_description,apparel_type_id:j.apparel_type_id,apparel_type_name:(k=j.apparel_type)==null?void 0:k.type_name,custom_width:j.custom_width,custom_height:j.custom_height,assigned_sales_rep_id:j.assigned_sales_rep_id,assigned_designer_id:j.assigned_designer_id,assigned_sales_rep_name:(N=j.sales_rep)==null?void 0:N.full_name,assigned_designer_name:(_=j.designer)==null?void 0:_.full_name}});r(b)}catch(d){console.error("Error fetching orders:",d)}};ue.useEffect(()=>{a()},[]);const c={orders:t,addOrder:n,updateOrderStatus:(d,u)=>{A.from("orders").update({status:u}).eq("id",d).then(()=>a())},assignDesigner:(d,u)=>{A.from("orders").update({assigned_designer_id:u,status:"in_progress"}).eq("id",d).then(()=>a())},getOrdersByRole:()=>t,fetchOrders:a};return s.jsx(Kf.Provider,{value:c,children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),U=(e,t)=>{const r=g.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>g.createElement("svg",{ref:u,...Fw,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Uw(e)}`,l].join(" "),...d},[...t.map(([h,m])=>g.createElement(h,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=U("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=U("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=U("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=U("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=U("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=U("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=U("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=U("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=U("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=U("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=U("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=U("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=U("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=U("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=U("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=U("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=U("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=U("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=U("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=U("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=U("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=U("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=U("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=U("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=U("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=U("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=U("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=U("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=U("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=U("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=U("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=U("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=U("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=U("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=U("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=U("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=U("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=U("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=U("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=U("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=U("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=U("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=U("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=U("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=U("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=U("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=U("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=U("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=U("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=U("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=U("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=U("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=U("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=U("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=U("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=U("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=U("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=U("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=U("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=U("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=U("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=U("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=U("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=U("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=U("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=U("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Au=()=>{const[e,t]=g.useState(!1),r=Ds(),{items:n,removeFromCart:a,getTotalItems:i,getTotalPrice:o,clearCart:l}=Oc(),c=i(),d=o(),u=async()=>{if(!await fe()){window.location.href="/login";return}t(!1),r("/checkout")};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>t(!e),className:"relative p-2 text-gray-600 hover:text-blue-600 transition-colors",children:[s.jsx(ai,{className:"h-6 w-6"}),c>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:c})]}),e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>t(!1)}),s.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Shopping Cart"}),s.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ue,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.length===0?s.jsxs("div",{className:"p-6 text-center text-gray-500",children:[s.jsx(ai,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"Your cart is empty"})]}):s.jsx("div",{className:"p-4 space-y-4",children:n.map(h=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("img",{src:h.image,alt:h.title,className:"w-12 h-12 object-cover rounded"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-800 truncate",children:h.title}),s.jsx("p",{className:"text-xs text-gray-500",children:h.apparelType}),s.jsx("p",{className:"text-sm font-semibold text-blue-600",children:h.price})]}),s.jsx("button",{onClick:()=>a(h.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:s.jsx(Vt,{className:"h-4 w-4"})})]},h.id))})}),n.length>0&&s.jsxs("div",{className:"border-t border-gray-200 p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Total:"}),s.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["$",d.toFixed(2)]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:u,className:"w-full btn-success",children:["Checkout (",c," items)"]}),s.jsx("button",{onClick:()=>{l(),t(!1)},className:"w-full btn-danger",children:"Clear Cart"})]})]})]})]})]})};async function $i(){try{const{data:e,error:t}=await A.from("employees").select("id, full_name").eq("role","admin").eq("status","active");if(t)throw t;return e||[]}catch(e){return console.error("Error fetching admins:",e),[]}}async function Uc(e,t,r){try{const{error:n}=await A.from("notifications").insert([{user_id:e,type:t,message:r}]);if(n)throw n}catch(n){console.error("Error creating notification:",n)}}async function Kn(e){try{const{error:t}=await A.from("notifications").insert(e.map(r=>({user_id:r.userId,type:r.type,message:r.message})));if(t)throw t}catch(t){console.error("Error creating batch notifications:",t)}}async function cb(e){try{const r=(await $i()).map(n=>({userId:n.id,type:"user",message:`New customer ${e} has signed up`}));await Kn(r)}catch(t){console.error("Error notifying admins about new customer:",t)}}async function db(e,t){try{const n=(await $i()).map(a=>({userId:a.id,type:"user",message:`New employee ${e} has signed up (${t.replace("_"," ")}) - pending approval`}));await Kn(n)}catch(r){console.error("Error notifying admins about new employee:",r)}}async function ub(e,t,r,n,a){try{const i=[{userId:e,type:"order",message:`Your ${n} order ${r} has been placed successfully!`}];(await $i()).forEach(l=>{i.push({userId:l.id,type:"order",message:`New ${n} order ${r} has been placed by ${t}`})}),a&&i.push({userId:a,type:"order",message:`New ${n} order ${r} has been placed by your assigned customer ${t}`}),await Kn(i)}catch(i){console.error("Error notifying about new order:",i)}}async function np(e,t,r,n,a,i){try{const o=[];r==="under_review"&&a&&o.push({userId:a,type:"order",message:`Order ${t} is now under review. Please check it.`}),r==="completed"&&o.push({userId:n,type:"order",message:`Your order ${t} has been completed!`}),o.length>0&&await Kn(o)}catch(o){console.error("Error notifying about order status change:",o)}}async function ap(e,t){try{await Uc(e,"order",`Order ${t} has been assigned to you.`)}catch(r){console.error("Error notifying designer about assignment:",r)}}async function ip(e,t){try{await Uc(e,"order",`A new invoice "${t}" has been generated for you. Please check your invoices section.`)}catch(r){console.error("Error notifying customer about invoice:",r)}}const zc=Object.freeze(Object.defineProperty({__proto__:null,createBatchNotifications:Kn,createNotification:Uc,getAllAdmins:$i,notifyAboutNewOrder:ub,notifyAboutOrderStatusChange:np,notifyAdminsAboutNewCustomer:cb,notifyAdminsAboutNewEmployee:db,notifyCustomerAboutInvoice:ip,notifyDesignerAboutAssignment:ap},Symbol.toStringTag,{value:"Module"})),Ru=async e=>{const t=new Date;t.setDate(1),t.setHours(0,0,0,0);try{const{data:r,error:n}=await A.from("customers").select("id").eq("assigned_sales_rep_id",e);if(n)throw n;const a=(r==null?void 0:r.map(d=>d.id))||[];if(a.length===0)return{totalOrdersThisMonth:0,newOrdersCount:0,inProgressOrdersCount:0,underReviewOrdersCount:0};const{count:i}=await A.from("orders").select("*",{count:"exact",head:!0}).in("customer_id",a).gte("created_at",t.toISOString()),{count:o}=await A.from("orders").select("*",{count:"exact",head:!0}).in("customer_id",a).eq("status","new"),{count:l}=await A.from("orders").select("*",{count:"exact",head:!0}).in("customer_id",a).eq("status","in_progress"),{count:c}=await A.from("orders").select("*",{count:"exact",head:!0}).in("customer_id",a).eq("status","under_review");return{totalOrdersThisMonth:i||0,newOrdersCount:o||0,inProgressOrdersCount:l||0,underReviewOrdersCount:c||0}}catch(r){return console.error("Error fetching sales rep stats:",r),{totalOrdersThisMonth:0,newOrdersCount:0,inProgressOrdersCount:0,underReviewOrdersCount:0}}},hb=async(e=10)=>{try{const{data:t,error:r}=await A.from("orders").select(`
        *,
        customer:customers!inner(full_name, email, phone, company_name),
        product:products(title),
        apparel_type:apparel_types(type_name),
        sales_rep:employees!orders_assigned_sales_rep_id_fkey(full_name),
        designer:employees!orders_assigned_designer_id_fkey(full_name)
      `).order("created_at",{ascending:!1}).limit(e);if(r)throw r;const n=(t||[]).map(i=>i.id);let a={};if(n.length>0)try{const{data:i}=await A.from("order_attachments").select("id, order_id").in("order_id",n).order("uploaded_at",{ascending:!0});i&&i.forEach(o=>{a[o.order_id]||(a[o.order_id]=o.id)})}catch(i){console.error("Error fetching attachments:",i)}return(t||[]).map(i=>{var o,l,c,d,u,h,m,p;return{id:i.id,order_number:i.order_number,order_type:i.order_type,total_amount:i.total_amount,payment_status:i.payment_status,customer_id:i.customer_id,customer_name:((o=i.customer)==null?void 0:o.full_name)||"Unknown",customer_email:((l=i.customer)==null?void 0:l.email)||"",customer_phone:((c=i.customer)==null?void 0:c.phone)||"",customer_company_name:((d=i.customer)==null?void 0:d.company_name)||"",product_id:i.product_id,product_title:(u=i.product)==null?void 0:u.title,custom_description:i.custom_description,file_urls:i.file_urls,first_attachment_id:a[i.id],apparel_type_id:i.apparel_type_id,apparel_type_name:(h=i.apparel_type)==null?void 0:h.type_name,custom_width:i.custom_width,custom_height:i.custom_height,status:i.status,assigned_sales_rep_id:i.assigned_sales_rep_id,assigned_sales_rep_name:(m=i.sales_rep)==null?void 0:m.full_name,assigned_designer_id:i.assigned_designer_id,assigned_designer_name:(p=i.designer)==null?void 0:p.full_name,invoice_url:i.invoice_url,created_at:i.created_at,updated_at:i.updated_at}})}catch(t){return console.error("Error fetching recent orders:",t),[]}},mb=async e=>{try{let t=A.from("employees").select("*",{count:"exact"});e.search&&(t=t.or(`full_name.ilike.%${e.search}%,email.ilike.%${e.search}%`)),e.role&&(t=t.eq("role",e.role)),e.status&&(Array.isArray(e.status)?t=t.in("status",e.status):t=t.eq("status",e.status)),e.dateFrom&&(t=t.gte("created_at",e.dateFrom)),e.dateTo&&(t=t.lte("created_at",e.dateTo));const r=e.sortBy||"created_at",n=e.sortOrder||"desc";t=t.order(r,{ascending:n==="asc"});const a=(e.page-1)*e.limit,i=a+e.limit-1;t=t.range(a,i);const{data:o,error:l,count:c}=await t;if(l)throw l;return{data:o||[],total:c||0,page:e.page,limit:e.limit,totalPages:Math.ceil((c||0)/e.limit)}}catch(t){throw console.error("Error fetching users:",t),t}},$u=async(e,t)=>{try{const{data:r,error:n}=await A.from("employees").update(t).eq("id",e).select().single();if(n)throw n;return r}catch(r){throw console.error("Error updating user:",r),r}},fb=async e=>{try{const{error:t}=await A.from("employees").delete().eq("id",e);if(t)throw t}catch(t){throw console.error("Error deleting user:",t),t}},Lu=async(e,t)=>{try{const{data:r,error:n}=await A.from("customers").update(t).eq("id",e).select().single();if(n)throw n;return r}catch(r){throw console.error("Error updating customer:",r),r}},pb=async e=>{try{const{error:t}=await A.from("customers").delete().eq("id",e);if(t)throw t;const{error:r}=await A.auth.admin.deleteUser(e);r&&console.error("Error deleting auth user:",r)}catch(t){throw console.error("Error deleting customer:",t),t}},gb=async e=>{try{let t=A.from("customers").select(`
        *,
        company_name,
        sales_rep:employees!customers_assigned_sales_rep_id_fkey(full_name)
      `,{count:"exact"});e.search&&(t=t.or(`full_name.ilike.%${e.search}%,email.ilike.%${e.search}%`)),e.status&&(Array.isArray(e.status)?t=t.in("status",e.status):t=t.eq("status",e.status)),e.salesRepId&&(t=t.eq("assigned_sales_rep_id",e.salesRepId)),e.dateFrom&&(t=t.gte("created_at",e.dateFrom)),e.dateTo&&(t=t.lte("created_at",e.dateTo));const r=e.sortBy||"created_at",n=e.sortOrder||"desc";t=t.order(r,{ascending:n==="asc"});const a=(e.page-1)*e.limit,i=a+e.limit-1;t=t.range(a,i);const{data:o,error:l,count:c}=await t;if(l)throw l;return{data:(o||[]).map(u=>{var h;return{...u,assigned_sales_rep_name:(h=u.sales_rep)==null?void 0:h.full_name}}),total:c||0,page:e.page,limit:e.limit,totalPages:Math.ceil((c||0)/e.limit)}}catch(t){throw console.error("Error fetching customers:",t),t}},Bc=async e=>{try{let t=A.from("orders").select(`
        *,
        customer:customers!inner(full_name, email, phone, company_name),
        product:products(title),
        apparel_type:apparel_types(type_name),
        sales_rep:employees!orders_assigned_sales_rep_id_fkey(full_name),
        designer:employees!orders_assigned_designer_id_fkey(full_name)
      `,{count:"exact"});e.search&&(t=t.or(`order_number.ilike.%${e.search}%,custom_description.ilike.%${e.search}%`)),e.status&&(Array.isArray(e.status)?t=t.in("status",e.status):t=t.eq("status",e.status)),e.customerSearch,e.paymentStatus&&(t=t.eq("payment_status",e.paymentStatus)),e.salesRepId&&(t=t.eq("assigned_sales_rep_id",e.salesRepId)),e.assignedDesignerId&&(t=t.eq("assigned_designer_id",e.assignedDesignerId)),e.amountMin!==void 0&&!isNaN(e.amountMin)&&e.amountMin>=0&&(t=t.gte("total_amount",e.amountMin)),e.amountMax!==void 0&&!isNaN(e.amountMax)&&e.amountMax>=0&&(t=t.lte("total_amount",e.amountMax)),e.dateFrom&&(t=t.gte("created_at",e.dateFrom)),e.dateTo&&(t=t.lte("created_at",e.dateTo));const r=e.sortBy||"created_at",n=e.sortOrder||"desc";t=t.order(r,{ascending:n==="asc"});const a=(e.page-1)*e.limit,i=a+e.limit-1;t=t.range(a,i);const{data:o,error:l,count:c}=await t;if(l)throw l;const d=(o||[]).map(m=>m.id);let u={};if(d.length>0)try{const{data:m}=await A.from("order_attachments").select("id, order_id").in("order_id",d).order("uploaded_at",{ascending:!0});m&&m.forEach(p=>{u[p.order_id]||(u[p.order_id]=p.id)})}catch(m){console.error("Error fetching attachments:",m)}let h=(o||[]).map(m=>{var p,w,b,j,x,y,f,v;return{id:m.id,order_number:m.order_number,order_type:m.order_type,customer_id:m.customer_id,customer_name:((p=m.customer)==null?void 0:p.full_name)||"Unknown",customer_email:((w=m.customer)==null?void 0:w.email)||"",customer_phone:((b=m.customer)==null?void 0:b.phone)||"",customer_company_name:((j=m.customer)==null?void 0:j.company_name)||"",product_id:m.product_id,product_title:(x=m.product)==null?void 0:x.title,custom_description:m.custom_description,file_urls:m.file_urls,first_attachment_id:u[m.id],apparel_type_id:m.apparel_type_id,apparel_type_name:(y=m.apparel_type)==null?void 0:y.type_name,custom_width:m.custom_width,custom_height:m.custom_height,total_amount:m.total_amount,payment_status:m.payment_status,status:m.status,assigned_sales_rep_id:m.assigned_sales_rep_id,assigned_sales_rep_name:(f=m.sales_rep)==null?void 0:f.full_name,assigned_designer_id:m.assigned_designer_id,assigned_designer_name:(v=m.designer)==null?void 0:v.full_name,invoice_url:m.invoice_url,created_at:m.created_at,updated_at:m.updated_at}});if(e.customerSearch){const m=e.customerSearch.toLowerCase();h=h.filter(p=>p.customer_name.toLowerCase().includes(m)||p.customer_email.toLowerCase().includes(m))}return{data:h,total:e.customerSearch?h.length:c||0,page:e.page,limit:e.limit,totalPages:Math.ceil((e.customerSearch?h.length:c||0)/e.limit)}}catch(t){throw console.error("Error fetching orders:",t),t}},xb=async(e,t)=>{try{const r=await fe();if(!r)throw new Error("Authentication required");const n=await $e(r.id);if(!n)throw new Error("User profile not found");const{data:a,error:i}=await A.from("orders").select("status, assigned_designer_id, customer_id, apparel_type_id").eq("id",e).single();if(i)throw new Error("Failed to fetch current order status");if((a.status==="completed"||a.status==="cancelled")&&n.role!=="admin"&&n.role!=="sales_rep")throw new Error("Only administrators and sales representatives can edit completed or cancelled orders");if(t.status==="in_progress"&&!t.assigned_designer_id&&!a.assigned_designer_id)throw new Error('Cannot set order to "In Progress" without assigning a designer');if(t.status==="completed"){if(!t.assigned_sales_rep_id&&n.role!=="admin")throw new Error("Cannot complete order without assigning a sales representative");if(t.total_amount!==void 0&&t.total_amount<=0)throw new Error("Total amount must be greater than 0 for completed orders")}if(t.total_amount!==void 0&&t.total_amount<0)throw new Error("Total amount cannot be negative");const o={order_type:t.order_type,custom_width:t.custom_width,custom_height:t.custom_height,total_amount:t.total_amount,file_urls:t.file_urls,status:t.status,invoice_url:t.invoice_url};t.apparel_type_id!==void 0&&(o.apparel_type_id=t.apparel_type_id||null),t.assigned_sales_rep_id!==void 0&&(o.assigned_sales_rep_id=t.assigned_sales_rep_id||null),t.assigned_designer_id!==void 0&&(o.assigned_designer_id=t.assigned_designer_id||null);const{data:l,error:c}=await A.from("orders").update(o).eq("id",e).select().single();if(c){if(c.message.includes("invalid input syntax for type uuid"))throw c.message.includes("assigned_designer_id")?new Error("Please select a valid designer"):c.message.includes("assigned_sales_rep_id")?new Error("Please select a valid sales representative"):c.message.includes("apparel_type_id")?new Error("Please select a valid apparel type"):new Error("Please ensure all fields are filled in correctly");if(c.message.includes("foreign key")){if(c.message.includes("designer"))throw new Error("Please select a valid designer");if(c.message.includes("sales_rep"))throw new Error("Please select a valid sales representative");if(c.message.includes("apparel_type"))throw new Error("Please select a valid apparel type")}throw c}const d=await yb(e);try{t.status&&t.status!==a.status&&await np(a.customer_id,d.order_number,t.status,d.assigned_sales_rep_id),t.assigned_designer_id&&t.assigned_designer_id!==a.assigned_designer_id&&await ap(t.assigned_designer_id,d.order_number)}catch(u){console.error("Error creating notifications:",u)}return d}catch(r){throw console.error("Error updating order:",r),r}},yb=async e=>{var t,r,n,a,i,o,l,c;try{const{data:d,error:u}=await A.from("orders").select(`
        *,
        customer:customers!inner(full_name, email, phone, company_name),
        product:products(title),
        apparel_type:apparel_types(type_name),
        sales_rep:employees!orders_assigned_sales_rep_id_fkey(full_name),
        designer:employees!orders_assigned_designer_id_fkey(full_name)
      `).eq("id",e).single();if(u)throw u;return{id:d.id,order_number:d.order_number,order_type:d.order_type,customer_id:d.customer_id,customer_name:((t=d.customer)==null?void 0:t.full_name)||"Unknown",customer_email:((r=d.customer)==null?void 0:r.email)||"",customer_phone:((n=d.customer)==null?void 0:n.phone)||"",customer_company_name:((a=d.customer)==null?void 0:a.company_name)||"",product_id:d.product_id,product_title:(i=d.product)==null?void 0:i.title,custom_description:d.custom_description,file_urls:d.file_urls,apparel_type_id:d.apparel_type_id,apparel_type_name:(o=d.apparel_type)==null?void 0:o.type_name,custom_width:d.custom_width,custom_height:d.custom_height,total_amount:d.total_amount,payment_status:d.payment_status,status:d.status,assigned_sales_rep_id:d.assigned_sales_rep_id,assigned_sales_rep_name:(l=d.sales_rep)==null?void 0:l.full_name,assigned_designer_id:d.assigned_designer_id,assigned_designer_name:(c=d.designer)==null?void 0:c.full_name,invoice_url:d.invoice_url,created_at:d.created_at,updated_at:d.updated_at}}catch(d){throw console.error("Error fetching order by ID:",d),d}},vb=async e=>{try{let t=A.from("products").select(`
        *,
        apparel_type:apparel_types(type_name)
      `,{count:"exact"});e.search&&(t=t.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e.apparelTypeId&&(t=t.eq("apparel_type_id",e.apparelTypeId)),e.status&&(Array.isArray(e.status)?t=t.in("status",e.status):t=t.eq("status",e.status)),e.priceMin&&(t=t.gte("price",e.priceMin)),e.priceMax&&(t=t.lte("price",e.priceMax));const r=e.sortBy||"created_at",n=e.sortOrder||"desc";t=t.order(r,{ascending:n==="asc"});const a=(e.page-1)*e.limit,i=a+e.limit-1;t=t.range(a,i);const{data:o,error:l,count:c}=await t;if(l)throw l;return{data:(o||[]).map(u=>{var h;return{...u,apparel_type_name:(h=u.apparel_type)==null?void 0:h.type_name}}),total:c||0,page:e.page,limit:e.limit,totalPages:Math.ceil((c||0)/e.limit)}}catch(t){throw console.error("Error fetching products:",t),t}},wb=async e=>{try{const{data:t,error:r}=await A.from("products").insert([{...e,status:e.status||"active"}]).select().single();if(r)throw r;return t}catch(t){throw console.error("Error creating product:",t),t}},bb=async(e,t)=>{try{const{data:r,error:n}=await A.from("products").update(t).eq("id",e).select().single();if(n)throw n;return r}catch(r){throw console.error("Error updating product:",r),r}},jb=async e=>{try{const{error:t}=await A.from("products").delete().eq("id",e);if(t)throw t}catch(t){throw console.error("Error deleting product:",t),t}},qc=async()=>{try{const{data:e,error:t}=await A.from("apparel_types").select("*").order("type_name");if(t)throw t;return e||[]}catch(e){return console.error("Error fetching apparel types:",e),[]}},Wc=async()=>{try{const{data:e,error:t}=await A.from("employees").select("*").eq("role","sales_rep").eq("status","active").order("full_name");if(t)throw t;return e||[]}catch(e){return console.error("Error fetching sales reps:",e),[]}},op=async()=>{try{const{data:e,error:t}=await A.from("employees").select("*").eq("role","designer").eq("status","active").order("full_name");if(t)throw t;return e||[]}catch(e){return console.error("Error fetching designers:",e),[]}},lp=async e=>{try{let t=A.from("invoices").select(`
        *,
        customer:customers(full_name, email)
      `,{count:"exact"});if(e.search)if(e.search.includes("customer_id.eq.")){const[u,h]=e.search.split(","),m=u.replace("customer_id.eq.","");t=t.eq("customer_id",m),h&&(t=t.ilike("invoice_title",`%${h}%`))}else t=t.or(`invoice_title.ilike.%${e.search}%,customer.full_name.ilike.%${e.search}%,customer.email.ilike.%${e.search}%`);e.invoiceStatus&&(t=t.eq("status",e.invoiceStatus)),e.invoiceMonthYear&&(t=t.eq("month_year",e.invoiceMonthYear)),e.dateFrom&&(t=t.gte("created_at",e.dateFrom)),e.dateTo&&(t=t.lte("created_at",e.dateTo));const r=e.sortBy||"created_at",n=e.sortOrder||"desc";t=t.order(r,{ascending:n==="asc"});const a=(e.page-1)*e.limit,i=a+e.limit-1;t=t.range(a,i);const{data:o,error:l,count:c}=await t;if(l)throw l;return{data:(o||[]).map(u=>{var h,m;return{...u,customer_name:(h=u.customer)==null?void 0:h.full_name,customer_email:(m=u.customer)==null?void 0:m.email}}),total:c||0,page:e.page,limit:e.limit,totalPages:Math.ceil((c||0)/e.limit)}}catch(t){throw console.error("Error fetching invoices:",t),t}},_b=async e=>{try{const{data:t,error:r}=await A.from("invoices").insert([e]).select().single();if(r)throw r;try{e.customer_id&&await ip(e.customer_id,e.invoice_title)}catch(n){console.error("Error creating invoice notification:",n)}return t}catch(t){throw console.error("Error creating invoice:",t),t}},Nb=async(e,t)=>{try{if(t.order_ids){const{data:a}=await A.from("invoices").select("order_ids").eq("id",e).single();if(a&&(a.order_ids&&a.order_ids.length>0&&await A.from("orders").update({payment_status:"unpaid"}).in("id",a.order_ids),t.order_ids.length>0)){const i=t.status==="paid"?"paid":"unpaid";await A.from("orders").update({payment_status:i}).in("id",t.order_ids)}}if(t.status==="paid"&&!t.order_ids){const{data:a}=await A.from("invoices").select("order_ids").eq("id",e).single();a&&a.order_ids&&a.order_ids.length>0&&await A.from("orders").update({payment_status:"paid"}).in("id",a.order_ids)}const{data:r,error:n}=await A.from("invoices").update(t).eq("id",e).select().single();if(n)throw n;return r}catch(r){throw console.error("Error updating invoice:",r),r}},cp=async e=>{var t,r,n;try{const{data:a,error:i}=await A.from("invoices").select(`
        *,
        customer:customers(full_name, email, company_name)
      `).eq("id",e).single();if(i)throw i;return{...a,customer_name:(t=a.customer)==null?void 0:t.full_name,customer_email:(r=a.customer)==null?void 0:r.email,customer_company_name:(n=a.customer)==null?void 0:n.company_name}}catch(a){throw console.error("Error fetching invoice by ID:",a),a}},kb=async e=>{try{if(!e||e.length===0)return[];const{data:t,error:r}=await A.from("orders").select(`
        *,
        customer:customers!inner(full_name, email, phone, company_name),
        product:products(title),
        apparel_type:apparel_types(type_name)
      `).in("id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(n=>{var a,i,o,l,c,d;return{id:n.id,order_number:n.order_number,order_type:n.order_type,customer_id:n.customer_id,customer_name:((a=n.customer)==null?void 0:a.full_name)||"Unknown",customer_email:((i=n.customer)==null?void 0:i.email)||"",customer_phone:((o=n.customer)==null?void 0:o.phone)||"",customer_company_name:((l=n.customer)==null?void 0:l.company_name)||"",product_id:n.product_id,product_title:(c=n.product)==null?void 0:c.title,custom_description:n.custom_description,file_urls:n.file_urls,apparel_type_id:n.apparel_type_id,apparel_type_name:(d=n.apparel_type)==null?void 0:d.type_name,custom_width:n.custom_width,custom_height:n.custom_height,total_amount:n.total_amount,status:n.status,assigned_sales_rep_id:n.assigned_sales_rep_id,assigned_sales_rep_name:void 0,assigned_designer_id:n.assigned_designer_id,assigned_designer_name:void 0,invoice_url:n.invoice_url,created_at:n.created_at,updated_at:n.updated_at}})}catch(t){return console.error("Error fetching orders by IDs:",t),[]}},Sb=async e=>{try{const{data:t,error:r}=await A.from("orders").select(`
        *,
        customer:customers!inner(full_name, email, phone, company_name),
        product:products(title),
        apparel_type:apparel_types(type_name)
      `).eq("customer_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(n=>{var a,i,o,l,c,d;return{id:n.id,order_number:n.order_number,order_type:n.order_type,customer_id:n.customer_id,customer_name:((a=n.customer)==null?void 0:a.full_name)||"Unknown",customer_email:((i=n.customer)==null?void 0:i.email)||"",customer_phone:((o=n.customer)==null?void 0:o.phone)||"",customer_company_name:((l=n.customer)==null?void 0:l.company_name)||"",product_id:n.product_id,product_title:(c=n.product)==null?void 0:c.title,custom_description:n.custom_description,file_urls:n.file_urls,apparel_type_id:n.apparel_type_id,apparel_type_name:(d=n.apparel_type)==null?void 0:d.type_name,custom_width:n.custom_width,custom_height:n.custom_height,total_amount:n.total_amount,status:n.status,assigned_sales_rep_id:n.assigned_sales_rep_id,assigned_sales_rep_name:void 0,assigned_designer_id:n.assigned_designer_id,assigned_designer_name:void 0,invoice_url:n.invoice_url,created_at:n.created_at,updated_at:n.updated_at}})}catch(t){return console.error("Error fetching all customer orders:",t),[]}},dp=async()=>{try{const{data:e,error:t}=await A.from("customers").select("id, full_name, email").eq("status","active").order("full_name");if(t)throw t;return e||[]}catch(e){return console.error("Error fetching customers for invoice:",e),[]}},Cb=async(e,t)=>{try{if(!e)return;if(t==="product-images"){const r=e.split("/"),n=`product-images/${r[r.length-1]}`,{data:{session:a}}=await A.auth.getSession();if(!a)return;(await fetch(`https://iutxllhudjckcaiwabud.supabase.co/functions/v1/manage-product-image?s3Key=${encodeURIComponent(n)}`,{method:"DELETE",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"}})).ok||console.error("Error deleting file from S3")}}catch(r){console.error("Error processing file deletion:",r)}},Eb=async(e,t,r)=>{try{let n=A.from("orders").select(`
        *,
        customer:customers!inner(full_name, email, phone, company_name),
        product:products(title),
        apparel_type:apparel_types(type_name)
      `).eq("customer_id",e).eq("payment_status","unpaid");t&&(n=n.gte("created_at",t)),r&&(n=n.lte("created_at",r)),n=n.order("created_at",{ascending:!1});const{data:a,error:i}=await n;if(i)throw i;return(a||[]).map(o=>{var l,c,d,u,h,m;return{id:o.id,order_number:o.order_number,order_type:o.order_type,customer_id:o.customer_id,customer_name:((l=o.customer)==null?void 0:l.full_name)||"Unknown",customer_email:((c=o.customer)==null?void 0:c.email)||"",customer_phone:((d=o.customer)==null?void 0:d.phone)||"",customer_company_name:((u=o.customer)==null?void 0:u.company_name)||"",product_id:o.product_id,product_title:(h=o.product)==null?void 0:h.title,custom_description:o.custom_description,file_urls:o.file_urls,apparel_type_id:o.apparel_type_id,apparel_type_name:(m=o.apparel_type)==null?void 0:m.type_name,custom_width:o.custom_width,custom_height:o.custom_height,total_amount:o.total_amount,status:o.status,assigned_sales_rep_id:o.assigned_sales_rep_id,assigned_sales_rep_name:void 0,assigned_designer_id:o.assigned_designer_id,assigned_designer_name:void 0,invoice_url:o.invoice_url,created_at:o.created_at,updated_at:o.updated_at}})}catch(n){return console.error("Error fetching unpaid orders for customer:",n),[]}},Du=async(e,t=20)=>{try{const{data:r,error:n}=await A.from("notifications").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;const{count:a,error:i}=await A.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("read",!1);if(i)throw i;return{notifications:r||[],unreadCount:a||0}}catch(r){return console.error("Error fetching notifications with unread count:",r),{notifications:[],unreadCount:0}}},Pb=async e=>{try{const{error:t}=await A.from("notifications").update({read:!0}).eq("id",e);if(t)throw t}catch(t){throw console.error("Error marking notification as read:",t),t}},Tb=async e=>{try{const{error:t}=await A.from("notifications").update({read:!1}).eq("id",e);if(t)throw t}catch(t){throw console.error("Error marking notification as unread:",t),t}},Ob=async e=>{try{const{error:t}=await A.from("notifications").update({read:!0}).eq("user_id",e).eq("read",!1);if(t)throw t}catch(t){throw console.error("Error marking all notifications as read:",t),t}},Ib=async e=>{try{let t=A.from("orders").select(`
        *,
        customer:customers!inner(full_name, email, phone, company_name),
        product:products(title),
        apparel_type:apparel_types(type_name),
        sales_rep:employees!orders_assigned_sales_rep_id_fkey(full_name),
        designer:employees!orders_assigned_designer_id_fkey(full_name)
      `,{count:"exact"}).eq("customer_id",e.customer_id);e.search&&(t=t.or(`order_number.ilike.%${e.search}%,custom_description.ilike.%${e.search}%`)),e.status&&(Array.isArray(e.status)?t=t.in("status",e.status):t=t.eq("status",e.status)),e.dateFrom&&(t=t.gte("created_at",e.dateFrom)),e.dateTo&&(t=t.lte("created_at",e.dateTo));const r=e.sortBy||"created_at",n=e.sortOrder||"desc";t=t.order(r,{ascending:n==="asc"});const a=(e.page-1)*e.limit,i=a+e.limit-1;t=t.range(a,i);const{data:o,error:l,count:c}=await t;if(l)throw l;const d=(o||[]).map(m=>m.id);let u={};if(d.length>0)try{const{data:m}=await A.from("order_attachments").select("id, order_id").in("order_id",d).order("uploaded_at",{ascending:!0});m&&m.forEach(p=>{u[p.order_id]||(u[p.order_id]=p.id)})}catch(m){console.error("Error fetching attachments:",m)}return{data:(o||[]).map(m=>{var p,w,b,j,x,y,f,v;return{id:m.id,order_number:m.order_number,order_type:m.order_type,customer_id:m.customer_id,customer_name:((p=m.customer)==null?void 0:p.full_name)||"Unknown",customer_email:((w=m.customer)==null?void 0:w.email)||"",customer_phone:((b=m.customer)==null?void 0:b.phone)||"",customer_company_name:((j=m.customer)==null?void 0:j.company_name)||"",first_attachment_id:u[m.id],product_id:m.product_id,product_title:(x=m.product)==null?void 0:x.title,custom_description:m.custom_description,file_urls:m.file_urls,apparel_type_id:m.apparel_type_id,apparel_type_name:(y=m.apparel_type)==null?void 0:y.type_name,custom_width:m.custom_width,custom_height:m.custom_height,total_amount:m.total_amount,payment_status:m.payment_status,status:m.status,assigned_sales_rep_id:m.assigned_sales_rep_id,assigned_sales_rep_name:(f=m.sales_rep)==null?void 0:f.full_name,assigned_designer_id:m.assigned_designer_id,assigned_designer_name:(v=m.designer)==null?void 0:v.full_name,invoice_url:m.invoice_url,created_at:m.created_at,updated_at:m.updated_at}}),total:c||0,page:e.page,limit:e.limit,totalPages:Math.ceil((c||0)/e.limit)}}catch(t){throw console.error("Error fetching customer orders:",t),t}},up=async e=>{try{const{data:t,error:r}=await A.from("order_comments").select(`
        *,
        author:employees!order_comments_author_id_fkey(full_name)
      `).eq("order_id",e).order("created_at",{ascending:!0});if(r)throw r;return(t||[]).map(n=>{var a;return{id:n.id,order_id:n.order_id,author_id:n.author_id,author_name:((a=n.author)==null?void 0:a.full_name)||"Unknown",content:n.content,created_at:n.created_at}})}catch(t){return console.error("Error fetching order comments:",t),[]}},Ab=async(e,t,r)=>{var n;try{const{data:a,error:i}=await A.from("order_comments").insert([{order_id:e,author_id:t,content:r.trim()}]).select(`
        *,
        author:employees!order_comments_author_id_fkey(full_name)
      `).single();if(i)throw i;return{id:a.id,order_id:a.order_id,author_id:a.author_id,author_name:((n=a.author)==null?void 0:n.full_name)||"Unknown",content:a.content,created_at:a.created_at}}catch(a){throw console.error("Error adding order comment:",a),a}},ii=()=>{const[e,t]=g.useState(!1),[r,n]=g.useState([]),[a,i]=g.useState(0),[o,l]=g.useState(!1),[c,d]=g.useState(null);g.useEffect(()=>{e&&h(),u();const j=setInterval(u,3e4);return()=>clearInterval(j)},[e]);const u=async()=>{try{const j=await fe();if(!j)return;const{notifications:x,unreadCount:y}=await Du(j.id,1);i(y)}catch(j){console.error("Error fetching unread count:",j)}},h=async()=>{try{l(!0);const j=await fe();if(!j)return;const{notifications:x,unreadCount:y}=await Du(j.id,20);if(x&&x.length>0){const f=x.filter(v=>!v.read&&v.type==="order"&&v.message.includes("completed"));if(f.length>0){const{toast:v}=await Qt(async()=>{const{toast:k}=await Promise.resolve().then(()=>Lb);return{toast:k}},void 0);f.forEach(k=>{v.success(k.message)})}}n(x),i(y)}catch(j){console.error("Error fetching notifications:",j)}finally{l(!1)}},m=async(j,x)=>{try{d(j),x?await Tb(j):await Pb(j),await h()}catch(y){console.error("Error toggling notification read status:",y)}finally{d(null)}},p=async()=>{try{l(!0);const j=await fe();if(!j)return;await Ob(j.id),await h()}catch(j){console.error("Error marking all notifications as read:",j)}finally{l(!1)}},w=j=>{switch(j){case"order":return"📦";case"user":return"👤";case"product":return"🛍️";case"system":return"⚙️";default:return"📢"}},b=j=>{const x=new Date(j),f=Math.floor((new Date().getTime()-x.getTime())/(1e3*60));return f<1?"Just now":f<60?`${f}m ago`:f<1440?`${Math.floor(f/60)}h ago`:`${Math.floor(f/1440)}d ago`};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>t(!e),className:"relative p-2 text-gray-400 hover:text-gray-600 transition-colors",children:[s.jsx(Pu,{className:"h-6 w-6"}),a>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:a>99?"99+":a})]}),e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>t(!1)}),s.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notifications"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[a>0&&s.jsxs("button",{onClick:p,disabled:o,className:"text-blue-600 hover:text-blue-800 transition-colors text-sm font-medium flex items-center space-x-1",title:"Mark all as read",children:[s.jsx(Gw,{className:"h-4 w-4"}),s.jsx("span",{children:"Mark all read"})]}),s.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ue,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:o?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"loading-spinner-small mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Loading notifications..."})]}):r.length===0?s.jsxs("div",{className:"p-6 text-center text-gray-500",children:[s.jsx(Pu,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"No notifications yet"})]}):s.jsx("div",{className:"divide-y divide-gray-100",children:r.map(j=>s.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors relative ${j.read?"":"bg-blue-50 border-l-4 border-blue-500"}`,children:s.jsxs("div",{className:"flex items-start space-x-3 pr-8",children:[s.jsx("div",{className:"text-lg",children:w(j.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm leading-relaxed ${j.read?"text-gray-700":"text-gray-900 font-medium"}`,children:j.message}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:b(j.created_at)})]}),s.jsx("button",{onClick:()=>m(j.id,j.read),disabled:c===j.id,className:`absolute top-3 right-3 p-1 rounded transition-colors ${j.read?"text-gray-400 hover:text-blue-600":"text-blue-600 hover:text-blue-800"}`,title:j.read?"Mark as unread":"Mark as read",children:c===j.id?s.jsx("div",{className:"w-4 h-4 border border-gray-400 border-t-transparent rounded-full animate-spin"}):j.read?s.jsx(Tt,{className:"h-4 w-4"}):s.jsx(Pe,{className:"h-4 w-4"})})]})},j.id))})}),r.length>0&&s.jsxs("div",{className:"border-t border-gray-200 p-3 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[s.jsxs("span",{children:[r.length," notifications shown"]}),s.jsxs("span",{children:[a," unread"]})]}),s.jsx("button",{onClick:()=>{t(!1)},className:"w-full text-center text-sm text-blue-600 hover:text-blue-700 transition-colors",children:"View All Notifications"})]})]})]})]})},Li=()=>{var d;const[e,t]=g.useState(!1),[r,n]=g.useState(!1),[a,i]=g.useState(null),o=u=>{const h=u.currentTarget.getAttribute("href");if(!h||!h.includes("#"))return;const m=h.split("#")[1];if(window.location.pathname==="/"){u.preventDefault();const w=document.getElementById(m);w&&w.scrollIntoView({behavior:"smooth"})}};g.useEffect(()=>{const u=()=>{const h=window.location.hash;if(h){const m=h.substring(1);setTimeout(()=>{const p=document.getElementById(m);p&&p.scrollIntoView({behavior:"smooth"})},100)}};return u(),window.addEventListener("hashchange",u),()=>{window.removeEventListener("hashchange",u)}},[]),g.useEffect(()=>{(async()=>{try{const h=await fe();if(h){const m=await $e(h.id);m&&i({id:h.id,email:h.email,full_name:m.full_name,role:m.role,avatar_url:m.avatar_url})}}catch(h){console.error("Error checking user:",h)}})()},[]);const l=async()=>{try{await Dc(),i(null),window.location.href="/"}catch(u){console.error("Error signing out:",u)}},c=()=>{if(!a||a.role!=="customer")return!1;const u=window.location.pathname;return["/","/catalog","/checkout"].includes(u)||u.startsWith("/catalog")};return s.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-100 sticky top-0 z-50",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-2 rounded-lg",children:s.jsx(Ii,{className:"h-6 w-6 text-white"})}),s.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"ABS STITCH"})]}),s.jsxs("div",{className:"hidden md:flex space-x-8",children:[s.jsx("a",{href:"/",className:"text-gray-600 hover:text-transparent hover:bg-gradient-to-r hover:from-blue-600 hover:to-indigo-600 hover:bg-clip-text transition-all font-bold",children:"Home"}),s.jsx("a",{href:"/catalog",className:"text-gray-600 hover:text-transparent hover:bg-gradient-to-r hover:from-blue-600 hover:to-indigo-600 hover:bg-clip-text transition-all font-bold",children:"Catalog"}),s.jsx("a",{href:"/#services",onClick:o,className:"text-gray-600 hover:text-transparent hover:bg-gradient-to-r hover:from-blue-600 hover:to-indigo-600 hover:bg-clip-text transition-all font-bold",children:"Services"}),s.jsx("a",{href:"/#pricing",onClick:o,className:"text-gray-600 hover:text-transparent hover:bg-gradient-to-r hover:from-blue-600 hover:to-indigo-600 hover:bg-clip-text transition-all font-bold",children:"Pricing"}),s.jsx("a",{href:"/about",className:"text-gray-600 hover:text-transparent hover:bg-gradient-to-r hover:from-blue-600 hover:to-indigo-600 hover:bg-clip-text transition-all font-bold",children:"About"}),s.jsx("a",{href:"/#contact",onClick:o,className:"text-gray-600 hover:text-transparent hover:bg-gradient-to-r hover:from-blue-600 hover:to-indigo-600 hover:bg-clip-text transition-all font-bold",children:"Contact"})]}),s.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[c()&&s.jsx(Au,{}),a&&s.jsx(ii,{}),a?s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>n(!r),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:s.jsx(ut,{className:"h-4 w-4 text-white"})}),s.jsx("span",{className:"text-gray-700 font-medium",children:(d=a.full_name)==null?void 0:d.split(" ")[0]}),s.jsx(Kw,{className:"h-4 w-4 text-gray-500"})]}),r&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),s.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 z-[60]",children:s.jsxs("div",{className:"p-2",children:[s.jsxs("button",{onClick:()=>window.location.href="/profile",className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx(ab,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"text-gray-700",children:"Profile Settings"})]}),s.jsxs("button",{onClick:()=>window.location.href=ni(a.role),className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx(tb,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"text-gray-700",children:"Dashboard"})]}),s.jsx("hr",{className:"my-2"}),s.jsxs("button",{onClick:l,className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-red-50 rounded-lg transition-colors text-red-600",children:[s.jsx(Mc,{className:"h-4 w-4"}),s.jsx("span",{children:"Sign Out"})]})]})})]})]}):s.jsx("button",{onClick:()=>window.location.href="/login",className:"btn-primary px-6",children:"Sign In / Sign Up"}),a&&a.role==="customer"?s.jsx("button",{onClick:()=>{const u=new CustomEvent("openPlaceOrderModal");window.dispatchEvent(u)},className:"btn-purple px-4",children:"Place Order"}):a?null:s.jsx("button",{onClick:()=>window.location.href="/#contact",className:"btn-purple px-4",children:"Get a Quote"})]}),s.jsx("button",{className:"md:hidden",onClick:()=>t(!e),children:e?s.jsx(Ue,{className:"h-6 w-6"}):s.jsx(sb,{className:"h-6 w-6"})})]}),e&&s.jsx("div",{className:"md:hidden border-t border-gray-100",children:s.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[s.jsx("a",{href:"/",className:"block px-3 py-2 text-gray-600 hover:text-blue-600 font-bold",children:"Home"}),s.jsx("a",{href:"/catalog",className:"block px-3 py-2 text-gray-600 hover:text-blue-600 font-bold",children:"Catalog"}),s.jsx("a",{href:"/#services",onClick:o,className:"block px-3 py-2 text-gray-600 hover:text-blue-600 font-bold",children:"Services"}),s.jsx("a",{href:"/#pricing",onClick:o,className:"block px-3 py-2 text-gray-600 hover:text-blue-600 font-bold",children:"Pricing"}),s.jsx("a",{href:"/about",className:"block px-3 py-2 text-gray-600 hover:text-blue-600 font-bold",children:"About"}),s.jsx("a",{href:"/#contact",onClick:o,className:"block px-3 py-2 text-gray-600 hover:text-blue-600 font-bold",children:"Contact"}),s.jsxs("div",{className:"border-t border-gray-100 pt-2 mt-2",children:[c()&&s.jsx("div",{className:"px-3 py-2",children:s.jsx(Au,{})}),a&&s.jsx("div",{className:"px-3 py-2",children:s.jsx(ii,{})}),a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm font-medium",children:a.full_name}),s.jsx("button",{onClick:()=>window.location.href="/profile",className:"block w-full text-left px-3 py-2 text-gray-600 hover:text-blue-600 font-bold",children:"Profile Settings"}),s.jsx("button",{onClick:()=>window.location.href=ni(a.role),className:"block w-full text-left px-3 py-2 text-gray-600 hover:text-blue-600 font-bold",children:"Dashboard"}),s.jsx("button",{onClick:l,className:"block w-full text-left px-3 py-2 text-red-600 hover:text-red-700 font-bold",children:"Sign Out"})]}):s.jsx("button",{onClick:()=>window.location.href="/login",className:"w-full text-left btn-primary px-3 mt-2",children:"Sign In / Sign Up"}),a?s.jsx("button",{onClick:()=>{const u=new CustomEvent("openPlaceOrderModal");window.dispatchEvent(u)},className:"w-full text-left btn-purple px-3 mt-2",children:"Place Order"}):s.jsx("button",{onClick:()=>window.location.href="/#contact",className:"w-full text-left btn-purple px-3 mt-2",children:"Get a Quote"})]})]})})]})})},Rb=()=>{const[e,t]=ue.useState(null);return ue.useEffect(()=>{(async()=>{try{const n=await fe();if(n){const a=await $e(n.id);a&&t(a)}}catch(n){console.error("Error checking user:",n)}})()},[]),s.jsxs("section",{className:"relative bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 py-20 overflow-hidden",id:"home",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/20 via-purple-400/20 to-pink-400/20 blur-3xl"}),s.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-gradient-to-r from-blue-500/30 to-purple-500/30 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-gradient-to-r from-purple-500/30 to-pink-500/30 rounded-full blur-3xl animate-pulse delay-1000"}),s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-purple-100 p-3 rounded-full shadow-lg",children:s.jsx(Xf,{className:"h-8 w-8 text-blue-600"})})}),s.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold text-gray-800 mb-6",children:["Where We Stitch",s.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent block",children:"Perfection!"})]}),s.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto leading-relaxed",children:"We specialize in creating stunning custom embroidery and stitching for apparel, promotional items, and personal projects. Submit your vision and watch it come to life with our precision stitching services."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e&&e.role==="customer"?s.jsxs("button",{onClick:()=>{const r=new CustomEvent("openPlaceOrderModal");window.dispatchEvent(r)},className:"btn-success btn-large px-8 flex items-center justify-center",children:["Place Order",s.jsx(Cu,{className:"ml-2 h-5 w-5"})]}):null,e?null:s.jsxs("button",{onClick:()=>{var r;return(r=document.getElementById("contact"))==null?void 0:r.scrollIntoView({behavior:"smooth"})},className:"btn-primary btn-large px-8 flex items-center justify-center",children:["Get Custom Artwork",s.jsx(Cu,{className:"ml-2 h-5 w-5"})]}),s.jsx("button",{onClick:()=>window.location.href="/catalog",className:"btn-purple btn-large px-8",children:"Browse Catalog"})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mt-16",children:[s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-green-600 font-bold",children:"✓"})}),s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Quick Turnaround"}),s.jsx("p",{className:"text-gray-600",children:"Most custom designs completed within 2-3 business days"})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-purple-600 font-bold",children:"⚡"})}),s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"High Quality"}),s.jsx("p",{className:"text-gray-600",children:"Professional-grade artwork ready for your apparel"})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-100 to-red-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-orange-600 font-bold",children:"∞"})}),s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Unlimited Revisions"}),s.jsx("p",{className:"text-gray-600",children:"We work until you're completely satisfied"})]})]})]})})]})};class $b{constructor(){this.container=null,this.toasts=new Map,this.createContainer()}createContainer(){typeof window>"u"||(this.container=document.createElement("div"),this.container.id="toast-container",this.container.className="fixed top-4 right-4 z-[9999] space-y-2 pointer-events-none",document.body.appendChild(this.container))}getToastStyles(t){switch(t){case"success":return"bg-green-50 border-green-200 text-green-800 shadow-lg";case"error":return"bg-red-50 border-red-200 text-red-800 shadow-lg";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800 shadow-lg";case"info":return"bg-blue-50 border-blue-200 text-blue-800 shadow-lg";default:return"bg-gray-50 border-gray-200 text-gray-800 shadow-lg"}}getIcon(t){switch(t){case"success":return'<svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>';case"error":return'<svg class="w-5 h-5 text-red-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>';case"warning":return'<svg class="w-5 h-5 text-yellow-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>';case"info":return'<svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>';default:return'<svg class="w-5 h-5 text-gray-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>'}}show(t,r={type:"info"}){if(!this.container)return;const n=Date.now().toString(),a=document.createElement("div"),i=this.getToastStyles(r.type),o=this.getIcon(r.type);a.className=`${i} border rounded-lg p-4 transform transition-all duration-300 translate-x-full opacity-0 max-w-sm pointer-events-auto font-medium`,a.innerHTML=`
      <div class="flex items-center space-x-3">
        <div class="flex-shrink-0">${o}</div>
        <span class="text-sm flex-1 leading-relaxed">${t}</span>
        <button class="text-current opacity-70 hover:opacity-100 transition-opacity p-1 rounded hover:bg-black hover:bg-opacity-10" onclick="this.parentElement.parentElement.remove()">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
        </button>
      </div>
    `,this.container.appendChild(a),this.toasts.set(n,a),setTimeout(()=>{a.classList.remove("translate-x-full","opacity-0")},10);const l=r.duration||4e3;return setTimeout(()=>{this.remove(n)},l),n}remove(t){const r=this.toasts.get(t);r&&(r.classList.add("translate-x-full","opacity-0"),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),this.toasts.delete(t)},300))}success(t,r){return this.show(t,{type:"success",duration:r})}error(t,r){return this.show(t,{type:"error",duration:r})}warning(t,r){return this.show(t,{type:"warning",duration:r})}info(t,r){return this.show(t,{type:"info",duration:r})}}const H=new $b,Lb=Object.freeze(Object.defineProperty({__proto__:null,toast:H},Symbol.toStringTag,{value:"Module"})),hp=({item:e,className:t=""})=>{const{addToCart:r,items:n}=Oc(),[a,i]=ue.useState(null);ue.useEffect(()=>{(async()=>{try{const c=await fe();i(c)}catch(c){console.error("Error checking user:",c)}})()},[]);const o=async()=>{if(!a){H.info("Please sign in or create an account to add items to your cart");return}r(e),H.success(`${e.title} added to cart!`)};return s.jsxs("button",{onClick:o,className:`btn-primary flex items-center justify-center space-x-2 ${t}`,children:[s.jsx(ai,{className:"h-4 w-4"}),s.jsx("span",{children:"Add to Cart"})]})},Db={product:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5ObyBJbWFnZSBBdmFpbGFibGU8L3RleHQ+PC9zdmc+",order:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2VmZjZmZiIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwMCwgMjAwKSI+PHBhdGggZD0iTSAwIC02MCBMIDUyIC0xOCBMIDMyIDQ4IEwgLTMyIDQ4IEwgLTUyIC0xOCBaIiBmaWxsPSIjYmRlMGZlIiBzdHJva2U9IiM2MGExZjciIHN0cm9rZS13aWR0aD0iMiIvPjwvZz48dGV4dCB4PSI1MCUiIHk9IjcwJSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE2IiBmaWxsPSIjNjBhMWY3IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5ObyBEZXNpZ248L3RleHQ+PC9zdmc+",thumbnail:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5ObyBJbWFnZTwvdGV4dD48L3N2Zz4="};function Os(e="product"){return Db[e]}function oi(e,t="product"){return!e||e.trim()===""?Os(t):e}const Mb=()=>{const[e,t]=ue.useState([]),[r,n]=ue.useState(!0);return ue.useEffect(()=>{(async()=>{try{const i=await Gf({limit:6,sortBy:"newest"});t(i||[])}catch(i){console.error("Error fetching products:",i),t([])}finally{n(!1)}})()},[]),s.jsx("section",{className:"py-16 bg-gradient-to-b from-white to-gray-50",id:"catalog",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 mb-4",children:"Ready-Made Embroidery Designs"}),s.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Browse our collection of professionally designed embroidery patterns, ready for immediate stitching."})]}),r&&s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"loading-spinner mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading designs..."})]})}),!r&&e.length===0&&s.jsx("div",{className:"text-center py-16",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto",children:[s.jsx("div",{className:"text-gray-300 mb-4",children:s.jsx("svg",{className:"h-16 w-16 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No Designs Available"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Check back soon for new embroidery designs!"})]})}),!r&&e.length>0&&s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:e.map(a=>{var i,o,l;return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"relative group",children:s.jsx("img",{src:oi(a.image_url,"product"),alt:a.title||"Product image",className:"w-full h-48 object-cover",onError:c=>{c.target.src=Os("product")}})}),s.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("h3",{className:"font-bold text-gray-800 group-hover:text-blue-600 transition-colors text-lg",children:a.title}),s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"text-blue-600 font-bold text-xl",children:["$",a.price.toFixed(2)]})})]}),s.jsx("p",{className:"text-blue-500 text-sm mb-2 font-medium",children:(i=a.category)==null?void 0:i.name}),s.jsx("p",{className:"text-blue-500 text-sm mb-2 font-medium",children:(o=a.apparel_type)==null?void 0:o.type_name}),s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 leading-relaxed flex-grow",children:a.description}),s.jsx(hp,{item:{id:a.id,title:a.title,price:`$${a.price.toFixed(2)}`,image:oi(a.image_url,"product"),apparelType:((l=a.apparel_type)==null?void 0:l.type_name)||"Uncategorized"},className:"w-full shadow-lg transform hover:scale-105 mt-auto"})]})]},a.id)})}),!r&&e.length>0&&s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:()=>window.location.href="/catalog",className:"btn-purple btn-large px-8",children:"View All Designs"})})]})})},Fb=()=>{const e=[{id:1,title:"Custom Embroidery",description:"Precision embroidery tailored to your vision and brand",icon:ib,color:"from-blue-500 to-cyan-500"},{id:2,title:"Logo Stitching",description:"Professional logo embroidery that represents your business",icon:Cl,color:"from-purple-600 to-pink-600"},{id:3,title:"Apparel Customization",description:"Custom stitching for any garment or textile",icon:Ii,color:"from-green-600 to-emerald-600"},{id:4,title:"Quick Turnaround",description:"Fast delivery without compromising quality",icon:sp,color:"from-yellow-600 to-orange-600"},{id:5,title:"Team Collaboration",description:"Work directly with our creative professionals",icon:qr,color:"from-indigo-600 to-blue-600"},{id:6,title:"Premium Quality",description:"High-resolution, print-ready artwork",icon:Xf,color:"from-pink-600 to-rose-600"}];return s.jsx("section",{className:"py-16 bg-gradient-to-b from-gray-50 to-white",id:"services",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 mb-4",children:"Our Services"}),s.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"We offer comprehensive embroidery and stitching services to bring your creative vision to life"})]}),s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(t=>{const r=t.icon;return s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-lg transition-all duration-300 border border-gray-100 hover:border-gray-200",children:[s.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-r ${t.color} flex items-center justify-center mb-4`,children:s.jsx(r,{className:"h-6 w-6 text-white"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:t.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:t.description})]},t.id)})})]})})},Ub=()=>{const e=[{id:1,title:"Basic Embroidery",description:"Perfect for simple logos and small designs on single items",icon:Et,color:"from-blue-500 to-cyan-500",features:["Single color embroidery","Up to 5,000 stitches","Basic logo placement","Standard turnaround time"]},{id:2,title:"Premium Embroidery",description:"Ideal for detailed designs and bulk orders with multiple colors",icon:sp,color:"from-green-600 to-emerald-600",features:["Multi-color embroidery","Up to 15,000 stitches","Custom placement options","Priority turnaround time"]},{id:3,title:"Enterprise Solutions",description:"Complete branding packages for businesses and large-scale projects",icon:Yw,color:"from-orange-500 to-amber-600",features:["Unlimited colors & stitches","Complex design support","Multiple item types","Express turnaround time"]}];return s.jsx("section",{className:"py-16 bg-gradient-to-b from-white to-gray-50",id:"pricing",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 mb-4",children:"Transparent Pricing"}),s.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Quality embroidery services at competitive rates. Choose the package that fits your needs."})]}),s.jsx("div",{className:"grid sm:grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:e.map(t=>{const r=t.icon;return s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-lg transition-all duration-300 border border-gray-100 hover:border-gray-200 flex flex-col h-full",children:[s.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-r ${t.color} flex items-center justify-center mb-4`,children:s.jsx(r,{className:"h-6 w-6 text-white"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:t.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed mb-4 text-sm",children:t.description}),s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-3xl font-bold text-gray-800",children:"Starting from $10"}),s.jsx("div",{className:"text-gray-500 text-sm",children:"per item"})]}),s.jsx("div",{className:"border-t border-gray-100 pt-4 mb-4",children:s.jsx("ul",{className:"space-y-2",children:t.features.map((n,a)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("svg",{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),s.jsx("span",{className:"text-gray-600 text-sm",children:n})]},a))})}),s.jsx("button",{onClick:()=>window.location.href="/#contact",className:"btn-primary w-full mt-auto",children:"Get Started"})]},t.id)})})]})})},zb=()=>{const e=[{id:1,name:"Sarah Johnson",company:"Fashion Startup",image:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150",rating:5,text:"ArtistryDigital transformed my rough sketches into beautiful t-shirt designs. The quality exceeded my expectations!"},{id:2,name:"Mike Chen",company:"Tech Company",image:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150",rating:5,text:"I needed a logo for my startup and they delivered multiple concepts quickly. Perfect brand identity!"},{id:3,name:"Emily Rodriguez",company:"Local Business",image:"https://images.pexels.com/photos/1036623/pexels-photo-1036623.jpeg?auto=compress&cs=tinysrgb&w=150",rating:4,text:"Professional service and great communication. They made my vision even better than I imagined."},{id:4,name:"David Park",company:"Marketing Agency",image:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150",rating:5,text:"Consistent quality, fair pricing, and always on time. They're an essential part of our team."},{id:5,name:"Lisa Thompson",company:"E-commerce Store",image:"https://images.pexels.com/photos/1130626/pexels-photo-1130626.jpeg?auto=compress&cs=tinysrgb&w=150",rating:5,text:"Amazing artwork for our product line. Sales increased 40% after using their designs!"},{id:6,name:"James Wilson",company:"Restaurant Chain",image:"https://images.pexels.com/photos/1043471/pexels-photo-1043471.jpeg?auto=compress&cs=tinysrgb&w=150",rating:4,text:"Creative menu designs and branding materials. Our customers love the new look!"}],t=[...e,...e],[r,n]=g.useState(0),a=320;return g.useEffect(()=>{const i=setInterval(()=>{n(o=>{const l=o+1;return l>=e.length?0:l})},3e3);return()=>clearInterval(i)},[e.length]),s.jsx("section",{className:"py-16 bg-gradient-to-b from-white to-gray-50",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 mb-4",children:"What Our Clients Say"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Don't just take our word for it - hear from satisfied customers"})]}),s.jsx("div",{className:"relative overflow-hidden",children:s.jsx("div",{className:"flex transition-transform duration-1000 ease-in-out",style:{transform:`translateX(-${r*a}px)`,width:`${t.length*a}px`},children:t.map((i,o)=>s.jsx("div",{className:"flex-shrink-0 px-3",style:{width:`${a}px`},children:s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 shadow-sm h-80 flex flex-col",children:[s.jsx("div",{className:"text-blue-200 mb-3",children:s.jsx(nb,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("img",{src:i.image,alt:i.name,className:"w-12 h-12 rounded-full object-cover mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-gray-800 text-sm",children:i.name}),s.jsx("p",{className:"text-gray-500 text-xs",children:i.company})]})]}),s.jsx("div",{className:"flex mb-3",children:[...Array(5)].map((l,c)=>s.jsx(ob,{className:`h-4 w-4 ${c<i.rating?"text-yellow-400 fill-current":"text-gray-300"}`},c))}),s.jsxs("blockquote",{className:"text-gray-700 text-sm leading-relaxed flex-grow",children:['"',i.text,'"']})]})},`${i.id}-${Math.floor(o/e.length)}`))})}),s.jsx("div",{className:"flex justify-center mt-8 space-x-2",children:e.map((i,o)=>s.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-300 ${o===r%e.length?"bg-blue-600":"bg-gray-300"}`},o))})]})})},Bb=()=>{const[e,t]=g.useState(!0),[r,n]=g.useState([]),[a,i]=g.useState(!1),[o,l]=g.useState({fullName:"",email:"",countryCode:"+1",phoneNumber:"",customWidth:"",customHeight:"",apparelTypeId:"",designInstructions:"",message:"",file:null});ue.useEffect(()=>{(async()=>{try{const p=await Oi();n(p)}catch(p){console.error("Error fetching apparel types:",p)}})()},[]);const c=m=>{const{name:p,value:w}=m.target;if(p==="phoneNumber"){const b=w.replace(/\D/g,"");l(j=>({...j,[p]:b}))}else l(b=>({...b,[p]:w}))},d=m=>{var w;const p=((w=m.target.files)==null?void 0:w[0])||null;l(b=>({...b,file:p}))},u=m=>new Promise((p,w)=>{const b=new FileReader;b.readAsDataURL(m),b.onload=()=>{const j=b.result;p(j.split(",")[1])},b.onerror=w}),h=async m=>{m.preventDefault(),i(!0);try{let p;if(o.file){const v=await u(o.file);p={name:o.file.name,content:v,mimeType:o.file.type||"application/octet-stream"}}const w=r.find(v=>v.id===o.apparelTypeId),b={formType:e?"quote":"general",fullName:o.fullName,email:o.email,phone:`${o.countryCode} ${o.phoneNumber}`,apparelType:w==null?void 0:w.type_name,customWidth:o.customWidth,customHeight:o.customHeight,designInstructions:o.designInstructions,message:o.message,fileAttachment:p},x=await fetch("https://iutxllhudjckcaiwabud.supabase.co/functions/v1/send-contact-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml1dHhsbGh1ZGpja2NhaXdhYnVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxODUwMTAsImV4cCI6MjA3Mzc2MTAxMH0.B7caM5jpTbxINeE_x6xYAAjNTN_25UjmfHHosy9PUFI"},body:JSON.stringify(b)}),y=await x.json();if(!x.ok||!y.success)throw new Error(y.error||"Failed to send email");H.success("Form submitted successfully"),l({fullName:"",email:"",countryCode:"+1",phoneNumber:"",customWidth:"",customHeight:"",apparelTypeId:"",designInstructions:"",message:"",file:null});const f=document.getElementById("file-upload");f&&(f.value="")}catch(p){console.error("Error submitting form:",p),H.error("Failed to submit form. Please try again.")}finally{i(!1)}};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Get In Touch"}),s.jsx("p",{className:"text-gray-600",children:"Request a custom quote or send us a general message"})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"isQuoteRequest",checked:e,onChange:m=>t(m.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"isQuoteRequest",className:"text-gray-700 font-medium",children:"This is a quote request (uncheck to use as general contact form)"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),s.jsx("input",{type:"text",name:"fullName",required:!0,value:o.fullName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),s.jsx("input",{type:"email",name:"email",required:!0,value:o.email,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),s.jsxs("select",{name:"countryCode",value:o.countryCode,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"+1",children:"🇺🇸 +1"}),s.jsx("option",{value:"+44",children:"🇬🇧 +44"}),s.jsx("option",{value:"+33",children:"🇫🇷 +33"}),s.jsx("option",{value:"+49",children:"🇩🇪 +49"}),s.jsx("option",{value:"+81",children:"🇯🇵 +81"}),s.jsx("option",{value:"+86",children:"🇨🇳 +86"}),s.jsx("option",{value:"+91",children:"🇮🇳 +91"}),s.jsx("option",{value:"+61",children:"🇦🇺 +61"}),s.jsx("option",{value:"+55",children:"🇧🇷 +55"}),s.jsx("option",{value:"+34",children:"🇪🇸 +34"})]})]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),s.jsx("input",{type:"tel",name:"phoneNumber",required:!0,value:o.phoneNumber,onChange:c,placeholder:"Enter phone number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apparel Type"}),s.jsxs("select",{name:"apparelTypeId",value:o.apparelTypeId,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select Type"}),r.map(m=>s.jsx("option",{value:m.id,children:m.type_name},m.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width (inches)"}),s.jsx("input",{type:"number",name:"customWidth",step:"0.1",min:"0.1",value:o.customWidth,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Width"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height (inches)"}),s.jsx("input",{type:"number",name:"customHeight",step:"0.1",min:"0.1",value:o.customHeight,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Height"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Design Instructions *"}),s.jsx("textarea",{name:"designInstructions",required:!0,rows:4,value:o.designInstructions,onChange:c,placeholder:"Please describe your design ideas, colors, style preferences, and any specific requirements...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),!e&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message *"}),s.jsx("textarea",{name:"message",required:!0,rows:4,value:o.message,onChange:c,placeholder:"How can we help you today?",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File Attachment (Optional)"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[s.jsx("input",{type:"file",onChange:d,className:"hidden",id:"file-upload",accept:"image/*,.pdf,.doc,.docx"}),s.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex items-center justify-center space-x-2 text-gray-600 hover:text-blue-600",children:[s.jsx(Fc,{className:"h-5 w-5"}),s.jsx("span",{children:o.file?o.file.name:"Click to upload reference images or documents"})]})]})]}),s.jsx("button",{type:"submit",disabled:a,className:"w-full btn-success btn-large flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?s.jsxs(s.Fragment,{children:[s.jsx(rb,{className:"h-5 w-5 animate-spin"}),s.jsx("span",{children:"Sending..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ri,{className:"h-5 w-5"}),s.jsx("span",{children:e?"Request Quote":"Send Message"})]})})]})]})},qb=()=>s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-6 h-fit shadow-sm",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xl font-extrabold text-gray-800 mb-2",children:"Contact Information"}),s.jsx("p",{className:"text-gray-600",children:"Get in touch with us directly"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Us,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),s.jsx("a",{href:"tel:+1234567890",className:"text-gray-800 hover:text-blue-600 transition-colors",children:"(123) 456-7890"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Ht,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("a",{href:"mailto:hello@artistrydigital.com",className:"text-gray-800 hover:text-blue-600 transition-colors",children:"hello@absstitch.com"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Gn,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Business Hours"}),s.jsx("p",{className:"text-gray-800",children:"Mon-Fri: 9AM-6PM EST"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Zf,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),s.jsx("p",{className:"text-gray-800",children:"Remote & Worldwide"})]})]})]}),s.jsx("div",{className:"mt-6 bg-white p-4 rounded-lg border-l-4 border-blue-600",children:s.jsx("p",{className:"text-sm text-gray-600",children:"We typically respond to all inquiries within 2-4 hours during business hours."})})]}),mp=()=>s.jsx("footer",{className:"bg-gray-900 text-gray-300",children:s.jsxs("div",{className:"container mx-auto px-4 py-12",children:[s.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:s.jsx(Ii,{className:"h-6 w-6 text-white"})}),s.jsx("span",{className:"text-xl font-bold text-white",children:"ABS STITCH"})]}),s.jsx("p",{className:"text-gray-400 mb-4 leading-relaxed",children:"Where We Stitch Perfection! Transforming your creative vision into stunning custom embroidery and stitching for apparel, promotional items, and personal projects."}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("div",{className:"bg-gray-800 p-2 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:s.jsx("span",{className:"text-sm",children:"FB"})}),s.jsx("div",{className:"bg-gray-800 p-2 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:s.jsx("span",{className:"text-sm",children:"IG"})}),s.jsx("div",{className:"bg-gray-800 p-2 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:s.jsx("span",{className:"text-sm",children:"TW"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Quick Links"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx("a",{href:"/",className:"hover:text-blue-400 transition-colors",children:"Home"})}),s.jsx("li",{children:s.jsx("a",{href:"/catalog",className:"hover:text-blue-400 transition-colors",children:"Catalog"})}),s.jsx("li",{children:s.jsx("a",{href:"/about",className:"hover:text-blue-400 transition-colors",children:"About Us"})}),s.jsx("li",{children:s.jsx("a",{href:"/#services",className:"hover:text-blue-400 transition-colors",children:"Services"})}),s.jsx("li",{children:s.jsx("a",{href:"/#pricing",className:"hover:text-blue-400 transition-colors",children:"Pricing"})}),s.jsx("li",{children:s.jsx("a",{href:"/#contact",className:"hover:text-blue-400 transition-colors",children:"Contact"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Our Services"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:"Custom Embroidery"}),s.jsx("li",{children:"Logo Stitching"}),s.jsx("li",{children:"Apparel Customization"}),s.jsx("li",{children:"Promotional Items"}),s.jsx("li",{children:"Corporate Branding"}),s.jsx("li",{children:"Patches & Badges"}),s.jsx("li",{children:"Monogramming"}),s.jsx("li",{children:"Design Consultations"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Contact Details"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Us,{className:"h-4 w-4 text-blue-400"}),s.jsx("span",{children:"(123) 456-7890"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-blue-400"}),s.jsx("span",{children:"hello@absstitch.com"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Zf,{className:"h-4 w-4 text-blue-400"}),s.jsx("span",{children:"Remote & Worldwide"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"font-semibold text-white mb-2",children:"Business Hours"}),s.jsx("p",{className:"text-sm",children:"Monday - Friday: 9AM - 6PM EST"}),s.jsx("p",{className:"text-sm",children:"Weekend: By appointment"})]})]})]}),s.jsx("div",{className:"border-t border-gray-800 pt-6",children:s.jsx("div",{className:"md:flex justify-between items-center",children:s.jsx("p",{className:"text-gray-400 text-sm mb-4 md:mb-0",children:"© 2025 ABS STITCH. All rights reserved."})})})]})});function Mu(e){if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return Math.round(e/Math.pow(t,n)*100)/100+" "+r[n]}function Wb(e,t=20){const r=t*1024*1024;return e.size>r?{valid:!1,error:`File size exceeds ${t}MB limit`}:{valid:!0}}function Hb(e){return e.startsWith("image/")?"🖼️":e.startsWith("video/")?"🎥":e.startsWith("audio/")?"🎵":e.includes("pdf")?"📄":e.includes("word")||e.includes("document")?"📝":e.includes("excel")||e.includes("spreadsheet")?"📊":e.includes("powerpoint")||e.includes("presentation")?"📽️":e.includes("zip")||e.includes("compressed")?"📦":"📎"}const Hc="https://iutxllhudjckcaiwabud.supabase.co/functions/v1/manage-attachment";async function Ol(e){const{data:t,error:r}=await A.from("order_attachments").select("*").eq("order_id",e).order("uploaded_at",{ascending:!1});if(r)throw console.error("Error fetching attachments:",r),new Error("Failed to fetch attachments");return t||[]}async function fp(e,t,r,n){const a=Wb(r);if(!a.valid)throw new Error(a.error);const{data:{session:i}}=await A.auth.getSession();if(!i)throw new Error("Not authenticated");const o=new FormData;o.append("file",r),o.append("orderId",e),o.append("orderNumber",t);const l=await fetch(Hc,{method:"POST",headers:{Authorization:`Bearer ${i.access_token}`},body:o});if(!l.ok){const d=await l.json();throw new Error(d.error||"Upload failed")}return(await l.json()).attachment}async function Vb(e){const{data:{session:t}}=await A.auth.getSession();if(!t)throw new Error("Not authenticated");const r=await fetch(`${Hc}?attachmentId=${e}`,{method:"GET",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to get download URL")}return(await r.json()).downloadUrl}async function pp(e){const{data:{session:t}}=await A.auth.getSession();if(!t)throw new Error("Not authenticated");const r=await fetch(`${Hc}?attachmentId=${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to delete attachment")}}async function Gb(e,t){const r=await Vb(e),n=document.createElement("a");n.href=r,n.download=t,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}const gp=({isOpen:e,onClose:t})=>{var v;const[r,n]=g.useState([]),[a,i]=g.useState({fullName:"",email:"",countryCode:"+1",phoneNumber:"",customWidth:"",customHeight:"",apparelTypeId:"",designInstructions:"",files:[]}),[o,l]=g.useState(!1),[c,d]=ue.useState(null),[u,h]=g.useState(!1),[m,p]=g.useState(null),{addOrder:w}=Qf();ue.useEffect(()=>{e&&(async()=>{try{const N=await fe();if(N){const S=await $e(N.id);S&&(d(S),i(C=>({...C,fullName:S.full_name||"",email:S.email||""})))}const _=await Oi();n(_)}catch(N){console.error("Error checking user:",N)}})()},[e]);const b=k=>{const{name:N,value:_}=k.target;if(N==="phoneNumber"){const S=_.replace(/\D/g,"");i(C=>({...C,[N]:S}))}else i(S=>({...S,[N]:_}))},j=k=>{const N=Array.from(k.target.files||[]);i(_=>({..._,files:[..._.files,...N]}))},x=k=>{i(N=>({...N,files:N.files.filter((_,S)=>S!==k)}))},y=async k=>{k.preventDefault(),l(!0);try{const N={order_type:"custom",custom_description:a.designInstructions,apparel_type_id:a.apparelTypeId,custom_width:parseFloat(a.customWidth)||null,custom_height:parseFloat(a.customHeight)||null,total_amount:0},_=await w(N);if(!_)throw new Error("Failed to create order");if(a.files.length>0){const S=[],C=_.order_number||`ORD-${_.id.slice(0,8)}`;for(let P=0;P<a.files.length;P++){const D=a.files[P];try{await fp(_.id,C,D)}catch(T){console.error(`Error uploading file ${D.name}:`,T),S.push(D.name)}}S.length>0&&H.error(`Failed to upload some files: ${S.join(", ")}`)}p(_),H.success("Order placed successfully!"),h(!0)}catch(N){console.error("Error placing order:",N),H.error("Failed to place order. Please try again.")}finally{l(!1)}},f=()=>{h(!1),p(null),i({fullName:"",email:"",countryCode:"+1",phoneNumber:"",customWidth:"",customHeight:"",apparelTypeId:"",designInstructions:"",files:[]}),t()};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:f}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:u?"Order Placed Successfully!":"Place Order"}),s.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ue,{className:"h-6 w-6"})})]}),u?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:s.jsx(Ts,{className:"h-10 w-10 text-green-600"})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Order Placed Successfully!"}),s.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"Thank you for your order! We've received your custom embroidery request and our team will begin working on it shortly."}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your Order Number:"}),s.jsx("p",{className:"text-xl font-bold text-blue-600",children:(m==null?void 0:m.order_number)||`ORD-${((v=m==null?void 0:m.id)==null?void 0:v.slice(0,8))||"PENDING"}`})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>window.location.href="/customer/dashboard",className:"btn-primary btn-large flex items-center justify-center space-x-2",children:[s.jsx(Pe,{className:"h-5 w-5"}),s.jsx("span",{children:"View My Orders"})]}),s.jsxs("button",{onClick:()=>{h(!1),p(null),i({fullName:(c==null?void 0:c.full_name)||"",email:(c==null?void 0:c.email)||"",countryCode:"+1",phoneNumber:"",customWidth:"",customHeight:"",apparelTypeId:"",designInstructions:"",files:[]})},className:"btn-success btn-large flex items-center justify-center space-x-2",children:[s.jsx(Ai,{className:"h-5 w-5"}),s.jsx("span",{children:"Place Another Order"})]})]}),s.jsx("button",{onClick:f,className:"w-full btn-secondary btn-large",children:"Close"})]}),s.jsxs("div",{className:"mt-6 text-sm text-gray-500",children:[s.jsx("p",{children:"📧 You'll receive an email confirmation shortly"}),s.jsx("p",{children:"⏱️ Expected completion: 2-3 business days"})]})]}):s.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[c&&s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Order for:"}),s.jsxs("div",{className:"text-gray-800",children:[s.jsx("p",{className:"font-medium",children:c.full_name}),s.jsx("p",{className:"text-sm text-gray-600",children:c.email}),c.phone&&s.jsx("p",{className:"text-sm text-gray-600",children:c.phone})]})]}),!c&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),s.jsx("input",{type:"text",name:"fullName",required:!0,value:a.fullName,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),s.jsx("input",{type:"email",name:"email",required:!0,value:a.email,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),s.jsxs("select",{name:"countryCode",value:a.countryCode,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"+1",children:"🇺🇸 +1"}),s.jsx("option",{value:"+44",children:"🇬🇧 +44"}),s.jsx("option",{value:"+33",children:"🇫🇷 +33"}),s.jsx("option",{value:"+49",children:"🇩🇪 +49"}),s.jsx("option",{value:"+81",children:"🇯🇵 +81"}),s.jsx("option",{value:"+86",children:"🇨🇳 +86"}),s.jsx("option",{value:"+91",children:"🇮🇳 +91"}),s.jsx("option",{value:"+61",children:"🇦🇺 +61"}),s.jsx("option",{value:"+55",children:"🇧🇷 +55"}),s.jsx("option",{value:"+34",children:"🇪🇸 +34"})]})]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),s.jsx("input",{type:"tel",name:"phoneNumber",required:!0,value:a.phoneNumber,onChange:b,placeholder:"Enter phone number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apparel Type"}),s.jsxs("select",{name:"apparelTypeId",value:a.apparelTypeId,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select Type"}),r.map(k=>s.jsx("option",{value:k.id,children:k.type_name},k.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width (inches)"}),s.jsx("input",{type:"number",name:"customWidth",step:"0.1",min:"0.1",value:a.customWidth,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Width"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height (inches)"}),s.jsx("input",{type:"number",name:"customHeight",step:"0.1",min:"0.1",value:a.customHeight,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Height"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Design Instructions *"}),s.jsx("textarea",{name:"designInstructions",required:!0,rows:4,value:a.designInstructions,onChange:b,placeholder:"Please describe your design ideas, colors, style preferences, and any specific requirements...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File Attachments (Optional)"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[s.jsx("input",{type:"file",onChange:j,className:"hidden",id:"file-upload-modal",accept:"image/*,.pdf,.doc,.docx,.zip",multiple:!0}),s.jsxs("label",{htmlFor:"file-upload-modal",className:"cursor-pointer flex items-center justify-center space-x-2 text-gray-600 hover:text-blue-600",children:[s.jsx(Fc,{className:"h-5 w-5"}),s.jsx("span",{children:"Click to upload reference images, documents, or zip files"})]})]}),a.files.length>0&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Selected files:"}),a.files.map((k,N)=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[s.jsx("span",{className:"text-sm text-gray-700 truncate",children:k.name}),s.jsx("button",{type:"button",onClick:()=>x(N),className:"text-red-500 hover:text-red-700 ml-2",children:s.jsx(Vt,{className:"h-4 w-4"})})]},N))]})]}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{type:"button",onClick:f,className:"flex-1 btn-secondary btn-large",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:o,className:"flex-1 btn-success btn-large flex items-center justify-center space-x-2",children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loading-spinner-white"}),s.jsx("span",{children:"Placing Order..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ri,{className:"h-5 w-5"}),s.jsx("span",{children:"Place Order"})]})})]})]})]})})]}):null},Kb=()=>{const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState(!0),[o,l]=g.useState(""),[c,d]=g.useState(""),[u,h]=g.useState("All"),[m,p]=g.useState("newest");g.useEffect(()=>{(async()=>{try{i(!0);const[y,f]=await Promise.all([Gf({apparelType:u,search:c,sortBy:m}),Oi()]);t(y||[]),n(f||[])}catch(y){l(y.message||"Failed to load products"),console.error("Error fetching catalog data:",y)}finally{i(!1)}})()},[u,c,m]);const w=x=>d(x),b=x=>h(x),j=x=>p(x);return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 relative overflow-hidden",children:[s.jsx(Li,{}),s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-8 relative z-10 shadow-2xl",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold mb-3",children:"Embroidery Design Catalog"}),s.jsx("p",{className:"text-lg text-blue-100",children:"Browse our complete collection of professional embroidery designs"})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8 relative z-10",children:[s.jsx("div",{className:"glass rounded-2xl shadow-2xl p-6 mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Pl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),s.jsx("input",{type:"text",placeholder:"Search designs...",value:c,onChange:x=>w(x.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm"})]}),s.jsxs("select",{value:u,onChange:x=>b(x.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",children:[s.jsx("option",{value:"All",children:"All Types"}),r.map(x=>s.jsx("option",{value:x.id,children:x.type_name},x.id))]}),s.jsxs("select",{value:m,onChange:x=>j(x.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",children:[s.jsx("option",{value:"newest",children:"Newest First"}),s.jsx("option",{value:"title",children:"Alphabetical"}),s.jsx("option",{value:"price-low",children:"Price: Low to High"}),s.jsx("option",{value:"price-high",children:"Price: High to Low"})]}),s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(El,{className:"h-5 w-5 mr-2"}),s.jsxs("span",{children:[e.length," results"]})]})]})}),o&&s.jsx("div",{className:"glass rounded-2xl shadow-2xl p-6 mb-8 border-l-4 border-red-500",children:s.jsx("p",{className:"text-red-700",children:o})}),a&&s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"loading-spinner mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading products..."})]})}),!a&&!o&&s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(x=>{var y,f;return s.jsxs("div",{className:"glass rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 group transform hover:scale-105 flex flex-col",children:[s.jsx("div",{className:"relative",children:s.jsx("img",{src:oi(x.image_url,"product"),alt:x.title||"Product image",className:"w-full h-48 object-cover",onError:v=>{v.target.src=Os("product")}})}),s.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("h3",{className:"font-bold text-gray-800 group-hover:text-blue-600 transition-colors text-lg",children:x.title}),s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"text-blue-600 font-bold text-xl",children:["$",x.price.toFixed(2)]})})]}),s.jsx("p",{className:"text-blue-500 text-sm mb-2 font-medium",children:(y=x.apparel_type)==null?void 0:y.type_name}),s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 leading-relaxed flex-grow",children:x.description}),s.jsx(hp,{item:{id:x.id,title:x.title,price:`$${x.price.toFixed(2)}`,image:oi(x.image_url,"product"),apparelType:((f=x.apparel_type)==null?void 0:f.type_name)||"Uncategorized"},className:"w-full shadow-lg transform hover:scale-105 mt-auto"})]})]},x.id)})}),!a&&!o&&e.length===0&&s.jsx("div",{className:"text-center py-16",children:s.jsxs("div",{className:"glass rounded-2xl shadow-2xl p-12 max-w-md mx-auto",children:[s.jsx(El,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No products found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Try adjusting your search or filter criteria"}),s.jsx("button",{onClick:()=>{d(""),h("All"),p("newest")},className:"btn-primary btn-large px-6",children:"Clear Filters"})]})})]})]})},Qb=()=>s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50",children:[s.jsx(Li,{}),s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold mb-4",children:"About ABS STITCH"}),s.jsx("p",{className:"text-xl text-blue-100",children:"We're passionate about transforming creative ideas into stunning custom embroidery that makes an impact"})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-16",children:[s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center mb-16",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Our Story"}),s.jsxs("div",{className:"space-y-4 text-gray-600 leading-relaxed",children:[s.jsx("p",{children:"Founded in 2020, ABS STITCH began as a small embroidery studio with a simple mission: to make professional custom stitching accessible to businesses and individuals of all sizes."}),s.jsx("p",{children:"What started as a passion project has grown into a trusted partner for hundreds of clients worldwide. We've helped startups create their first embroidered logos, assisted established businesses in custom branding, and brought countless creative visions to life through precision stitching."}),s.jsx("p",{children:"Our team combines artistic talent with technical expertise to deliver embroidery that not only looks amazing but also stands the test of time with superior quality."})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-8",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Our Mission"}),s.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"To empower businesses and individuals with exceptional custom embroidery that communicates their unique story and helps them stand out in a crowded marketplace."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(eb,{className:"h-5 w-5 text-blue-600"})}),s.jsx("span",{className:"text-gray-700 font-medium",children:"Passion for creativity and excellence"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(qr,{className:"h-5 w-5 text-blue-600"})}),s.jsx("span",{className:"text-gray-700 font-medium",children:"Client-focused collaborative approach"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Cl,{className:"h-5 w-5 text-blue-600"})}),s.jsx("span",{className:"text-gray-700 font-medium",children:"Commitment to quality and innovation"})]})]})]})]}),s.jsx("div",{className:"text-center mb-8",children:s.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-8",children:"Why Choose ABS STITCH?"})}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Gn,{className:"h-8 w-8 text-white"})}),s.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-3",children:"Fast Delivery"}),s.jsx("p",{className:"text-gray-600",children:"Most projects completed within 2-3 business days without compromising on quality."})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Cl,{className:"h-8 w-8 text-white"})}),s.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-3",children:"Professional Quality"}),s.jsx("p",{className:"text-gray-600",children:"High-quality, durable embroidery created by experienced craftspeople."})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(qr,{className:"h-8 w-8 text-white"})}),s.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-3",children:"Personal Service"}),s.jsx("p",{className:"text-gray-600",children:"Direct communication with our design team and unlimited revisions until you're satisfied."})]})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl p-8 mb-16",children:s.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center text-white",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold mb-2",children:"500+"}),s.jsx("div",{className:"text-blue-100",children:"Projects Completed"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold mb-2",children:"300+"}),s.jsx("div",{className:"text-blue-100",children:"Happy Clients"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold mb-2",children:"4.9"}),s.jsx("div",{className:"text-blue-100",children:"Average Rating"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold mb-2",children:"24h"}),s.jsx("div",{className:"text-blue-100",children:"Average Response Time"})]})]})}),s.jsx("div",{className:"text-center mb-12",children:s.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-8",children:"Meet Our Team"})}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=300",alt:"Sarah Johnson",className:"w-32 h-32 rounded-full object-cover mx-auto mb-4"}),s.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-2",children:"Sarah Johnson"}),s.jsx("p",{className:"text-blue-600 font-medium mb-2",children:"Creative Director"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"10+ years of experience in digital design and brand identity creation."})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=300",alt:"Mike Chen",className:"w-32 h-32 rounded-full object-cover mx-auto mb-4"}),s.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-2",children:"Mike Chen"}),s.jsx("p",{className:"text-blue-600 font-medium mb-2",children:"Lead Designer"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Specializes in apparel design and digital illustrations with a modern aesthetic."})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:"https://images.pexels.com/photos/1036623/pexels-photo-1036623.jpeg?auto=compress&cs=tinysrgb&w=300",alt:"Emily Rodriguez",className:"w-32 h-32 rounded-full object-cover mx-auto mb-4"}),s.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-2",children:"Emily Rodriguez"}),s.jsx("p",{className:"text-blue-600 font-medium mb-2",children:"Client Relations Manager"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Ensures every client receives personalized attention and exceptional service."})]})]}),s.jsxs("div",{className:"text-center bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-8",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Ready to Work With Us?"}),s.jsx("p",{className:"text-gray-600 mb-6 max-w-2xl mx-auto",children:"Let's bring your creative vision to life. Contact us today to discuss your project and see how we can help you stand out from the competition."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx("button",{onClick:()=>window.location.href="/#contact",className:"btn-success btn-large px-8",children:"Get Started Today"}),s.jsx("button",{onClick:()=>window.location.href="/catalog",className:"btn-purple btn-large px-8",children:"Browse Our Work"})]})]})]})]}),Jb=()=>{const[e,t]=g.useState({email:"",password:""}),[r,n]=g.useState(!1),[a,i]=g.useState(!1),[o,l]=g.useState(""),c=h=>{const{name:m,value:p}=h.target;t(w=>({...w,[m]:p})),o&&l("")},d=async h=>{h.preventDefault(),i(!0),l("");try{const{user:m}=await Dw(e.email,e.password);if(m){await new Promise(p=>setTimeout(p,1e3));try{const p=await $e(m.id);if(p){const w=ni(p.role);if(w)window.location.href=w;else{l(`Invalid user role: ${p.role}. Please contact support.`);return}}else{l("User profile not found. This may be a new account that needs setup. Please contact support.");return}}catch(p){console.error("Error fetching user profile:",p),l("Failed to load user profile. Please try again or contact support if the problem persists.");return}}else l("Invalid email or password. Please try again.")}catch(m){console.error("Login error:",m),m.message.includes("Invalid login credentials")?l("Invalid email or password. Please check your credentials and try again."):m.message.includes("Email not confirmed")?l("Please check your email and click the confirmation link before signing in."):m.message.includes("Too many requests")?l("Too many login attempts. Please wait a moment and try again."):l(m.message||"Login failed. Please try again.")}finally{i(!1)}},u=()=>{window.location.href="/"};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"spotlight spotlight-1"}),s.jsx("div",{className:"spotlight spotlight-2"}),s.jsx("div",{className:"spotlight spotlight-3"})]}),s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("button",{onClick:u,className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600 transition-colors mb-8 relative z-10",children:[s.jsx(Kr,{className:"h-5 w-5"}),s.jsx("span",{children:"Back to Homepage"})]}),s.jsxs("div",{className:"glass rounded-2xl shadow-2xl p-8 relative z-10",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(Ze,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-600",children:"Sign in to your ABS STITCH account"})]}),o&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center space-x-3",children:[s.jsx(yr,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),s.jsx("span",{className:"text-red-700 text-sm",children:o})]}),s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"email",name:"email",required:!0,value:e.email,onChange:c,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Enter your email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:r?"text":"password",name:"password",required:!0,value:e.password,onChange:c,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Enter your password"}),s.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r?s.jsx(Tt,{className:"h-5 w-5"}):s.jsx(Pe,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("a",{href:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot your password?"})}),s.jsx("button",{type:"submit",disabled:a,className:"w-full btn-success btn-large",children:a?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"loading-spinner-white"}),s.jsx("span",{children:"Signing In..."})]}):"Sign In"})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",s.jsx("a",{href:"/signup",className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent hover:from-blue-700 hover:to-indigo-700 font-semibold transition-all",children:"Create Account"})]})})]})]})]})},Yb=()=>{const[e,t]=g.useState({full_name:"",email:"",phone:"",password:"",confirmPassword:"",company_name:""}),[r,n]=g.useState(!1),[a,i]=g.useState(!1),[o,l]=g.useState(!1),[c,d]=g.useState(""),[u,h]=g.useState(!1),p=(v=>{let k=0;return v.length>=8&&k++,/[A-Z]/.test(v)&&k++,/[a-z]/.test(v)&&k++,/[0-9]/.test(v)&&k++,/[^A-Za-z0-9]/.test(v)&&k++,k})(e.password),w=["Very Weak","Weak","Fair","Good","Strong"][p],b=["red","orange","yellow","blue","green"][p],j=v=>{const{name:k,value:N,type:_}=v.target,S=v.target.checked;t(C=>({...C,[k]:_==="checkbox"?S:N})),c&&d("")},x=()=>e.full_name.trim()?e.email.trim()?/\S+@\S+\.\S+/.test(e.email)?e.password.length<8?(d("Password must be at least 8 characters long"),!1):e.password!==e.confirmPassword?(d("Passwords do not match"),!1):!0:(d("Please enter a valid email address"),!1):(d("Email is required"),!1):(d("Full name is required"),!1),y=async v=>{var k;if(v.preventDefault(),!!x()){l(!0),d("");try{const{user:N}=await Vf(e.email,e.password);if(N){await new Promise(_=>setTimeout(_,1e3));try{const _={id:N.id,email:e.email,full_name:e.full_name,phone:e.phone,status:"active"};(k=e.company_name)!=null&&k.trim()&&(_.company_name=e.company_name.trim()),await $w(_)}catch(_){console.error("Error creating user profile:",_),d("Account created but profile setup failed. Please contact support or try logging in.");return}h(!0)}}catch(N){console.error("Signup error:",N),d(N.message||"Registration failed. Please try again.")}finally{l(!1)}}},f=()=>{window.location.href="/"};return u?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"spotlight spotlight-1"}),s.jsx("div",{className:"spotlight spotlight-2"}),s.jsx("div",{className:"spotlight spotlight-3"})]}),s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"glass rounded-2xl shadow-2xl p-8 text-center relative z-10",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(Ts,{className:"h-8 w-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Account Created!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been successfully created. You can now sign in to access your dashboard."}),s.jsx("button",{onClick:()=>window.location.href="/login",className:"w-full btn-success btn-large",children:"Go to Login"})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"spotlight spotlight-1"}),s.jsx("div",{className:"spotlight spotlight-2"}),s.jsx("div",{className:"spotlight spotlight-3"})]}),s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("button",{onClick:f,className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600 transition-colors mb-8 relative z-10",children:[s.jsx(Kr,{className:"h-5 w-5"}),s.jsx("span",{children:"Back to Homepage"})]}),s.jsxs("div",{className:"glass rounded-2xl shadow-2xl p-8 relative z-10",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(ut,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Create Account"}),s.jsx("p",{className:"text-gray-600",children:"Join ABS STITCH today"})]}),c&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center space-x-3",children:[s.jsx(yr,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),s.jsx("span",{className:"text-red-700 text-sm",children:c})]}),s.jsxs("form",{onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"full_name",required:!0,value:e.full_name,onChange:j,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Enter your full name"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"email",name:"email",required:!0,value:e.email,onChange:j,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Enter your email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"tel",name:"phone",value:e.phone,onChange:j,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Enter your phone number"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name (Optional)"}),s.jsx("input",{type:"text",name:"company_name",value:e.company_name,onChange:j,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Enter your company name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:r?"text":"password",name:"password",required:!0,value:e.password,onChange:j,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Create a password"}),s.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r?s.jsx(Tt,{className:"h-5 w-5"}):s.jsx(Pe,{className:"h-5 w-5"})})]}),e.password&&s.jsx("div",{className:"mt-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all bg-${b}-500`,style:{width:`${p/5*100}%`}})}),s.jsx("span",{className:`text-xs text-${b}-600`,children:w})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:a?"text":"password",name:"confirmPassword",required:!0,value:e.confirmPassword,onChange:j,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Confirm your password"}),s.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?s.jsx(Tt,{className:"h-5 w-5"}):s.jsx(Pe,{className:"h-5 w-5"})})]})]}),s.jsx("button",{type:"submit",disabled:o,className:"w-full btn-success btn-large",children:o?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"loading-spinner-white"}),s.jsx("span",{children:"Creating Account..."})]}):"Create Account"})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",s.jsx("a",{href:"/login",className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent hover:from-blue-700 hover:to-indigo-700 font-semibold transition-all",children:"Sign In"})]})})]})]})]})},Zb=()=>{const[e,t]=g.useState({full_name:"",email:"",phone:"",password:"",confirmPassword:"",role:"sales_rep"}),[r,n]=g.useState(!1),[a,i]=g.useState(!1),[o,l]=g.useState(!1),[c,d]=g.useState(""),[u,h]=g.useState(!1),p=(v=>{let k=0;return v.length>=8&&k++,/[A-Z]/.test(v)&&k++,/[a-z]/.test(v)&&k++,/[0-9]/.test(v)&&k++,/[^A-Za-z0-9]/.test(v)&&k++,k})(e.password),w=["Very Weak","Weak","Fair","Good","Strong"][p],b=["red","orange","yellow","blue","green"][p],j=v=>{const{name:k,value:N,type:_}=v.target,S=v.target.checked;t(C=>({...C,[k]:_==="checkbox"?S:N})),c&&d("")},x=()=>e.full_name.trim()?e.email.trim()?/\S+@\S+\.\S+/.test(e.email)?e.password.length<8?(d("Password must be at least 8 characters long"),!1):e.password!==e.confirmPassword?(d("Passwords do not match"),!1):!0:(d("Please enter a valid email address"),!1):(d("Email is required"),!1):(d("Full name is required"),!1),y=async v=>{if(v.preventDefault(),!!x()){l(!0),d("");try{const{user:k}=await Vf(e.email,e.password);if(k){await new Promise(N=>setTimeout(N,1e3));try{const N={id:k.id,email:e.email,full_name:e.full_name,phone:e.phone,role:e.role};await Lw(N)}catch(N){console.error("Error creating employee profile:",N),d("Account created but profile setup failed. Please contact support or try logging in.");return}h(!0)}}catch(k){console.error("Employee signup error:",k),k.message.includes("User already registered")?d("An account with this email already exists. Please use a different email or contact support."):d(k.message||"Registration failed. Please try again.")}finally{l(!1)}}},f=()=>{window.location.href="/"};return u?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"spotlight spotlight-1"}),s.jsx("div",{className:"spotlight spotlight-2"}),s.jsx("div",{className:"spotlight spotlight-3"})]}),s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"glass rounded-2xl shadow-2xl p-8 text-center relative z-10",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(Ts,{className:"h-8 w-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Registration Submitted!"}),s.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"Your employee account has been created and is pending administrator approval. You will be able to sign in once an administrator activates your account."}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Next Steps:"}),s.jsx("br",{}),"• An administrator will review your application",s.jsx("br",{}),"• You'll receive confirmation when your account is activated",s.jsx("br",{}),"• You can then sign in at the login page"]})}),s.jsx("button",{onClick:()=>window.location.href="/login",className:"w-full btn-success btn-large",children:"Go to Login Page"})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"spotlight spotlight-1"}),s.jsx("div",{className:"spotlight spotlight-2"}),s.jsx("div",{className:"spotlight spotlight-3"})]}),s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("button",{onClick:f,className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600 transition-colors mb-8 relative z-10",children:[s.jsx(Kr,{className:"h-5 w-5"}),s.jsx("span",{children:"Back to Homepage"})]}),s.jsxs("div",{className:"glass rounded-2xl shadow-2xl p-8 relative z-10",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(qr,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Join Our Team"}),s.jsx("p",{className:"text-gray-600",children:"Create your employee account"})]}),c&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center space-x-3",children:[s.jsx(yr,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),s.jsx("span",{className:"text-red-700 text-sm",children:c})]}),s.jsxs("form",{onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"full_name",required:!0,value:e.full_name,onChange:j,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Enter your full name"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"email",name:"email",required:!0,value:e.email,onChange:j,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Enter your email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"tel",name:"phone",value:e.phone,onChange:j,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Enter your phone number"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),s.jsxs("select",{name:"role",value:e.role,onChange:j,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",required:!0,children:[s.jsx("option",{value:"sales_rep",children:"Sales Representative"}),s.jsx("option",{value:"designer",children:"Designer"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:r?"text":"password",name:"password",required:!0,value:e.password,onChange:j,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Create a password"}),s.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r?s.jsx(Tt,{className:"h-5 w-5"}):s.jsx(Pe,{className:"h-5 w-5"})})]}),e.password&&s.jsx("div",{className:"mt-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all bg-${b}-500`,style:{width:`${p/5*100}%`}})}),s.jsx("span",{className:`text-xs text-${b}-600`,children:w})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:a?"text":"password",name:"confirmPassword",required:!0,value:e.confirmPassword,onChange:j,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Confirm your password"}),s.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?s.jsx(Tt,{className:"h-5 w-5"}):s.jsx(Pe,{className:"h-5 w-5"})})]})]}),s.jsx("button",{type:"submit",disabled:o,className:"w-full btn-success btn-large",children:o?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"loading-spinner-white"}),s.jsx("span",{children:"Creating Account..."})]}):"Create Employee Account"})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",s.jsx("a",{href:"/login",className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent hover:from-blue-700 hover:to-indigo-700 font-semibold transition-all",children:"Sign In"})]})}),s.jsx("div",{className:"mt-6 bg-blue-50 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," Your account will be reviewed and activated by an administrator. You will not be able to sign in until your account is approved."]})})]})]})]})},Xb=()=>{const[e,t]=g.useState(""),[r,n]=g.useState(!1),[a,i]=g.useState(""),[o,l]=g.useState(!1),c=h=>{t(h.target.value),a&&i("")},d=async h=>{if(h.preventDefault(),!e.trim()){i("Email address is required");return}if(!/\S+@\S+\.\S+/.test(e)){i("Please enter a valid email address");return}n(!0),i("");try{const{error:m}=await A.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(m)throw m;l(!0)}catch(m){console.error("Password reset error:",m),m.message.includes("Email not found")?i("No account found with this email address. Please check your email or create a new account."):m.message.includes("Email rate limit exceeded")?i("Too many password reset requests. Please wait a few minutes before trying again."):i(m.message||"Failed to send password reset email. Please try again.")}finally{n(!1)}},u=()=>{window.location.href="/login"};return o?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"spotlight spotlight-1"}),s.jsx("div",{className:"spotlight spotlight-2"}),s.jsx("div",{className:"spotlight spotlight-3"})]}),s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"glass rounded-2xl shadow-2xl p-8 text-center relative z-10",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(Ts,{className:"h-8 w-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Check Your Email"}),s.jsxs("p",{className:"text-gray-600 mb-6 leading-relaxed",children:["We've sent a password reset link to ",s.jsx("strong",{children:e}),". Please check your email and click the link to reset your password."]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Next Steps:"}),s.jsx("br",{}),"• Check your email inbox (and spam folder)",s.jsx("br",{}),"• Click the password reset link",s.jsx("br",{}),"• Create a new password",s.jsx("br",{}),"• Sign in with your new password"]})}),s.jsx("button",{onClick:u,className:"w-full btn-primary btn-large",children:"Back to Login"})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"spotlight spotlight-1"}),s.jsx("div",{className:"spotlight spotlight-2"}),s.jsx("div",{className:"spotlight spotlight-3"})]}),s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("button",{onClick:u,className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600 transition-colors mb-8 relative z-10",children:[s.jsx(Kr,{className:"h-5 w-5"}),s.jsx("span",{children:"Back to Login"})]}),s.jsxs("div",{className:"glass rounded-2xl shadow-2xl p-8 relative z-10",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(Ht,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Reset Password"}),s.jsx("p",{className:"text-gray-600",children:"Enter your email to receive a password reset link"})]}),a&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center space-x-3",children:[s.jsx(yr,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),s.jsx("span",{className:"text-red-700 text-sm",children:a})]}),s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"email",required:!0,value:e,onChange:c,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Enter your email address"})]})]}),s.jsx("button",{type:"submit",disabled:r,className:"w-full btn-primary btn-large",children:r?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"loading-spinner-white"}),s.jsx("span",{children:"Sending Reset Link..."})]}):s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Ri,{className:"h-5 w-5"}),s.jsx("span",{children:"Send Reset Link"})]})})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("p",{className:"text-gray-600 text-sm",children:["Remember your password?"," ",s.jsx("a",{href:"/login",className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent hover:from-blue-700 hover:to-indigo-700 font-semibold transition-all",children:"Sign In"})]})}),s.jsx("div",{className:"mt-6 bg-blue-50 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Need help?"})," If you don't receive the email within a few minutes, please check your spam folder or contact support at hello@absstitch.com"]})})]})]})]})},ej=()=>{const[e,t]=g.useState({newPassword:"",confirmPassword:""}),[r,n]=g.useState(!1),[a,i]=g.useState(!1),[o,l]=g.useState(!1),[c,d]=g.useState(""),[u,h]=g.useState(!1),[m,p]=g.useState(!1),b=(N=>{let _=0;return N.length>=8&&_++,/[A-Z]/.test(N)&&_++,/[a-z]/.test(N)&&_++,/[0-9]/.test(N)&&_++,/[^A-Za-z0-9]/.test(N)&&_++,_})(e.newPassword),j=["Very Weak","Weak","Fair","Good","Strong"][b],x=["red","orange","yellow","blue","green"][b];g.useEffect(()=>{(async()=>{try{const{data:{session:_},error:S}=await A.auth.getSession();(S||!_)&&p(!0)}catch(_){console.error("Error checking session:",_),p(!0)}})()},[]);const y=N=>{const{name:_,value:S}=N.target;t(C=>({...C,[_]:S})),c&&d("")},f=()=>e.newPassword?e.newPassword.length<8?(d("Password must be at least 8 characters long"),!1):e.newPassword!==e.confirmPassword?(d("Passwords do not match"),!1):!0:(d("New password is required"),!1),v=async N=>{if(N.preventDefault(),!!f()){l(!0),d("");try{const{error:_}=await A.auth.updateUser({password:e.newPassword});if(_)throw _;h(!0)}catch(_){console.error("Password reset error:",_),_.message.includes("session_not_found")?d("Password reset link has expired or is invalid. Please request a new reset link."):_.message.includes("same_password")?d("New password must be different from your current password."):d(_.message||"Failed to reset password. Please try again.")}finally{l(!1)}}},k=()=>{window.location.href="/login"};return m?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"spotlight spotlight-1"}),s.jsx("div",{className:"spotlight spotlight-2"}),s.jsx("div",{className:"spotlight spotlight-3"})]}),s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"glass rounded-2xl shadow-2xl p-8 text-center relative z-10",children:[s.jsx("div",{className:"bg-gradient-to-r from-red-100 to-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(yr,{className:"h-8 w-8 text-red-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Invalid Reset Link"}),s.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"This password reset link has expired or is invalid. Please request a new password reset link."}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:()=>window.location.href="/forgot-password",className:"w-full btn-primary btn-large",children:"Request New Reset Link"}),s.jsx("button",{onClick:k,className:"w-full btn-secondary btn-large",children:"Back to Login"})]})]})})]}):u?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"spotlight spotlight-1"}),s.jsx("div",{className:"spotlight spotlight-2"}),s.jsx("div",{className:"spotlight spotlight-3"})]}),s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"glass rounded-2xl shadow-2xl p-8 text-center relative z-10",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(Ts,{className:"h-8 w-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Password Reset Successful!"}),s.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"Your password has been successfully updated. You can now sign in with your new password."}),s.jsx("button",{onClick:k,className:"w-full btn-success btn-large",children:"Go to Login"})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"spotlight spotlight-1"}),s.jsx("div",{className:"spotlight spotlight-2"}),s.jsx("div",{className:"spotlight spotlight-3"})]}),s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("button",{onClick:k,className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600 transition-colors mb-8 relative z-10",children:[s.jsx(Kr,{className:"h-5 w-5"}),s.jsx("span",{children:"Back to Login"})]}),s.jsxs("div",{className:"glass rounded-2xl shadow-2xl p-8 relative z-10",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(Ze,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Set New Password"}),s.jsx("p",{className:"text-gray-600",children:"Create a strong password for your account"})]}),c&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center space-x-3",children:[s.jsx(yr,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),s.jsx("span",{className:"text-red-700 text-sm",children:c})]}),s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:r?"text":"password",name:"newPassword",required:!0,value:e.newPassword,onChange:y,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Enter new password"}),s.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r?s.jsx(Tt,{className:"h-5 w-5"}):s.jsx(Pe,{className:"h-5 w-5"})})]}),e.newPassword&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all bg-${x}-500`,style:{width:`${b/5*100}%`}})}),s.jsx("span",{className:`text-xs text-${x}-600`,children:j})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use 8+ characters with uppercase, lowercase, numbers, and symbols"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:a?"text":"password",name:"confirmPassword",required:!0,value:e.confirmPassword,onChange:y,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white/50 backdrop-blur-sm",placeholder:"Confirm new password"}),s.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?s.jsx(Tt,{className:"h-5 w-5"}):s.jsx(Pe,{className:"h-5 w-5"})})]}),e.confirmPassword&&s.jsx("div",{className:"mt-2",children:e.newPassword===e.confirmPassword?s.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[s.jsx(Ts,{className:"h-3 w-3 mr-1"}),"Passwords match"]}):s.jsxs("p",{className:"text-xs text-red-600 flex items-center",children:[s.jsx(yr,{className:"h-3 w-3 mr-1"}),"Passwords do not match"]})})]}),s.jsx("button",{type:"submit",disabled:o,className:"w-full btn-success btn-large",children:o?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"loading-spinner-white"}),s.jsx("span",{children:"Updating Password..."})]}):"Update Password"})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("p",{className:"text-gray-600 text-sm",children:["Remember your password?"," ",s.jsx("a",{href:"/login",className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent hover:from-blue-700 hover:to-indigo-700 font-semibold transition-all",children:"Sign In"})]})})]})]})]})},Fu=new Map,tj=5*60*1e3,rj="https://iutxllhudjckcaiwabud.supabase.co/functions/v1/manage-attachment";async function sj(e){const t=Fu.get(e);if(t&&t.expiresAt>Date.now()+tj)return t.url;try{const{data:{session:r}}=await A.auth.getSession();if(!r)return console.warn("No active session for image URL generation"),null;const n=await fetch(`${rj}?attachmentId=${e}`,{method:"GET",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!n.ok)return console.error("Failed to get signed URL:",n.status),null;const i=(await n.json()).downloadUrl;return i?(Fu.set(e,{url:i,expiresAt:Date.now()+55*60*1e3}),i):null}catch(r){return console.error("Error fetching signed image URL:",r),null}}const Di=({attachmentId:e,alt:t="Order attachment",className:r="w-12 h-12"})=>{const[n,a]=g.useState(null),[i,o]=g.useState(!0),[l,c]=g.useState(!1);g.useEffect(()=>{let u=!0;return(async()=>{if(!e){o(!1);return}try{o(!0),c(!1);const m=await sj(e);u&&(m?a(m):c(!0),o(!1))}catch(m){console.error("Error loading image:",m),u&&(c(!0),o(!1))}})(),()=>{u=!1}},[e]);const d=Os("order");return s.jsx("div",{className:`${r} rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center`,children:i?s.jsx("div",{className:"animate-pulse bg-gray-200 w-full h-full"}):!e||l||!n?s.jsx("img",{src:d,alt:"No image available",className:"w-full h-full object-contain"}):s.jsx("img",{src:n,alt:t,className:"w-full h-full object-cover",onError:u=>{u.target.src=d}})})};function xp({orderId:e,orderNumber:t,attachments:r,onAttachmentsChange:n,canUpload:a=!0,canDelete:i=!1,pendingDeletions:o=[],onPendingDeletionsChange:l,deferDeletion:c=!1,onConfirmDelete:d}){const[u,h]=g.useState(!1),[m,p]=g.useState(!1),[w,b]=g.useState([]);g.useState({});const j=N=>{if(N.target.files){const S=Array.from(N.target.files).filter(C=>C.size>20*1024*1024?(H.error(`${C.name} exceeds 20MB limit`),!1):!0);b(C=>[...C,...S])}},x=N=>{b(_=>_.filter((S,C)=>C!==N))},y=async()=>{if(w.length===0)return;h(!0);let N=0;for(const _ of w)try{await fp(e,t,_),N++,b(S=>S.filter(C=>C!==_))}catch(S){console.error("Upload error:",S),H.error(`Failed to upload ${_.name}`)}h(!1),N>0&&(H.success(`Successfully uploaded ${N} file(s)`),n())},f=async N=>{try{await Gb(N.id,N.original_filename)}catch(_){console.error("Download error:",_),H.error("Failed to download file")}},v=async(N,_)=>{if(c&&l)o.includes(N)?(l(o.filter(S=>S!==N)),H.success("Removed from deletion queue")):(l([...o,N]),H.success("Marked for deletion"));else{if(!confirm(`Are you sure you want to delete ${_}?`))return;try{await pp(N),H.success("Attachment deleted successfully"),n()}catch(S){console.error("Delete error:",S),H.error("Failed to delete attachment")}}},k=async()=>{if(!(!d||o.length===0)){p(!0);try{await d()}catch(N){console.error("Delete confirmation error:",N)}finally{p(!1)}}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Attachments"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[i&&c&&o.length>0&&d&&s.jsx("button",{type:"button",onClick:k,disabled:m,className:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),s.jsx("span",{children:"Deleting..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Vt,{className:"h-4 w-4 mr-2"}),s.jsxs("span",{children:["Confirm Delete (",o.length,")"]})]})}),a&&s.jsxs("label",{className:"cursor-pointer inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(ep,{className:"h-4 w-4 mr-2"}),"Add Files",s.jsx("input",{type:"file",multiple:!0,onChange:j,className:"hidden",disabled:u})]})]})]}),w.length>0&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"text-sm font-medium text-blue-900",children:["Selected Files (",w.length,")"]}),s.jsx("button",{type:"button",onClick:y,disabled:u,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Uploading...":"Upload All"})]}),s.jsx("div",{className:"space-y-2",children:w.map((N,_)=>s.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s.jsx(Ou,{className:"h-4 w-4 text-blue-600 flex-shrink-0"}),s.jsx("span",{className:"text-sm text-gray-900 truncate",children:N.name}),s.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:Mu(N.size)})]}),!u&&s.jsx("button",{type:"button",onClick:()=>x(_),className:"ml-2 text-red-600 hover:text-red-800",children:s.jsx(Ue,{className:"h-4 w-4"})})]},_))})]}),r.length===0?s.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-md border border-gray-200",children:[s.jsx(Ou,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No attachments yet"})]}):s.jsx("div",{className:"space-y-2",children:r.map(N=>{const _=o.includes(N.id);return s.jsxs("div",{className:`flex items-center justify-between p-3 bg-white border rounded-md hover:bg-gray-50 transition-all ${_?"border-red-300 bg-red-50 opacity-60":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[s.jsx("span",{className:`text-2xl flex-shrink-0 ${_?"line-through":""}`,children:Hb(N.mime_type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm font-medium truncate ${_?"line-through text-gray-500":"text-gray-900"}`,children:N.original_filename}),s.jsxs("p",{className:"text-xs text-gray-500",children:[Mu(N.file_size)," •",new Date(N.uploaded_at).toLocaleDateString(),_&&s.jsx("span",{className:"text-red-600 ml-2 font-semibold",children:"• Will be deleted"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[s.jsx("button",{type:"button",onClick:()=>f(N),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded",title:"Download",disabled:_,children:s.jsx(Xw,{className:"h-4 w-4"})}),i&&s.jsx("button",{type:"button",onClick:()=>v(N.id,N.original_filename),className:`p-2 hover:bg-red-50 rounded ${_?"text-orange-600 hover:text-orange-800":"text-red-600 hover:text-red-800"}`,title:_?"Undo deletion":"Delete",children:s.jsx(Vt,{className:"h-4 w-4"})})]})]},N.id)})})]})}const Mi=({isOpen:e,onClose:t,order:r})=>{var p;const[n,a]=ue.useState(null),[i,o]=ue.useState([]),[l,c]=ue.useState(!1),[d,u]=ue.useState([]);if(ue.useEffect(()=>{const w=async()=>{try{const x=await fe();if(x){const y=await $e(x.id);y&&a(y)}}catch(x){console.error("Error checking user:",x)}},b=async()=>{if(r!=null&&r.id)try{c(!0);const x=await up(r.id);o(x)}catch(x){console.error("Error fetching order comments:",x)}finally{c(!1)}},j=async()=>{if(r!=null&&r.id)try{const x=await Ol(r.id);u(x)}catch(x){console.error("Error fetching attachments:",x)}};e&&(w(),b(),j())},[e]),!e||!r)return null;const h=w=>{switch(w){case"new":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-purple-100 text-purple-800";case"under_review":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=w=>{switch(w){case"paid":return"bg-green-100 text-green-800";case"unpaid":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Order Details"}),s.jsx("p",{className:"text-gray-600",children:r.order_number})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ue,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Order Summary"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Vn,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Created"}),s.jsx("p",{className:"font-medium text-gray-800",children:new Date(r.created_at).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Et,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Order Type"}),s.jsx("p",{className:"font-medium text-gray-800 capitalize",children:r.order_type==="custom"?"Custom Design":"Catalog Item"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(br,{className:"h-5 w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h(r.status)}`,children:(r.status||"unknown").replace("_"," ")})]})]}),["admin","customer"].includes(n==null?void 0:n.role)&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(br,{className:"h-5 w-5 text-indigo-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Payment Status"}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m(r.payment_status||"unpaid")}`,children:(r.payment_status||"unpaid").replace("_"," ")})]})]})]})]}),r.custom_description&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Design Requirements"}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsx("p",{className:"text-gray-700 leading-relaxed",children:r.custom_description})})]}),r.file_urls&&r.file_urls.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Attached Files"}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsx("div",{className:"space-y-2",children:r.file_urls.map((w,b)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Fc,{className:"h-4 w-4 text-gray-500"}),s.jsxs("a",{href:w,download:`attachment-${b+1}`,className:"text-blue-600 hover:text-blue-800 underline",children:["Attachment ",b+1]})]},b))})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Specifications"}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.apparel_type_name&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Apparel Type"}),s.jsx("p",{className:"font-medium text-gray-800 capitalize",children:r.apparel_type_name})]}),r.custom_width&&r.custom_height&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Custom Dimensions"}),s.jsxs("p",{className:"font-medium text-gray-800",children:[r.custom_width,'" x ',r.custom_height,'"']})]})]})})]}),n&&["admin","sales_rep","designer"].includes(n.role)&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Order Comments"}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:l?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-2"}),s.jsx("span",{className:"text-gray-600 text-sm",children:"Loading comments..."})]}):i.length>0?s.jsx("div",{className:"space-y-4",children:i.map(w=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gn,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium text-gray-800 text-sm",children:w.author_name})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[new Date(w.created_at).toLocaleDateString()," ",new Date(w.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),s.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:w.content})]},w.id))}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx(gn,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No comments yet"})]})})]}),s.jsx("div",{children:s.jsx(xp,{orderId:r.id,orderNumber:r.order_number,attachments:d,onAttachmentsChange:async()=>{try{const w=await Ol(r.id);u(w)}catch(w){console.error("Error refreshing attachments:",w)}},canUpload:!0,canDelete:!1})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Order Total"}),s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",((p=r.total_amount)==null?void 0:p.toFixed(2))||"0.00"]})]}),(n==null?void 0:n.role)==="admin"&&(r.assigned_sales_rep_name||r.assigned_designer_name)&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Assignment"}),s.jsxs("div",{className:"space-y-3",children:[r.assigned_sales_rep_name&&r.assigned_sales_rep_name!=="Unassigned"&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Sales Representative"}),s.jsx("p",{className:"font-medium text-gray-800",children:r.assigned_sales_rep_name})]}),r.assigned_designer_name&&r.assigned_designer_name!=="Unassigned"&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Designer"}),s.jsx("p",{className:"font-medium text-gray-800",children:r.assigned_designer_name})]}),(!r.assigned_sales_rep_name||r.assigned_sales_rep_name==="Unassigned")&&(!r.assigned_designer_name||r.assigned_designer_name==="Unassigned")&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Assignment Status"}),s.jsx("p",{className:"font-medium text-gray-400",children:"Unassigned"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Customer Info"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Name:"}),s.jsx("br",{}),s.jsx("span",{className:"text-gray-800",children:r.customer_name})]}),r.customer_company_name&&s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Company:"}),s.jsx("br",{}),s.jsx("span",{className:"text-gray-800",children:r.customer_company_name})]}),(n==null?void 0:n.role)==="admin"&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Email:"}),s.jsx("br",{}),s.jsx("span",{className:"text-gray-800",children:r.customer_email})]}),r.customer_phone&&s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Phone:"}),s.jsx("br",{}),s.jsx("span",{className:"text-gray-800",children:r.customer_phone})]})]})]})]})]})]})})]})})]})},Vc=({isOpen:e,onClose:t,order:r,currentUser:n,onSuccess:a})=>{const[i,o]=g.useState({order_type:"",status:"",apparel_type_id:"",assigned_sales_rep_id:"",assigned_designer_id:"",total_amount:0,custom_width:0,custom_height:0}),[l,c]=g.useState([]),[d,u]=g.useState([]),[h,m]=g.useState([]),[p,w]=g.useState(n||null),[b,j]=g.useState(!1),[x,y]=g.useState(!1),[f,v]=g.useState(""),[k,N]=g.useState(!1),[_,S]=g.useState([]),[C,P]=g.useState(""),[D,T]=g.useState(!1),[R,V]=g.useState([]),[E,M]=g.useState([]);g.useEffect(()=>{n?w(n):Y(),e&&r&&(o({order_type:r.order_type||"custom",status:r.status,apparel_type_id:r.apparel_type_id||"",assigned_sales_rep_id:r.assigned_sales_rep_id||"",assigned_designer_id:r.assigned_designer_id||"",total_amount:r.total_amount||0,custom_width:r.custom_width||0,custom_height:r.custom_height||0}),v(""),L(),n||Y(),$(),B())},[e,r,n]);const Y=async()=>{try{const W=await fe();if(W){const Ne=await $e(W.id);w(Ne)}}catch(W){console.error("Error fetching current user:",W)}},$=async()=>{if(r)try{N(!0);const W=await up(r.id);S(W)}catch(W){console.error("Error fetching order comments:",W)}finally{N(!1)}},B=async()=>{if(r)try{const W=await Ol(r.id);V(W)}catch(W){console.error("Error fetching attachments:",W)}},z=async()=>{if(!(!r||!C.trim()||!p))try{T(!0),await Ab(r.id,p.id,C.trim()),H.success("Comment added successfully"),P(""),await $()}catch(W){console.error("Error adding comment:",W),H.error("Failed to add comment"),v("Failed to add comment. Please try again.")}finally{T(!1)}},L=async()=>{try{j(!0);const[W,Ne,Qe]=await Promise.all([Wc(),op(),qc()]);c(W),u(Ne),m(Qe)}catch(W){console.error("Error fetching assignment options:",W),v("Failed to load assignment options")}finally{j(!1)}},O=W=>{const{name:Ne,value:Qe}=W.target;o(ke=>({...ke,[Ne]:W.target.type==="number"?parseFloat(Qe)||0:Qe}))},X=async()=>{if(E.length===0)return;let W=0,Ne=0;for(const Qe of E)try{await pp(Qe),W++}catch(ke){console.error("Error deleting attachment:",ke),Ne++}W>0&&(H.success(`Successfully deleted ${W} attachment(s)`),M([]),await B()),Ne>0&&H.error(`Failed to delete ${Ne} attachment(s)`)},he=async W=>{if(W.preventDefault(),!r)return;if((r.status==="completed"||r.status==="cancelled")&&(p==null?void 0:p.role)!=="admin"&&(p==null?void 0:p.role)!=="sales_rep"){v("Only administrators and sales representatives can edit completed or cancelled orders.");return}if(i.status==="in_progress"&&!i.assigned_designer_id){v('Please assign a designer before setting order to "In Progress".');return}const Ne={...i,apparel_type_id:i.apparel_type_id||null,assigned_sales_rep_id:i.assigned_sales_rep_id||null,assigned_designer_id:i.assigned_designer_id||null};y(!0),v("");try{await xb(r.id,Ne),H.success("Order updated successfully"),a(),t()}catch(Qe){console.error("Error updating order:",Qe);let ke="Failed to update order. Please try again.";if(Qe.message){const Le=Qe.message.toLowerCase();Le.includes("invalid input syntax for type uuid")||Le.includes("uuid")?Le.includes("designer")||i.assigned_designer_id===""?ke="Please select a designer":Le.includes("sales_rep")||Le.includes("sales rep")||i.assigned_sales_rep_id===""?ke="Please select a sales representative":Le.includes("apparel")||i.apparel_type_id===""?ke="Please select an apparel type":ke="Please fill in all required fields correctly":Le.includes("designer")?ke="Please assign a designer":Le.includes("sales_rep")||Le.includes("sales rep")?ke="Please assign a sales representative":Le.includes("apparel_type")||Le.includes("apparel type")?ke="Please select an apparel type":Le.includes("total_amount")||Le.includes("total amount")?ke="Total amount must be a valid positive number":Le.includes("permission")?ke="You do not have permission to perform this action":Le.includes("foreign key")?ke="Please ensure all selections are valid":ke=Qe.message}H.error(ke),v(ke)}finally{y(!1)}};if(!e||!r)return null;const ge=(p==null?void 0:p.role)==="designer",st=r.status==="completed"||r.status==="cancelled",q=(p==null?void 0:p.role)==="admin"||(p==null?void 0:p.role)==="sales_rep",ne=st&&!q,be=(p==null?void 0:p.role)==="sales_rep"&&r.assigned_sales_rep_id===p.id,ht=(p==null?void 0:p.role)==="admin"||be;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Order"}),s.jsx("p",{className:"text-gray-600",children:r.order_number})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:x,children:s.jsx(Ue,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:he,className:"p-6",children:[f&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700 text-sm",children:f})}),b?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"loading-spinner mr-2"}),s.jsx("span",{className:"text-gray-600",children:"Loading order data..."})]}):s.jsxs(s.Fragment,{children:[ne&&s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"bg-orange-100 p-1 rounded",children:s.jsx(Ue,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-orange-800 font-medium text-sm",children:"Edit Restricted"}),s.jsxs("p",{className:"text-orange-700 text-sm",children:["Only administrators and sales representatives can edit ",r.status," orders."]})]})]})}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Customer Information"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Customer Name"}),s.jsx("p",{className:"font-medium text-gray-900",children:r.customer_name})]}),(p==null?void 0:p.role)==="admin"&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("p",{className:"font-medium text-gray-900",children:r.customer_email})]}),(p==null?void 0:p.role)==="admin"&&r.customer_phone&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),s.jsx("p",{className:"font-medium text-gray-900",children:r.customer_phone})]}),r.customer_company_name&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Company"}),s.jsx("p",{className:"font-medium text-gray-900",children:r.customer_company_name})]})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Type"}),s.jsxs("select",{name:"order_type",value:i.order_type,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:ge||ne,children:[s.jsx("option",{value:"custom",children:"Custom"}),s.jsx("option",{value:"catalog",children:"Catalog"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),s.jsxs("select",{name:"status",value:i.status,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:ne,required:!0,children:[!ge&&s.jsx("option",{value:"new",children:"New"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"under_review",children:"Under Review"}),!ge&&s.jsx("option",{value:"completed",children:"Completed"}),!ge&&s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apparel Type"}),s.jsxs("select",{name:"apparel_type_id",value:i.apparel_type_id,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:ge||ne,children:[s.jsx("option",{value:"",children:"Select Type"}),h.map(W=>s.jsx("option",{value:W.id,children:W.type_name},W.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Width (inches)"}),s.jsx("input",{type:"number",name:"custom_width",value:i.custom_width,onChange:O,step:"0.1",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:ge||ne,placeholder:"Width"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Height (inches)"}),s.jsx("input",{type:"number",name:"custom_height",value:i.custom_height,onChange:O,step:"0.1",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:ge||ne,placeholder:"Height"})]}),(p==null?void 0:p.role)==="admin"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Sales Rep"}),s.jsxs("select",{name:"assigned_sales_rep_id",value:i.assigned_sales_rep_id,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"",children:"Unassigned"}),l.map(W=>s.jsx("option",{value:W.id,children:W.full_name},W.id))]})]}),!ge&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Designer"}),s.jsxs("select",{name:"assigned_designer_id",value:i.assigned_designer_id,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:ne,children:[s.jsx("option",{value:"",children:"Unassigned"}),d.map(W=>s.jsx("option",{value:W.id,children:W.full_name},W.id))]})]}),!ge&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Amount"}),s.jsx("input",{type:"number",name:"total_amount",value:i.total_amount,onChange:O,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:ne})]})]}),r.custom_description&&s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Design Description"}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:s.jsx("p",{className:"text-gray-700",children:r.custom_description})})]}),p&&["admin","sales_rep","designer"].includes(p.role)&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(gn,{className:"h-4 w-4 inline mr-1"}),"Order Comments"]}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4 max-h-48 overflow-y-auto",children:k?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-2"}),s.jsx("span",{className:"text-gray-600 text-sm",children:"Loading comments..."})]}):_.length>0?s.jsx("div",{className:"space-y-3",children:_.map(W=>s.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gn,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium text-gray-800 text-sm",children:W.author_name})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[new Date(W.created_at).toLocaleDateString()," ",new Date(W.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),s.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:W.content})]},W.id))}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx(gn,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No comments yet"})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:C,onChange:W=>P(W.target.value),placeholder:"Add a comment about this order...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none"}),s.jsx("button",{type:"button",onClick:z,disabled:!C.trim()||D,className:"btn-primary text-sm flex items-center space-x-2",children:D?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loading-spinner-white w-4 h-4"}),s.jsx("span",{children:"Adding..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ri,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Comment"})]})})]})]}),s.jsx("div",{className:"mb-6",children:s.jsx(xp,{orderId:r.id,orderNumber:r.order_number,attachments:R,onAttachmentsChange:B,canUpload:!ne,canDelete:ht,pendingDeletions:E,onPendingDeletionsChange:M,deferDeletion:!0,onConfirmDelete:X})})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"btn-secondary text-sm",disabled:x,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn-primary text-sm flex items-center space-x-2",disabled:x||b||ne,children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loading-spinner-white w-4 h-4"}),s.jsx("span",{children:"Updating..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(zs,{className:"h-4 w-4"}),s.jsx("span",{children:ne?"Edit Restricted":"Update Order"})]})})]})]})]})})]})},nj=({filter:e,selectedValues:t,onChange:r})=>{var c,d,u;const[n,a]=g.useState(!1),i=g.useRef(null);g.useEffect(()=>{const h=m=>{i.current&&!i.current.contains(m.target)&&a(!1)};return n&&document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[n]);const o=h=>{const m=t.includes(h)?t.filter(p=>p!==h):[...t,h];r(m)},l=t.length===0?e.placeholder||`All ${e.label}`:t.length===1?(d=(c=e.options)==null?void 0:c.find(h=>h.value===t[0]))==null?void 0:d.label:`${t.length} selected`;return s.jsxs("div",{ref:i,className:"relative",children:[s.jsxs("button",{type:"button",onClick:h=>{h.preventDefault(),a(!n)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm text-left bg-white flex items-center justify-between",children:[s.jsx("span",{className:"truncate",children:l}),s.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-20 max-h-48 overflow-y-auto",children:s.jsx("div",{className:"p-2",children:(u=e.options)==null?void 0:u.map(h=>{const m=t.includes(h.value);return s.jsxs("div",{onClick:p=>{p.preventDefault(),p.stopPropagation(),o(h.value)},className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded cursor-pointer transition-colors",children:[s.jsx("input",{type:"checkbox",checked:m,onChange:()=>{},onClick:p=>p.stopPropagation(),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500 pointer-events-none"}),s.jsx("span",{className:"text-sm text-gray-700",children:h.label})]},h.value)})})})]})},Yt=({searchValue:e,onSearchChange:t,searchPlaceholder:r="Search...",filters:n,filterValues:a,onFilterChange:i,onClearFilters:o,resultCount:l,loading:c=!1})=>{const d=e||Object.entries(a).some(([h,m])=>Array.isArray(m)?m.length>0:m!==""&&m!==null&&m!==void 0),u=h=>{var w;const m=a[h.key],p=m??(h.multi?[]:"");switch(h.type){case"search":return s.jsxs("div",{className:"relative",children:[s.jsx(Pl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"text",placeholder:h.placeholder||h.label,value:Array.isArray(p)?"":p,onChange:b=>i(h.key,b.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]},h.key);case"date":return s.jsx("input",{type:"date",value:Array.isArray(p)?"":p,onChange:b=>i(h.key,b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"},h.key);case"number":return s.jsx("input",{type:"number",placeholder:h.placeholder||h.label,value:Array.isArray(p)?"":p,onChange:b=>i(h.key,b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm",min:"0",step:"0.01"},h.key);default:if(h.multi){const b=Array.isArray(p)?p:[];return s.jsx(nj,{filter:h,selectedValues:b,onChange:j=>i(h.key,j)},h.key)}return s.jsxs("select",{value:Array.isArray(p)?"":p,onChange:b=>i(h.key,b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm",children:[s.jsx("option",{value:"",children:h.placeholder||`All ${h.label}`}),(w=h.options)==null?void 0:w.map(b=>s.jsx("option",{value:b.value,children:b.label},b.value))]},h.key)}};return s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[s.jsxs("div",{className:"relative lg:col-span-2",children:[s.jsx(Pl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),s.jsx("input",{type:"text",placeholder:r,value:e,onChange:h=>t(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),n.map(u),s.jsxs("div",{className:"flex items-center justify-between lg:col-span-2 xl:col-span-1",children:[d&&s.jsxs("button",{type:"button",onClick:h=>{h.preventDefault(),o()},className:"flex items-center space-x-1 px-3 py-2 text-sm text-gray-600 hover:text-red-600 transition-colors rounded-lg hover:bg-red-50",children:[s.jsx(Ue,{className:"h-4 w-4"}),s.jsx("span",{children:"Clear"})]}),l!==void 0&&s.jsxs("div",{className:"flex items-center text-gray-600 text-sm",children:[s.jsx(El,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:c?"Loading...":`${l} results`})]})]})]})})};function Zt({data:e,columns:t,onParamsChange:r,currentParams:n,loading:a=!1}){const i=u=>{const h=n.sortBy===u&&n.sortOrder==="asc"?"desc":"asc";r({sortBy:u,sortOrder:h,page:1})},o=u=>{r({page:u})},l=u=>{r({limit:u,page:1})},c=u=>n.sortBy!==u?s.jsx(qw,{className:"h-4 w-4"}):n.sortOrder==="asc"?s.jsx(Ww,{className:"h-4 w-4"}):s.jsx(Bw,{className:"h-4 w-4"}),d=(u,h)=>{if(h.render)return h.render(u);const m=u[h.key];return m==null?"-":String(m)};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsx("tr",{children:t.map(u=>s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u.sortable?s.jsxs("button",{onClick:()=>i(String(u.key)),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[s.jsx("span",{children:u.label}),c(String(u.key))]}):u.label},String(u.key)))})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a?s.jsx("tr",{children:s.jsx("td",{colSpan:t.length,className:"px-6 py-12 text-center",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"loading-spinner-small mr-3"}),s.jsx("span",{className:"text-gray-500",children:"Loading..."})]})})}):e.data.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:t.length,className:"px-6 py-12 text-center text-gray-500",children:"No data found"})}):e.data.map((u,h)=>s.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:t.map(m=>s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d(u,m)},String(m.key)))},u.id||h))})]})}),e.totalPages>1&&s.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[s.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.jsx("button",{onClick:()=>o(e.page-1),disabled:e.page<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),s.jsx("button",{onClick:()=>o(e.page+1),disabled:e.page>=e.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),s.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",s.jsx("span",{className:"font-medium",children:(e.page-1)*e.limit+1})," to"," ",s.jsx("span",{className:"font-medium",children:Math.min(e.page*e.limit,e.total)})," ","of ",s.jsx("span",{className:"font-medium",children:e.total})," results"]}),s.jsxs("select",{value:e.limit,onChange:u=>l(Number(u.target.value)),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:[s.jsx("option",{value:10,children:"10 per page"}),s.jsx("option",{value:25,children:"25 per page"}),s.jsx("option",{value:50,children:"50 per page"})]})]}),s.jsx("div",{children:s.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[s.jsx("button",{onClick:()=>o(e.page-1),disabled:e.page<=1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(Qw,{className:"h-5 w-5"})}),Array.from({length:Math.min(5,e.totalPages)},(u,h)=>{const m=Math.max(1,Math.min(e.totalPages-4,e.page-2))+h;return m>e.totalPages?null:s.jsx("button",{onClick:()=>o(m),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${m===e.page?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:m},m)}),s.jsx("button",{onClick:()=>o(e.page+1),disabled:e.page>=e.totalPages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(Jw,{className:"h-5 w-5"})})]})})]})]})]})}function Gc(){const e=new Date;return e.setDate(1),e.setHours(0,0,0,0),e}async function ts(e,t){let r=A.from(e).select("*",{count:"exact",head:!0});t&&Object.entries(t).forEach(([a,i])=>{r=r.eq(a,i)});const{count:n}=await r;return n||0}async function yp(){var t;const e=Gc();try{const[r,n,a,i,o,l,c]=await Promise.all([ts("orders",{created_at:{gte:e.toISOString()}}),ts("customers",{created_at:{gte:e.toISOString()}}),A.from("orders").select("total_amount").gte("created_at",e.toISOString()),ts("orders",{status:"in_progress"}),ts("products",{status:"active"}),ts("orders",{status:"new"}),ts("orders",{status:"under_review"})]),d=((t=a.data)==null?void 0:t.reduce((u,h)=>u+(h.total_amount||0),0))||0;return{totalOrdersThisMonth:r,newCustomersThisMonth:n,totalRevenueThisMonth:d,inProgressOrders:i,activeProducts:o,newOrdersCount:l,underReviewOrdersCount:c}}catch(r){return console.error("Error fetching admin stats:",r),{totalOrdersThisMonth:0,newCustomersThisMonth:0,totalRevenueThisMonth:0,inProgressOrders:0,activeProducts:0,newOrdersCount:0,underReviewOrdersCount:0}}}async function aj(e){const t=Gc();try{const{data:r,error:n}=await A.from("customers").select("id").eq("assigned_sales_rep_id",e);if(n)throw n;const a=(r==null?void 0:r.map(d=>d.id))||[];if(a.length===0)return{totalOrdersThisMonth:0,newOrdersCount:0,inProgressOrdersCount:0,underReviewOrdersCount:0};const[i,o,l,c]=await Promise.all([A.from("orders").select("*",{count:"exact",head:!0}).in("customer_id",a).gte("created_at",t.toISOString()),A.from("orders").select("*",{count:"exact",head:!0}).in("customer_id",a).eq("status","new"),A.from("orders").select("*",{count:"exact",head:!0}).in("customer_id",a).eq("status","in_progress"),A.from("orders").select("*",{count:"exact",head:!0}).in("customer_id",a).eq("status","under_review")]);return{totalOrdersThisMonth:i.count||0,newOrdersCount:o.count||0,inProgressOrdersCount:l.count||0,underReviewOrdersCount:c.count||0}}catch(r){return console.error("Error fetching sales rep stats:",r),{totalOrdersThisMonth:0,newOrdersCount:0,inProgressOrdersCount:0,underReviewOrdersCount:0}}}async function ij(e){const t=Gc();try{const[r,n]=await Promise.all([A.from("orders").select("*",{count:"exact",head:!0}).eq("assigned_designer_id",e).gte("created_at",t.toISOString()),A.from("orders").select("*",{count:"exact",head:!0}).eq("assigned_designer_id",e).eq("status","in_progress")]);return{totalOrdersThisMonth:r.count||0,inProgressOrdersCount:n.count||0}}catch(r){return console.error("Error fetching designer stats:",r),{totalOrdersThisMonth:0,inProgressOrdersCount:0}}}async function Uu(e,t){switch(e){case"admin":return yp();case"sales_rep":if(!t)throw new Error("User ID required for sales rep stats");return aj(t);case"designer":if(!t)throw new Error("User ID required for designer stats");return ij(t);default:throw new Error("Invalid role")}}const oj=(e={})=>{const{autoRefresh:t=!1,refreshInterval:r=3e4}=e,[n,a]=g.useState({totalOrdersThisMonth:0,newCustomersThisMonth:0,totalRevenueThisMonth:0,inProgressOrders:0,activeProducts:0,newOrdersCount:0,underReviewOrdersCount:0}),[i,o]=g.useState([]),[l,c]=g.useState(!1),[d,u]=g.useState(null),h=g.useRef(null),m=g.useRef(!1),p=g.useCallback(async(w=!1)=>{if(!(m.current&&!w)){m.current=!0,c(!0),u(null);try{const[b,j]=await Promise.all([yp(),hb(10)]);a(b),o(j)}catch(b){u(b.message||"Failed to fetch admin data"),console.error("Error fetching admin data:",b)}finally{c(!1),m.current=!1}}},[]);return g.useEffect(()=>{p(!0)},[p]),g.useEffect(()=>{if(!t)return;const w=()=>{h.current=setTimeout(()=>{p(),w()},r)};return w(),()=>{h.current&&clearTimeout(h.current)}},[t,r,p]),g.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]),{stats:n,recentOrders:i,loading:l,error:d,refreshData:p}},Xt=(e,t,r)=>{const[n,a]=g.useState({data:[],total:0,page:1,limit:25,totalPages:0}),[i,o]=g.useState(t),[l,c]=g.useState(!1),[d,u]=g.useState(null),h=g.useCallback(lj(async w=>{c(!0),u(null);try{const b=await e(w);a(b)}catch(b){u(b.message||"Failed to fetch data"),console.error("Error fetching paginated data:",b)}finally{c(!1)}},300),[e]),m=g.useCallback(w=>{o(b=>{const j={...b,...w};return h(j),j})},[h]),p=g.useRef(!1);return g.useEffect(()=>{!p.current&&!(r!=null&&r.skipInitialFetch)&&(p.current=!0,h(i))},[]),{data:n,params:i,loading:l,error:d,updateParams:m,refetch:()=>h(i)}};function lj(e,t){let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e(...n),t)}}const cj=()=>{var st;const e=Ds(),[t,r]=g.useState(null),[n,a]=g.useState(!0),[i,o]=g.useState(null),{data:l,params:c,loading:d,error:u,updateParams:h,refetch:m}=Xt(Bc,{page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc",salesRepId:i||void 0,status:["new","under_review"]},{skipInitialFetch:!0}),[p,w]=g.useState({totalOrdersThisMonth:0,newOrdersCount:0,inProgressOrdersCount:0,underReviewOrdersCount:0}),[b,j]=g.useState(null),[x,y]=g.useState(!1),[f,v]=g.useState(!1),[k,N]=g.useState(null),[_,S]=g.useState({status:["new","under_review"],dateFrom:"",dateTo:"",customer:""}),[C]=g.useState({page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc",status:["new","under_review"]}),[P,D]=g.useState([]),[T,R]=g.useState([]),V=q=>{switch(q){case"blue":return{bg:"bg-blue-100",text:"text-blue-600"};case"green":return{bg:"bg-green-100",text:"text-green-600"};case"purple":return{bg:"bg-purple-100",text:"text-purple-600"};case"orange":return{bg:"bg-orange-100",text:"text-orange-600"};default:return{bg:"bg-gray-100",text:"text-gray-600"}}};g.useEffect(()=>{(async()=>{try{const ne=await fe();if(ne){const be=await $e(ne.id);if(be&&be.role==="sales_rep"){r(be),o(be.id);const ht=await Ru(be.id);w(ht);const[W,Ne]=await Promise.all([Wc(),op()]);D(W),R(Ne),h({salesRepId:be.id,status:["new","under_review"]})}else console.error("Access denied: User role is",be==null?void 0:be.role,"but sales_rep required"),window.location.href="/login"}else window.location.href="/login"}catch(ne){console.error("Error checking user:",ne),window.location.href="/login"}finally{a(!1)}})()},[]);const E=async()=>{try{await Dc(),window.location.href="/"}catch(q){console.error("Error signing out:",q)}};if(n)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"loading-spinner mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading dashboard..."})]})});const M=[{title:"Orders This Month",value:p.totalOrdersThisMonth.toString(),icon:Dr,color:"blue"},{title:"New Orders",value:p.newOrdersCount.toString(),icon:lb,color:"green"},{title:"In Progress Orders",value:p.inProgressOrdersCount.toString(),icon:Tl,color:"purple"},{title:"Under Review Orders",value:p.underReviewOrdersCount.toString(),icon:Gn,color:"orange"}],Y=[{key:"status",label:"Status",multi:!0,options:[{value:"new",label:"New"},{value:"in_progress",label:"In Progress"},{value:"under_review",label:"Under Review"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]},{key:"customer",label:"Customer",type:"search",placeholder:"Search by customer name..."},{key:"dateFrom",label:"From Date",type:"date"},{key:"dateTo",label:"To Date",type:"date"}],$=q=>{h(q)},B=q=>{h({search:q,page:1})},z=(q,ne)=>{if(q==="status"){const W=Array.isArray(ne)?ne:[];S(Qe=>({...Qe,[q]:W}));const Ne={page:1};W.length>0?Ne.status=W:Ne.status=void 0,h(Ne);return}const be=Array.isArray(ne)?ne.join(","):ne;S(W=>({...W,[q]:be}));const ht={page:1};q==="customer"?ht.customerSearch=be||void 0:q==="dateFrom"?ht.dateFrom=be||void 0:q==="dateTo"&&(ht.dateTo=be||void 0),h(ht)},L=()=>{S({status:["new","under_review"],dateFrom:"",dateTo:"",customer:""});const q={...C,salesRepId:t==null?void 0:t.id,status:["new","under_review"],customerSearch:void 0,dateFrom:void 0,dateTo:void 0};h(q)},O=q=>{N(q),v(!0)},X=q=>{j(q),y(!0)},he=q=>{switch(q){case"new":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-purple-100 text-purple-800";case"under_review":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ge=[{key:"image",label:"Image",render:q=>s.jsx(Di,{attachmentId:q.first_attachment_id,alt:"Order attachment"})},{key:"order_number",label:"Order Number",sortable:!0,render:q=>q.order_number||`ORD-${q.id.slice(0,8)}`},{key:"customer_name",label:"Customer Name",sortable:!0},{key:"total_amount",label:"Total",sortable:!0,render:q=>`$${(q.total_amount||0).toFixed(2)}`},{key:"status",label:"Status",sortable:!0,render:q=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${he(q.status)}`,children:q.status.replace("_"," ")})},{key:"assigned_designer_name",label:"Designer Assigned",render:q=>s.jsx("span",{className:`text-sm ${q.assigned_designer_name==="Unassigned"||!q.assigned_designer_name?"text-gray-400":"text-purple-600"}`,children:q.assigned_designer_name||"Unassigned"})},{key:"created_at",label:"Created At",sortable:!0,render:q=>new Date(q.created_at).toLocaleDateString()},{key:"actions",label:"Actions",render:q=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>O(q),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit Order",children:s.jsx(Jt,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>X(q),className:"text-green-600 hover:text-green-900 transition-colors",title:"View Details",children:s.jsx(Pe,{className:"h-4 w-4"})})]})}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:s.jsx(Tl,{className:"h-6 w-6 text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sales Dashboard"}),s.jsxs("button",{onClick:()=>e("/"),className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Go to Homepage",children:[s.jsx(Yf,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Home"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(ii,{}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:(t==null?void 0:t.full_name)||"Sales Rep"}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:(t==null?void 0:t.role)||"sales_rep"})]}),s.jsx("button",{onClick:()=>e("/profile"),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Profile Settings",children:s.jsx(Jf,{className:"h-5 w-5"})}),s.jsx("button",{onClick:E,className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Sign Out",children:s.jsx(Mc,{className:"h-5 w-5"})})]})]})]})})}),s.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Good morning, ",((st=t==null?void 0:t.full_name)==null?void 0:st.split(" ")[0])||"Sales Rep","!"]}),s.jsx("p",{className:"text-gray-600",children:"Here's your sales performance and customer activity."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:M.map((q,ne)=>{const be=q.icon,ht=V(q.color);return s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100",style:{animationDelay:`${ne*100}ms`},children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:`${ht.bg} p-3 rounded-lg`,children:s.jsx(be,{className:`h-6 w-6 ${ht.text}`})})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:q.value}),s.jsx("p",{className:"text-gray-600 text-sm",children:q.title})]},q.title)})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Customer Orders"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage orders from your assigned customers"})]})}),s.jsx(Yt,{searchValue:c.search||"",onSearchChange:B,searchPlaceholder:"Search by order number...",filters:Y,filterValues:_,onFilterChange:z,onClearFilters:L,resultCount:l.total,loading:d}),u&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:u})}),s.jsx(Zt,{data:l,columns:ge,onParamsChange:$,currentParams:c,loading:d})]})]}),s.jsx(Mi,{isOpen:x,onClose:()=>y(!1),order:b}),s.jsx(Vc,{isOpen:f,onClose:()=>v(!1),order:k,currentUser:t,onSuccess:()=>{v(!1),m(),t&&Ru(t.id).then(w)}})]})},dj=(e={})=>{const[t,r]=g.useState(null),[n,a]=g.useState(!0),[i,o]=g.useState(null);return g.useEffect(()=>{(async()=>{try{const c=await fe();if(!c){window.location.href=e.redirectTo||"/login";return}const d=await $e(c.id);if(!d){o("User profile not found"),window.location.href=e.redirectTo||"/login";return}if(e.requiredRole){const u=Array.isArray(e.requiredRole)?e.requiredRole:[e.requiredRole],h=d.role||"customer";if(!u.includes(h)){console.error("Access denied: User role is",h,"but required",u),window.location.href=e.redirectTo||"/login";return}}r(d)}catch(c){console.error("Error checking authentication:",c),o(c instanceof Error?c.message:"Authentication failed"),window.location.href=e.redirectTo||"/login"}finally{a(!1)}})()},[e.redirectTo,e.requiredRole]),{user:t,loading:n,error:i}},uj=(e,t)=>{const[r,n]=g.useState({totalOrdersThisMonth:0}),[a,i]=g.useState(!0),[o,l]=g.useState(null);return g.useEffect(()=>{(async()=>{try{i(!0);const u=await Uu(e,t);n(u)}catch(u){console.error("Error fetching dashboard stats:",u),l(u instanceof Error?u.message:"Failed to fetch stats")}finally{i(!1)}})()},[e,t]),{stats:r,loading:a,error:o,refetch:async()=>{try{const d=await Uu(e,t);n(d)}catch(d){console.error("Error refetching dashboard stats:",d)}}}},Kc=({title:e,headerIcon:t,headerIconColor:r="bg-blue-100 text-blue-600",user:n,activeTab:a,tabs:i,onTabChange:o,children:l})=>{var u;const c=Ds(),d=async()=>{try{await Dc(),window.location.href="/"}catch(h){console.error("Error signing out:",h)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`p-2 rounded-lg ${r}`,children:s.jsx(t,{className:"h-6 w-6"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e}),s.jsxs("button",{onClick:()=>c("/"),className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Go to Homepage",children:[s.jsx(Yf,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Home"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(ii,{}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:(n==null?void 0:n.full_name)||"User"}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:((u=n==null?void 0:n.role)==null?void 0:u.replace("_"," "))||"user"})]}),s.jsx("button",{onClick:()=>c("/profile"),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Profile Settings",children:s.jsx(Jf,{className:"h-5 w-5"})}),s.jsx("button",{onClick:d,className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Sign Out",children:s.jsx(Mc,{className:"h-5 w-5"})})]})]})]})})}),i&&i.length>0&&o&&s.jsx("nav",{className:"bg-white border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex space-x-8",children:i.map(h=>{const m=h.icon,p=a===h.id;return s.jsxs("button",{onClick:()=>o(h.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${p?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(m,{className:"h-5 w-5"}),s.jsx("span",{children:h.label})]},h.id)})})})}),s.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l})]})},hj=({message:e="Loading...",fullScreen:t=!0})=>{const r=s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"loading-spinner mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:e})]});return t?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r}):r},mj=e=>{switch(e){case"new":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-purple-100 text-purple-800";case"under_review":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},fj=e=>({blue:{bg:"bg-blue-100",text:"text-blue-600"},green:{bg:"bg-green-100",text:"text-green-600"},purple:{bg:"bg-purple-100",text:"text-purple-600"},orange:{bg:"bg-orange-100",text:"text-orange-600"},red:{bg:"bg-red-100",text:"text-red-600"},yellow:{bg:"bg-yellow-100",text:"text-yellow-600"}})[e]||{bg:"bg-gray-100",text:"text-gray-600"},pj=({title:e,value:t,icon:r,color:n,delay:a=0})=>{const i=fj(n);return s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100",style:{animationDelay:`${a}ms`},children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:`${i.bg} p-3 rounded-lg`,children:s.jsx(r,{className:`h-6 w-6 ${i.text}`})})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:t}),s.jsx("p",{className:"text-gray-600 text-sm",children:e})]})},gj=[{value:"new",label:"New"},{value:"in_progress",label:"In Progress"},{value:"under_review",label:"Under Review"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],zu={page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"},xj=()=>({key:"image",label:"Image",render:e=>s.jsx(Di,{attachmentId:e.first_attachment_id,alt:"Order attachment"})}),yj=()=>({key:"order_number",label:"Order Number",sortable:!0,render:e=>e.order_number||`ORD-${e.id.slice(0,8)}`}),vj=()=>({key:"status",label:"Status",sortable:!0,render:e=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${mj(e.status)}`,children:e.status.replace("_"," ")})}),wj=()=>({key:"created_at",label:"Created At",sortable:!0,render:e=>new Date(e.created_at).toLocaleDateString()}),bj=(e,t)=>({key:"actions",label:"Actions",render:r=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>e(r),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit Order",children:s.jsx(Jt,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>t(r),className:"text-green-600 hover:text-green-900 transition-colors",title:"View Details",children:s.jsx(Pe,{className:"h-4 w-4"})})]})}),jj=()=>{var V;const{user:e,loading:t}=dj({requiredRole:"designer"}),{stats:r,refetch:n}=uj("designer",e==null?void 0:e.id),{data:a,params:i,loading:o,error:l,updateParams:c,refetch:d}=Xt(Bc,{...zu,assignedDesignerId:(e==null?void 0:e.id)||void 0,status:["in_progress"]},{skipInitialFetch:!(e!=null&&e.id)}),[u,h]=g.useState(null),[m,p]=g.useState(!1),[w,b]=g.useState(!1),[j,x]=g.useState(null),[y,f]=g.useState({status:["in_progress"],dateFrom:"",dateTo:"",customer:""}),[v]=g.useState({...zu,status:["in_progress"]});if(g.useEffect(()=>{e!=null&&e.id&&!i.assignedDesignerId&&c({assignedDesignerId:e.id,status:["in_progress"]})},[e==null?void 0:e.id,i.assignedDesignerId,c]),t)return s.jsx(hj,{message:"Loading dashboard..."});const k=[{title:"Total Orders this Month",value:r.totalOrdersThisMonth,icon:Hw,color:"blue"},{title:"In-Progress Orders",value:r.inProgressOrdersCount||0,icon:Gn,color:"purple"}],N=[{key:"status",label:"Status",multi:!0,options:gj},{key:"customer",label:"Customer",type:"search",placeholder:"Search by customer name..."},{key:"dateFrom",label:"From Date",type:"date"},{key:"dateTo",label:"To Date",type:"date"}],_=E=>{c(E)},S=E=>{c({search:E,page:1})},C=(E,M)=>{if(E==="status"){const B=Array.isArray(M)?M:[];f(L=>({...L,[E]:B}));const z={page:1};B.length>0?z.status=B:z.status=void 0,c(z);return}const Y=Array.isArray(M)?M.join(","):M;f(B=>({...B,[E]:Y}));const $={page:1};E==="customer"?$.customerSearch=Y||void 0:E==="dateFrom"?$.dateFrom=Y||void 0:E==="dateTo"&&($.dateTo=Y||void 0),c($)},P=()=>{f({status:["in_progress"],dateFrom:"",dateTo:"",customer:""});const E={...v,assignedDesignerId:e==null?void 0:e.id,status:["in_progress"],customerSearch:void 0,dateFrom:void 0,dateTo:void 0};c(E)},D=E=>{x(E),b(!0)},T=E=>{h(E),p(!0)},R=[xj(),yj(),vj(),wj(),bj(D,T)];return s.jsxs(Kc,{title:"Designer Dashboard",headerIcon:Ii,headerIconColor:"bg-purple-100 text-purple-600",user:e,children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Good morning, ",((V=e==null?void 0:e.full_name)==null?void 0:V.split(" ")[0])||"Designer","!"]}),s.jsx("p",{className:"text-gray-600",children:"Here are your assigned orders and design projects."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:k.map((E,M)=>s.jsx(pj,{title:E.title,value:E.value.toString(),icon:E.icon,color:E.color,delay:M*100},E.title))}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"My Assigned Orders"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your design projects and orders"})]})}),s.jsx(Yt,{searchValue:i.search||"",onSearchChange:S,searchPlaceholder:"Search by order number...",filters:N,filterValues:y,onFilterChange:C,onClearFilters:P,resultCount:a.total,loading:o}),l&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:l})}),s.jsx(Zt,{data:a,columns:R,onParamsChange:_,currentParams:i,loading:o})]}),s.jsx(Mi,{isOpen:m,onClose:()=>p(!1),order:u}),s.jsx(Vc,{isOpen:w,onClose:()=>b(!1),order:j,currentUser:e,onSuccess:()=>{b(!1),d(),n()}})]})},_j=({children:e,activeTab:t,onTabChange:r})=>{const[n,a]=g.useState(null),[i,o]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const d=await fe();if(d){const u=await $e(d.id);u&&(u.role==="customer"||!u.role)?a(u):(console.error("Access denied: User role is",u==null?void 0:u.role),window.location.href="/login")}else window.location.href="/login"}catch(d){console.error("Error checking user:",d),window.location.href="/login"}finally{o(!1)}})()},[]);const l=[{id:"overview",label:"Overview",icon:ut},{id:"orders",label:"Orders",icon:Dr},{id:"invoices",label:"Invoices",icon:br}];return i?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"loading-spinner mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading dashboard..."})]})}):s.jsx(Kc,{title:"My Dashboard",headerIcon:ut,headerIconColor:"bg-blue-100 text-blue-600",user:n,activeTab:t,tabs:l,onTabChange:r,children:e})},Bu=()=>{const[e,t]=ue.useState([]),[r,n]=ue.useState(!0);if(ue.useEffect(()=>{(async()=>{try{const c=await fe();if(!c)return;const{data:d,error:u}=await A.from("orders").select(`
            *,
            apparel_type:apparel_types(type_name)
          `).eq("customer_id",c.id).order("created_at",{ascending:!1}).limit(10);if(u)throw u;t(d||[])}catch(c){console.error("Error fetching overview data:",c)}finally{n(!1)}})()},[]),r)return s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"loading-spinner mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading overview..."})]})});const a=l=>{switch(l){case"blue":return{bg:"bg-blue-100",text:"text-blue-600"};case"yellow":return{bg:"bg-yellow-100",text:"text-yellow-600"};case"green":return{bg:"bg-green-100",text:"text-green-600"};case"purple":return{bg:"bg-purple-100",text:"text-purple-600"};default:return{bg:"bg-gray-100",text:"text-gray-600"}}},i=[{title:"Total Orders",value:e.length.toString(),icon:Dr,color:"blue"},{title:"In Progress",value:e.filter(l=>["in_progress","under_review"].includes(l.status)).length.toString(),icon:Et,color:"yellow"},{title:"Completed",value:e.filter(l=>["completed"].includes(l.status)).length.toString(),icon:Dr,color:"green"},{title:"Total Spent",value:`$${e.reduce((l,c)=>l+(c.total_amount||0),0).toFixed(2)}`,icon:Jt,color:"purple"}],o=l=>{switch(l){case"new":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-purple-100 text-purple-800";case"under_review":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome back!"}),s.jsx("p",{className:"text-gray-600",children:"Here's an overview of your orders and account."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map((l,c)=>{const d=l.icon,u=a(l.color);return s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100",style:{animationDelay:`${c*100}ms`},children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:`${u.bg} p-3 rounded-lg`,children:s.jsx(d,{className:`h-6 w-6 ${u.text}`})})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:l.value}),s.jsx("p",{className:"text-gray-600 text-sm",children:l.title})]},l.title)})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsx("div",{className:"p-6 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Your last 10 orders"})]}),s.jsx("button",{onClick:()=>window.location.href="/customer/dashboard?tab=orders",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All Orders"})]})}),s.jsx("div",{className:"p-6",children:e.length>0?s.jsx("div",{className:"space-y-4",children:e.map(l=>{var c,d;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Dr,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:l.order_number||`ORD-${l.id.slice(0,8)}`}),s.jsxs("p",{className:"text-sm text-gray-500",children:[l.order_type==="custom"?"Custom Design":"Catalog Item"," • ",new Date(l.created_at).toLocaleDateString()]}),((c=l.apparel_type)==null?void 0:c.type_name)&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.apparel_type.type_name," • ",l.custom_width,'"×',l.custom_height,'"']})]})]}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-gray-900",children:["$",((d=l.total_amount)==null?void 0:d.toFixed(2))||"0.00"]}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o(l.status)}`,children:l.status.replace("_"," ")})]})})]},l.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Et,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500",children:"No orders yet"})]})})]})]})},Nj=()=>{const[e,t]=g.useState(null),[r,n]=g.useState(!1),[a,i]=g.useState(!1),[o,l]=g.useState(null),[c,d]=g.useState({status:[],dateFrom:"",dateTo:""}),[u]=g.useState({page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"}),{data:h,params:m,loading:p,error:w,updateParams:b,refetch:j}=Xt(P=>Ib({...P,customer_id:o}),{page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"},{skipInitialFetch:!0});g.useEffect(()=>{(async()=>{try{const D=await fe();D&&l(D.id)}catch(D){console.error("Error fetching current user:",D)}})()},[]),g.useEffect(()=>{o&&b({page:1})},[o]);const x=[{key:"status",label:"Status",multi:!0,options:[{value:"new",label:"New"},{value:"in_progress",label:"In Progress"},{value:"under_review",label:"Under Review"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]},{key:"dateFrom",label:"From Date",type:"date"},{key:"dateTo",label:"To Date",type:"date"}],y=P=>{b(P)},f=P=>{b({search:P,page:1})},v=(P,D)=>{if(P==="status"){const V=Array.isArray(D)?D:[];d(M=>({...M,[P]:V}));const E={page:1};V.length>0?E.status=V:E.status=void 0,b(E);return}const T=Array.isArray(D)?D.join(","):D;d(V=>({...V,[P]:T}));const R={page:1};P==="dateFrom"?R.dateFrom=T||void 0:P==="dateTo"&&(R.dateTo=T||void 0),b(R)},k=()=>{d({status:[],dateFrom:"",dateTo:""});const P={...u,status:void 0,dateFrom:void 0,dateTo:void 0};b(P)},N=P=>{t(P),n(!0)},_=P=>{switch(P){case"new":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-purple-100 text-purple-800";case"under_review":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=P=>{switch(P){case"paid":return"bg-green-100 text-green-800";case"unpaid":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=[{key:"image",label:"Image",render:P=>s.jsx(Di,{attachmentId:P.first_attachment_id,alt:"Order attachment"})},{key:"order_number",label:"Order Number",sortable:!0,render:P=>P.order_number||`ORD-${P.id.slice(0,8)}`},{key:"order_type",label:"Type",render:P=>s.jsx("span",{className:"text-sm text-gray-600 capitalize",children:P.order_type==="custom"?"Custom Design":"Catalog Item"})},{key:"apparel_type_name",label:"Apparel Type",render:P=>s.jsx("span",{className:"text-sm text-gray-600",children:P.apparel_type_name||"-"})},,{key:"total_amount",label:"Total",sortable:!0,render:P=>s.jsxs("span",{className:"font-semibold text-gray-900",children:["$",(P.total_amount||0).toFixed(2)]})},{key:"status",label:"Status",sortable:!0,render:P=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_(P.status)}`,children:P.status.replace("_"," ")})},{key:"payment_status",label:"Payment",sortable:!0,render:P=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S(P.payment_status)}`,children:P.payment_status.replace("_"," ")})},{key:"created_at",label:"Created",sortable:!0,render:P=>new Date(P.created_at).toLocaleDateString()},{key:"actions",label:"Actions",render:P=>s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("button",{onClick:()=>N(P),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"View Details",children:s.jsx(Pe,{className:"h-4 w-4"})})})}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Orders"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Track and manage your orders"})]}),s.jsxs("button",{onClick:()=>i(!0),className:"btn-success btn-large px-6 flex items-center space-x-2",children:[s.jsx(Ai,{className:"h-5 w-5"}),s.jsx("span",{children:"Place New Order"})]})]}),s.jsx(Yt,{searchValue:m.search||"",onSearchChange:f,searchPlaceholder:"Search orders by order number or description...",filters:x,filterValues:c,onFilterChange:v,onClearFilters:k,resultCount:h.total,loading:p}),w&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:w})}),s.jsx(Zt,{data:h,columns:C,onParamsChange:y,currentParams:m,loading:p}),!p&&!w&&h.total===0&&!m.search&&s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Et,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"No orders yet"}),s.jsx("button",{onClick:()=>i(!0),className:"btn-primary px-6",children:"Place Your First Order"})]})}),s.jsx(Mi,{isOpen:r,onClose:()=>n(!1),order:e}),s.jsx(gp,{isOpen:a,onClose:()=>{i(!1),o&&j()}})]})},vp=({isOpen:e,onClose:t,invoiceId:r})=>{const[n,a]=g.useState(null),[i,o]=g.useState([]),[l,c]=g.useState(!1),[d,u]=g.useState("");g.useEffect(()=>{e&&r&&h()},[e,r]);const h=async()=>{if(r)try{c(!0),u("");const w=await cp(r);if(a(w),w.order_ids&&w.order_ids.length>0){const b=await kb(w.order_ids);o(b)}else o([])}catch(w){console.error("Error fetching invoice details:",w),u(w.message||"Failed to load invoice details")}finally{c(!1)}},m=w=>{switch(w){case"paid":return"bg-green-100 text-green-800";case"unpaid":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},p=w=>{switch(w){case"pending":return"bg-yellow-100 text-yellow-800";case"assigned":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-purple-100 text-purple-800";case"review":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"delivered":return"bg-emerald-100 text-emerald-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Invoice Details"}),n&&s.jsx("p",{className:"text-gray-600",children:n.invoice_title})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ue,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"p-6",children:[l&&s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"loading-spinner mr-3"}),s.jsx("span",{className:"text-gray-600",children:"Loading invoice details..."})]}),d&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:d})}),n&&!l&&s.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Invoice Summary"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(br,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Invoice Title"}),s.jsx("p",{className:"font-medium text-gray-800",children:n.invoice_title})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Vn,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Period"}),s.jsx("p",{className:"font-medium text-gray-800",children:n.month_year})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Customer"}),s.jsx("p",{className:"font-medium text-gray-800",children:n.customer_name})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Et,{className:"h-5 w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Company"}),s.jsx("p",{className:"font-medium text-gray-800",children:n.customer_company_name||"No Company"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Et,{className:"h-5 w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m(n.status)}`,children:n.status.replace("_"," ")})]})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:["Included Orders (",i.length,")"]}),i.length>0?s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg",children:i.map((w,b)=>{var j;return s.jsx("div",{className:`p-4 ${b!==i.length-1?"border-b border-gray-100":""}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Et,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:w.order_number}),s.jsxs("p",{className:"text-sm text-gray-500",children:[w.order_type==="custom"?"Custom Design":"Catalog Item"," •",new Date(w.created_at).toLocaleDateString()]}),w.apparel_type_name&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[w.apparel_type_name," • ",w.custom_width,'"×',w.custom_height,'"']})]})]}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-gray-900",children:["$",((j=w.total_amount)==null?void 0:j.toFixed(2))||"0"]}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(w.status)}`,children:w.status.replace("_"," ")})]})})]})},w.id)})}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No orders included in this invoice"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Invoice Total"}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:["$",n.total_amount.toFixed(2)]})})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Invoice Info"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Created"}),s.jsx("p",{className:"font-medium text-gray-800",children:new Date(n.created_at).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Last Updated"}),s.jsx("p",{className:"font-medium text-gray-800",children:new Date(n.updated_at).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Orders Count"}),s.jsxs("p",{className:"font-medium text-gray-800",children:[n.order_ids.length," orders"]})]})]})]}),n.payment_link&&n.status==="unpaid"&&s.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Payment"}),s.jsx("button",{onClick:()=>window.open(n.payment_link,"_blank"),className:"w-full btn-success",children:"Pay Now"})]})]})]})]})]})})]}):null},kj=()=>{const[e,t]=g.useState(!1),[r,n]=g.useState(null),[a,i]=g.useState(null),[o,l]=g.useState({status:"",dateFrom:"",dateTo:""}),[c]=g.useState({page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"}),{data:d,params:u,loading:h,error:m,updateParams:p,refetch:w}=Xt(S=>lp({...S,search:S.search?`customer_id.eq.${a},${S.search}`:`customer_id.eq.${a}`}),{page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"},{skipInitialFetch:!0});g.useEffect(()=>{(async()=>{try{const C=await fe();C&&i(C.id)}catch(C){console.error("Error fetching current user:",C)}})()},[]),g.useEffect(()=>{a&&p({page:1})},[a]);const b=[{key:"status",label:"Status",options:[{value:"paid",label:"Paid"},{value:"unpaid",label:"Unpaid"},{value:"cancelled",label:"Cancelled"}]},{key:"dateFrom",label:"From Date",type:"date"},{key:"dateTo",label:"To Date",type:"date"}],j=S=>{p(S)},x=S=>{p({search:S,page:1})},y=(S,C)=>{l(D=>({...D,[S]:C}));const P={page:1};S==="status"&&C?P.invoiceStatus=C:S==="dateFrom"&&C?P.dateFrom=C:S==="dateTo"&&C&&(P.dateTo=C),p(P)},f=()=>{l({status:"",dateFrom:"",dateTo:""});const S={...c,invoiceStatus:void 0,dateFrom:void 0,dateTo:void 0};p(S)},v=S=>{switch(S){case"paid":return"bg-green-100 text-green-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-red-100 text-red-800"}},k=S=>{S&&window.open(S,"_blank")},N=S=>{n(S.id),t(!0)},_=[{key:"invoice_title",label:"Invoice Title",sortable:!0},{key:"month_year",label:"Period",sortable:!0,render:S=>s.jsxs("div",{className:"flex items-center",children:[s.jsx(Vn,{className:"h-4 w-4 mr-1 text-gray-400"}),S.month_year]})},{key:"order_ids",label:"Orders",render:S=>`${S.order_ids.length} orders`},{key:"total_amount",label:"Amount",sortable:!0,render:S=>s.jsxs("span",{className:"font-semibold text-gray-900",children:["$",S.total_amount.toFixed(2)]})},{key:"status",label:"Status",sortable:!0,render:S=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(S.status)}`,children:S.status.replace("_"," ")}),S.status==="unpaid"&&S.payment_link&&s.jsx("button",{onClick:()=>k(S.payment_link),className:"p-1 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Pay Invoice",children:s.jsx(Jt,{className:"h-3 w-3"})})]})},{key:"created_at",label:"Created",sortable:!0,render:S=>new Date(S.created_at).toLocaleDateString()},{key:"actions",label:"Actions",render:S=>s.jsx("button",{onClick:()=>N(S),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"View Invoice",children:s.jsx(Pe,{className:"h-4 w-4"})})}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Invoices"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage your invoices"})]}),s.jsx(Yt,{searchValue:u.search||"",onSearchChange:x,searchPlaceholder:"Search invoices by title...",filters:b,filterValues:o,onFilterChange:y,onClearFilters:f,resultCount:d.total,loading:h}),m&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:m})}),s.jsx(Zt,{data:d,columns:_,onParamsChange:j,currentParams:u,loading:h}),!h&&!m&&d.total===0&&!u.search&&s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(br,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500",children:"No invoices yet"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Invoices will appear here once generated by our team"})]})}),s.jsx(vp,{isOpen:e,onClose:()=>t(!1),invoiceId:r})]})},Sj=()=>{const[e,t]=g.useState(()=>new URLSearchParams(window.location.search).get("tab")||"overview"),r=a=>{t(a);const i=new URL(window.location.href);i.searchParams.set("tab",a),window.history.replaceState({},"",i.toString())},n=()=>{switch(e){case"overview":return s.jsx(Bu,{});case"orders":return s.jsx(Nj,{});case"invoices":return s.jsx(kj,{});default:return s.jsx(Bu,{})}};return s.jsx(_j,{activeTab:e,onTabChange:r,children:n()})},Cj=({children:e,activeTab:t,onTabChange:r})=>{const[n,a]=g.useState(null),[i,o]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const d=await fe();if(d){const u=await $e(d.id);u&&u.role==="admin"?a(u):(console.error("Access denied: User role is",u==null?void 0:u.role,"but admin required"),window.location.href="/login")}else window.location.href="/login"}catch(d){console.error("Error checking user:",d),window.location.href="/login"}finally{o(!1)}})()},[]);const l=[{id:"overview",label:"Overview",icon:Eu},{id:"employees",label:"Employees",icon:qr},{id:"customers",label:"Customers",icon:qr},{id:"orders",label:"Orders",icon:Dr},{id:"products",label:"Products",icon:Et},{id:"invoices",label:"Invoices",icon:br}];return i?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"loading-spinner mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading admin panel..."})]})}):s.jsx(Kc,{title:"Admin Dashboard",headerIcon:Eu,headerIconColor:"bg-blue-100 text-blue-600",user:n,activeTab:t,tabs:l,onTabChange:r,children:e})},qu=({onOrderClick:e})=>{const{stats:t,recentOrders:r,loading:n,error:a,refreshData:i}=oj(),o=d=>{switch(d){case"blue":return{bg:"bg-blue-100",text:"text-blue-600"};case"green":return{bg:"bg-green-100",text:"text-green-600"};case"purple":return{bg:"bg-purple-100",text:"text-purple-600"};case"orange":return{bg:"bg-orange-100",text:"text-orange-600"};case"indigo":return{bg:"bg-indigo-100",text:"text-indigo-600"};default:return{bg:"bg-gray-100",text:"text-gray-600"}}},l=[{title:"Orders This Month",value:t.totalOrdersThisMonth.toString(),icon:Dr,color:"blue"},{title:"New Customers this Month",value:t.newCustomersThisMonth.toString(),icon:qr,color:"green"},{title:"Revenue This Month",value:`$${t.totalRevenueThisMonth.toLocaleString()}`,icon:Zw,color:"purple"},{title:"In Progress",value:t.inProgressOrders.toString(),icon:Tl,color:"orange"},{title:"Active Products",value:t.activeProducts.toString(),icon:Et,color:"indigo"},{title:"New Orders",value:t.newOrdersCount.toString(),icon:yr,color:"blue"},{title:"Under Review",value:t.underReviewOrdersCount.toString(),icon:Gn,color:"orange"}],c=d=>{switch(d){case"new":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-purple-100 text-purple-800";case"under_review":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return n?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"loading-spinner mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading overview..."})]})}):a?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:a}),s.jsx("button",{onClick:()=>i(!0),className:"btn-primary",children:"Retry"})]})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Overview"}),s.jsx("button",{onClick:()=>i(!0),disabled:n,className:"btn-primary",children:n?"Refreshing...":"Refresh Data"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:l.map((d,u)=>{const h=d.icon,m=o(d.color);return s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100",style:{animationDelay:`${u*100}ms`},children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:`${m.bg} p-3 rounded-lg`,children:s.jsx(h,{className:`h-6 w-6 ${m.text}`})})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:d.value}),s.jsx("p",{className:"text-gray-600 text-sm",children:d.title})]},d.title)})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"p-6 border-b border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Last 10 orders across all customers"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"No recent orders found"})}):r.map(d=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>e(d),children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:d.order_number}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d.customer_name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c(d.status)}`,children:d.status.replace("_"," ")})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d.assigned_sales_rep_name||d.assigned_designer_name||"Unassigned"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(d.created_at).toLocaleDateString()}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",(d.total_amount||0).toFixed(2)]})]},d.id))})]})})]})]})},wp=({isOpen:e,onClose:t,onSubmit:r,title:n,fields:a,initialData:i,loading:o=!1})=>{const[l,c]=g.useState({}),[d,u]=g.useState({}),[h,m]=g.useState(!1),[p,w]=g.useState("");g.useEffect(()=>{if(e){const f={};a.forEach(v=>{if(i&&i[v.key]!==void 0)f[v.key]=i[v.key];else switch(v.type){case"checkbox":f[v.key]=!1;break;case"number":f[v.key]=v.min||0;break;default:f[v.key]=""}}),c(f),u({}),w("")}},[e,a,i]);const b=(f,v)=>{c(k=>({...k,[f]:v})),d[f]&&u(k=>({...k,[f]:""}))},j=()=>{const f={};return a.forEach(v=>{if(v.required){const k=l[v.key];(k==null||k==="")&&(f[v.key]=`${v.label} is required`)}if(v.type==="email"&&l[v.key]&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l[v.key])||(f[v.key]="Please enter a valid email address")),v.type==="number"&&l[v.key]!==""){const k=Number(l[v.key]);isNaN(k)?f[v.key]="Please enter a valid number":(v.min!==void 0&&k<v.min&&(f[v.key]=`Value must be at least ${v.min}`),v.max!==void 0&&k>v.max&&(f[v.key]=`Value must be at most ${v.max}`))}}),u(f),Object.keys(f).length===0},x=async f=>{if(f.preventDefault(),!!j()){m(!0);try{await r(l),t()}catch(v){console.error("Error submitting form:",v),w(v.message||"An error occurred while saving. Please try again.")}finally{m(!1)}}},y=f=>{var _;const v=l[f.key]||"",N=`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${d[f.key]?"border-red-300":"border-gray-300"}`;switch(f.type){case"textarea":return s.jsx("textarea",{value:v,onChange:S=>b(f.key,S.target.value),className:N,placeholder:f.placeholder,rows:4,required:f.required});case"select":return s.jsxs("select",{value:v,onChange:S=>b(f.key,S.target.value),className:N,required:f.required,children:[s.jsxs("option",{value:"",children:["Select ",f.label]}),(_=f.options)==null?void 0:_.map(S=>s.jsx("option",{value:S.value,children:S.label},S.value))]});case"checkbox":return s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:!!v,onChange:S=>b(f.key,S.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("label",{className:"ml-2 text-sm text-gray-700",children:f.label})]});case"file":return s.jsx("input",{type:"file",onChange:S=>{var C;return b(f.key,((C=S.target.files)==null?void 0:C[0])||null)},className:N,accept:"image/*"});case"number":return s.jsx("input",{type:"number",value:v,onChange:S=>b(f.key,S.target.value),className:N,placeholder:f.placeholder,min:f.min,max:f.max,step:f.step,required:f.required});default:return s.jsx("input",{type:f.type,value:v,onChange:S=>b(f.key,S.target.value),className:N,placeholder:f.placeholder,required:f.required})}};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("div",{children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n})}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:h,children:s.jsx(Ue,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:x,className:"p-6",children:[p&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700 text-sm",children:p})}),s.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:a.map(f=>s.jsxs("div",{className:f.colSpan===2?"md:col-span-2":"",children:[f.type!=="checkbox"&&s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[f.label,f.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),y(f),d[f.key]&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:d[f.key]})]},f.key))}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"btn-secondary text-sm",disabled:h,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn-primary text-sm flex items-center space-x-2",disabled:h||o,children:h?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loading-spinner-white w-4 h-4"}),s.jsx("span",{children:"Saving..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(zs,{className:"h-4 w-4"}),s.jsx("span",{children:"Save"})]})})]})]})]})})]}):null},Ej=()=>{const{data:e,params:t,loading:r,error:n,updateParams:a,refetch:i}=Xt(mb,{page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"}),[o,l]=g.useState({role:"",status:""}),[c]=g.useState({page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"}),[d,u]=g.useState(!1),[h,m]=g.useState(null),p=[{key:"role",label:"Role",options:[{value:"admin",label:"Administrator"},{value:"sales_rep",label:"Sales Representative"},{value:"designer",label:"Designer"}]},{key:"status",label:"Status",options:[{value:"active",label:"Active"},{value:"disabled",label:"Disabled"}]}],w=C=>{a(C)},b=C=>{a({search:C,page:1})},j=(C,P)=>{l(T=>({...T,[C]:P}));const D={page:1};C==="role"&&P?D.role=P:C==="status"&&P&&(D.status=P),a(D)},x=()=>{l({role:"",status:""});const C={...c,role:void 0,status:void 0};a(C)},y=()=>{const C=`${window.location.origin}/employee-signup`;navigator.clipboard.writeText(C).then(()=>{H.success("Employee signup URL copied to clipboard!")}).catch(()=>{H.error("Failed to copy URL to clipboard")})},f=C=>{m(C),u(!0)},v=async C=>{if(window.confirm(`Are you sure you want to delete ${C.full_name}?`))try{await fb(C.id),await i(),H.success(`Employee ${C.full_name} deleted successfully`)}catch(P){console.error("Error deleting employee:",P),H.error("Failed to delete employee. Please try again.")}},k=async C=>{try{const P=C.status==="active"?"disabled":"active";await $u(C.id,{status:P}),await i(),H.success(`Employee ${C.full_name} ${P==="active"?"activated":"deactivated"} successfully`)}catch(P){console.error("Error updating employee status:",P),H.error("Failed to update employee status. Please try again.")}},N=async C=>{try{h&&(await $u(h.id,C),H.success(`Employee ${C.full_name} updated successfully`)),await i()}catch(P){throw console.error("Error saving employee:",P),H.error("Failed to save employee changes"),P}},_=[{key:"full_name",label:"Full Name",type:"text",required:!0},{key:"email",label:"Email",type:"email",required:!0},{key:"phone",label:"Phone",type:"text"},{key:"role",label:"Role",type:"select",required:!0,options:[{value:"admin",label:"Administrator"},{value:"sales_rep",label:"Sales Representative"},{value:"designer",label:"Designer"}]},{key:"status",label:"Status",type:"select",required:!0,options:[{value:"active",label:"Active"},{value:"disabled",label:"Disabled"}]}],S=[{key:"full_name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"phone",label:"Phone"},{key:"role",label:"Role",sortable:!0,render:C=>s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:C.role.replace("_"," ")})},{key:"status",label:"Status",sortable:!0,render:C=>s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.status})})},{key:"created_at",label:"Created At",sortable:!0,render:C=>new Date(C.created_at).toLocaleDateString()},{key:"actions",label:"Actions",render:C=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>f(C),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit Employee",children:s.jsx(Jt,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>k(C),className:`transition-colors ${C.status==="active"?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"}`,title:C.status==="active"?"Disable Employee":"Enable Employee",children:C.status==="active"?s.jsx(rp,{className:"h-4 w-4"}):s.jsx(tp,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>v(C),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete Employee",children:s.jsx(Vt,{className:"h-4 w-4"})})]})}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Employee Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage employees and share signup URL with new team members"})]}),s.jsxs("button",{onClick:y,className:"btn-primary btn-large px-6 flex items-center space-x-2",children:[s.jsx(Tu,{className:"h-5 w-5"}),s.jsx("span",{children:"Copy Signup URL"})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Tu,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Employee Signup Process"}),s.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:"Share the signup URL with new employees. They can create their accounts, which will be disabled by default. You can then activate their accounts using the status toggle in the table below."})]})]})}),s.jsx(Yt,{searchValue:t.search||"",onSearchChange:b,searchPlaceholder:"Search employees by name or email...",filters:p,filterValues:o,onFilterChange:j,onClearFilters:x,resultCount:e.total,loading:r}),n&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:n})}),s.jsx(Zt,{data:e,columns:S,onParamsChange:w,currentParams:t,loading:r}),s.jsx(wp,{isOpen:d,onClose:()=>u(!1),onSubmit:N,title:"Edit Employee",fields:_,initialData:h})]})},Qc=({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:i="Confirm",cancelText:o="Cancel",type:l="warning"})=>{if(!e)return null;const d=(()=>{switch(l){case"danger":return{icon:"text-red-600",iconBg:"bg-red-100",confirmBtn:"bg-red-600 hover:bg-red-700"};case"info":return{icon:"text-blue-600",iconBg:"bg-blue-100",confirmBtn:"bg-blue-600 hover:bg-blue-700"};default:return{icon:"text-orange-600",iconBg:"bg-orange-100",confirmBtn:"bg-orange-600 hover:bg-orange-700"}}})();return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`${d.iconBg} p-2 rounded-lg`,children:s.jsx(zw,{className:`h-5 w-5 ${d.icon}`})}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:n})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ue,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"p-6",children:s.jsx("p",{className:"text-gray-700 leading-relaxed",children:a})}),s.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200",children:[s.jsx("button",{onClick:t,className:"btn-secondary text-sm",children:o}),s.jsx("button",{onClick:r,className:`btn-danger text-sm ${l==="info"?"btn-primary":l==="warning"?"btn-warning":"btn-danger"}`,children:i})]})]})})]})},Pj=()=>{const{data:e,params:t,loading:r,error:n,updateParams:a,refetch:i}=Xt(gb,{page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"}),[o,l]=g.useState({status:"",salesRep:"",dateFrom:"",dateTo:""}),[c]=g.useState({page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"}),[d,u]=g.useState(!1),[h,m]=g.useState(null),[p,w]=g.useState(!1),[b,j]=g.useState(null),[x,y]=g.useState([]);g.useEffect(()=>{(async()=>{try{const M=await Wc();y(M)}catch(M){console.error("Error fetching sales reps:",M)}})()},[]);const f=[{key:"status",label:"Status",options:[{value:"active",label:"Active"},{value:"disabled",label:"Disabled"}]},{key:"salesRep",label:"Sales Rep",options:x.map(E=>({value:E.id,label:E.full_name}))},{key:"dateFrom",label:"From Date",type:"date"},{key:"dateTo",label:"To Date",type:"date"}],v=E=>{a(E)},k=E=>{a({search:E,page:1})},N=(E,M)=>{l($=>({...$,[E]:M}));const Y={page:1};E==="status"&&M?Y.status=M:E==="salesRep"&&M?Y.salesRepId=M:E==="dateFrom"&&M?Y.dateFrom=M:E==="dateTo"&&M&&(Y.dateTo=M),a(Y)},_=()=>{l({status:"",salesRep:"",dateFrom:"",dateTo:""});const E={...c,status:void 0,salesRepId:void 0,dateFrom:void 0,dateTo:void 0};a(E)},S=E=>{m(E),u(!0)},C=E=>{j(E),w(!0)},P=async()=>{if(b)try{await pb(b.id),await i(),H.success(`Customer ${b.full_name} deleted successfully`),w(!1),j(null)}catch(E){console.error("Error deleting customer:",E),H.error("Failed to delete customer. Please try again.")}},D=async E=>{try{const M=E.status==="active"?"disabled":"active";await Lu(E.id,{status:M}),await i(),H.success(`Customer ${E.full_name} ${M==="active"?"activated":"deactivated"} successfully`)}catch(M){console.error("Error updating customer status:",M),H.error("Failed to update customer status. Please try again.")}},T=async E=>{try{h&&(await Lu(h.id,E),H.success(`Customer ${E.full_name} updated successfully`)),await i()}catch(M){throw console.error("Error saving customer:",M),H.error("Failed to save customer changes"),M}},R=[{key:"full_name",label:"Full Name",type:"text",required:!0},{key:"email",label:"Email",type:"email",required:!0},{key:"phone",label:"Phone",type:"text"},{key:"company_name",label:"Company Name",type:"text"},{key:"assigned_sales_rep_id",label:"Assigned Sales Rep",type:"select",options:[...x.map(E=>({value:E.id,label:E.full_name}))]},{key:"status",label:"Status",type:"select",required:!0,options:[{value:"active",label:"Active"},{value:"disabled",label:"Disabled"}]}],V=[{key:"full_name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"phone",label:"Phone"},{key:"company_name",label:"Company",render:E=>E.company_name||"-"},{key:"assigned_sales_rep_name",label:"Sales Rep",render:E=>E.assigned_sales_rep_name||"-"},{key:"status",label:"Status",sortable:!0,render:E=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:E.status})},{key:"created_at",label:"Created At",sortable:!0,render:E=>new Date(E.created_at).toLocaleDateString()},{key:"actions",label:"Actions",render:E=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>S(E),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit Customer",children:s.jsx(Jt,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>D(E),className:`transition-colors ${E.status==="active"?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"}`,title:E.status==="active"?"Disable Customer":"Enable Customer",children:E.status==="active"?s.jsx(rp,{className:"h-4 w-4"}):s.jsx(tp,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>C(E),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete Customer",children:s.jsx(Vt,{className:"h-4 w-4"})})]})}];return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Customer Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage customer accounts and relationships"})]})}),s.jsx(Yt,{searchValue:t.search||"",onSearchChange:k,searchPlaceholder:"Search customers by name or email...",filters:f,filterValues:o,onFilterChange:N,onClearFilters:_,resultCount:e.total,loading:r}),n&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:n})}),s.jsx(Zt,{data:e,columns:V,onParamsChange:v,currentParams:t,loading:r}),s.jsx(wp,{isOpen:d,onClose:()=>u(!1),onSubmit:T,title:"Edit Customer",fields:R,initialData:h}),s.jsx(Qc,{isOpen:p,onClose:()=>{w(!1),j(null)},onConfirm:P,title:"Delete Customer",message:`Are you sure you want to delete "${b==null?void 0:b.full_name}"? This action cannot be undone and will also delete their authentication account.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"})]})},Tj=({onOrderClick:e})=>{const{data:t,params:r,loading:n,error:a,updateParams:i,refetch:o}=Xt(Bc,{page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"}),[l,c]=g.useState({status:[],paymentStatus:"",customer:"",dateFrom:"",dateTo:"",amountMin:"",amountMax:""}),[d]=g.useState({page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc",status:void 0}),[u,h]=g.useState(!1),[m,p]=g.useState(null),w=[{key:"status",label:"Status",multi:!0,options:[{value:"new",label:"New"},{value:"in_progress",label:"In Progress"},{value:"under_review",label:"Under Review"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]},{key:"paymentStatus",label:"Payment Status",options:[{value:"paid",label:"Paid"},{value:"unpaid",label:"Unpaid"}]},{key:"customer",label:"Customer",type:"search",placeholder:"Search by customer name..."},{key:"dateFrom",label:"From Date",type:"date"},{key:"dateTo",label:"To Date",type:"date"},{key:"amountMin",label:"Min Amount",type:"number",placeholder:"Min $"},{key:"amountMax",label:"Max Amount",type:"number",placeholder:"Max $"}],b=_=>{i(_)},j=_=>{i({search:_,page:1})},x=(_,S)=>{if(_==="status"){const D=Array.isArray(S)?S:[];c(R=>({...R,[_]:D}));const T={page:1};D.length>0?T.status=D:T.status=void 0,i(T);return}const C=Array.isArray(S)?S.join(","):S;c(D=>({...D,[_]:C}));const P={page:1};if(_==="paymentStatus")P.paymentStatus=C||void 0;else if(_==="customer")P.customerSearch=C||void 0;else if(_==="dateFrom")P.dateFrom=C||void 0;else if(_==="dateTo")P.dateTo=C||void 0;else if(_==="amountMin")if(C){const D=parseFloat(C);!isNaN(D)&&D>=0&&(P.amountMin=D)}else P.amountMin=void 0;else if(_==="amountMax")if(C){const D=parseFloat(C);!isNaN(D)&&D>=0&&(P.amountMax=D)}else P.amountMax=void 0;i(P)},y=()=>{c({status:[],paymentStatus:"",customer:"",dateFrom:"",dateTo:"",amountMin:"",amountMax:""});const _={...d,status:void 0,paymentStatus:void 0,customerSearch:void 0,dateFrom:void 0,dateTo:void 0,amountMin:void 0,amountMax:void 0};i(_)},f=_=>{p(_),h(!0)},v=_=>{switch(_){case"new":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-purple-100 text-purple-800";case"under_review":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=_=>{switch(_){case"paid":return"bg-green-100 text-green-800";case"unpaid":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=[{key:"image",label:"Image",render:_=>s.jsx(Di,{attachmentId:_.first_attachment_id,alt:"Order attachment"})},{key:"order_number",label:"Order Number",sortable:!0,render:_=>_.order_number||`ORD-${_.id.slice(0,8)}`},{key:"customer_name",label:"Customer",sortable:!0},{key:"total_amount",label:"Total",sortable:!0,render:_=>`$${(_.total_amount||0).toFixed(2)}`},{key:"status",label:"Status",sortable:!0,render:_=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(_.status)}`,children:_.status.replace("_"," ")})},{key:"payment_status",label:"Payment Status",sortable:!0,render:_=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k(_.payment_status)}`,children:_.payment_status.replace("_"," ")})},{key:"assigned_sales_rep_name",label:"Sales Rep",render:_=>s.jsx("span",{className:`text-sm ${_.assigned_sales_rep_name==="Unassigned"?"text-gray-400":"text-blue-600"}`,children:_.assigned_sales_rep_name})},{key:"assigned_designer_name",label:"Designer",render:_=>s.jsx("span",{className:`text-sm ${_.assigned_designer_name==="Unassigned"?"text-gray-400":"text-purple-600"}`,children:_.assigned_designer_name})},{key:"created_at",label:"Created At",sortable:!0,render:_=>new Date(_.created_at).toLocaleDateString()},{key:"actions",label:"Actions",render:_=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>f(_),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit Order",children:s.jsx(Jt,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>e(_),className:"text-green-600 hover:text-green-900 transition-colors",title:"View Details",children:s.jsx(Pe,{className:"h-4 w-4"})})]})}];return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Order Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage customer orders and assignments"})]})}),s.jsx(Yt,{searchValue:r.search||"",onSearchChange:j,searchPlaceholder:"Search orders by order number...",filters:w,filterValues:l,onFilterChange:x,onClearFilters:y,resultCount:t.total,loading:n}),a&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:a})}),s.jsx(Zt,{data:t,columns:N,onParamsChange:b,currentParams:r,loading:n}),s.jsx(Vc,{isOpen:u,onClose:()=>h(!1),order:m,onSuccess:()=>{h(!1),o()}})]})},Oj=({isOpen:e,onClose:t,product:r,onSuccess:n,mode:a})=>{const[i,o]=g.useState({title:"",description:"",apparel_type_id:"",price:0,status:"active"}),[l,c]=g.useState(""),[d,u]=g.useState(null),[h,m]=g.useState(""),[p,w]=g.useState([]),[b,j]=g.useState(!1),[x,y]=g.useState(!1),[f,v]=g.useState("");g.useEffect(()=>{e&&(a==="edit"&&r?(o({title:r.title,description:r.description||"",apparel_type_id:r.apparel_type_id||"",price:r.price,status:r.status}),c(r.image_url||"")):(o({title:"",description:"",apparel_type_id:"",price:0,status:"active"}),c("")),u(null),m(""),v(""),k())},[e,a,r]);const k=async()=>{try{j(!0);const R=await qc();w(R)}catch(R){console.error("Error fetching apparel types:",R),v("Failed to load apparel types")}finally{j(!1)}},N=R=>{const{name:V,value:E}=R.target;o(M=>({...M,[V]:R.target.type==="number"?parseFloat(E)||0:E}))},_=R=>{var E;const V=(E=R.target.files)==null?void 0:E[0];V&&(u(V),l&&m(l))},S=()=>{d?(u(null),m("")):l&&(m(l),c(""))},C=async()=>{if(!d)return null;const{data:{session:R}}=await A.auth.getSession();if(!R)throw new Error("Not authenticated");const V=new FormData;V.append("file",d);const E=await fetch("https://iutxllhudjckcaiwabud.supabase.co/functions/v1/manage-product-image",{method:"POST",headers:{Authorization:`Bearer ${R.access_token}`},body:V});if(!E.ok){const Y=await E.json();throw new Error(Y.error||"Upload failed")}return(await E.json()).publicUrl},P=async R=>{if(R.preventDefault(),!i.title.trim()){v("Product title is required");return}if(i.price<=0){v("Price must be greater than 0");return}y(!0),v("");try{let V=l;if(d){const M=await C();M&&(V=M)}h&&await Cb(h,"product-images");const E={...i,image_url:V||null};a==="create"?(await wb(E),H.success("Product created successfully")):r&&(await bb(r.id,E),H.success("Product updated successfully")),n(),t()}catch(V){console.error("Error saving product:",V),H.error(`Failed to ${a==="create"?"create":"update"} product`),v("Failed to save product. Please try again.")}finally{y(!1)}},D=()=>d?URL.createObjectURL(d):l,T=()=>d||l;return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a==="create"?"Add New Product":"Edit Product"}),a==="edit"&&r&&s.jsx("p",{className:"text-gray-600",children:r.title})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:x,children:s.jsx(Ue,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:P,className:"p-6",children:[f&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700 text-sm",children:f})}),b?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"loading-spinner mr-2"}),s.jsx("span",{className:"text-gray-600",children:"Loading product data..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Title *"}),s.jsx("input",{type:"text",name:"title",value:i.title,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter product title",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apparel Type *"}),s.jsxs("select",{name:"apparel_type_id",value:i.apparel_type_id,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"",children:"No Type"}),p.map(R=>s.jsx("option",{value:R.id,children:R.type_name},R.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price *"}),s.jsx("input",{type:"number",name:"price",value:i.price,onChange:N,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"0.00",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),s.jsxs("select",{name:"status",value:i.status,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0,children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{name:"description",value:i.description,onChange:N,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter product description"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Image"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:T()?D():"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5ObyBJbWFnZSBBdmFpbGFibGU8L3RleHQ+PC9zdmc+",alt:T()?"Product preview":"No image",className:"w-32 h-32 object-cover rounded-lg border border-gray-200"}),T()&&s.jsx("button",{type:"button",onClick:S,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",title:"Remove Image",children:s.jsx(Vt,{className:"h-3 w-3"})})]}),d&&s.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["New image selected: ",d.name]})]}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[s.jsx("input",{type:"file",onChange:_,className:"hidden",id:"image-upload",accept:"image/*"}),s.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer flex items-center justify-center space-x-2 text-gray-600 hover:text-blue-600 transition-colors",children:[s.jsx(ep,{className:"h-5 w-5"}),s.jsx("span",{children:T()?"Replace image":"Click to upload product image"})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"btn-secondary text-sm",disabled:x,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn-primary text-sm flex items-center space-x-2",disabled:x||b,children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loading-spinner-white w-4 h-4"}),s.jsx("span",{children:a==="create"?"Creating...":"Updating..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(zs,{className:"h-4 w-4"}),s.jsx("span",{children:a==="create"?"Create Product":"Update Product"})]})})]})]})]})})]}):null},Ij=()=>{const{data:e,params:t,loading:r,error:n,updateParams:a,refetch:i}=Xt(vb,{page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"}),[o,l]=g.useState({apparelType:"",status:"",priceMin:"",priceMax:""}),[c]=g.useState({page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"}),[d,u]=g.useState(!1),[h,m]=g.useState("create"),[p,w]=g.useState(null),[b,j]=g.useState(!1),[x,y]=g.useState(null),[f,v]=g.useState([]);g.useEffect(()=>{(async()=>{try{const M=await qc();v(M)}catch(M){console.error("Error fetching apparel types:",M)}})()},[]);const k=[{key:"apparelType",label:"Apparel Type",options:f.map(E=>({value:E.id,label:E.type_name}))},{key:"status",label:"Status",options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]},{key:"priceMin",label:"Min Price",type:"number",placeholder:"Min $"},{key:"priceMax",label:"Max Price",type:"number",placeholder:"Max $"}],N=E=>{a(E)},_=E=>{a({search:E,page:1})},S=(E,M)=>{l($=>({...$,[E]:M}));const Y={page:1};E==="apparelType"&&M?Y.apparelTypeId=M:E==="status"&&M?Y.status=M:E==="priceMin"&&M?Y.priceMin=parseFloat(M):E==="priceMax"&&M&&(Y.priceMax=parseFloat(M)),a(Y)},C=()=>{l({apparelType:"",status:"",priceMin:"",priceMax:""});const E={...c,apparelTypeId:void 0,status:void 0,priceMin:void 0,priceMax:void 0};a(E)},P=()=>{m("create"),w(null),u(!0)},D=E=>{m("edit"),w(E),u(!0)},T=E=>{y(E),j(!0)},R=async()=>{if(x)try{await jb(x.id),await i(),H.success(`Product ${x.title} deleted successfully`),j(!1),y(null)}catch(E){console.error("Error deleting product:",E),H.error("Failed to delete product. Please try again.")}},V=[{key:"image",label:"Image",render:E=>s.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center",children:s.jsx("img",{src:E.image_url||Os("product"),alt:E.title||"Product image",className:"w-full h-full object-cover",onError:M=>{M.target.src=Os("product")}})})},{key:"title",label:"Product Title",sortable:!0},{key:"apparel_type_name",label:"Apparel Type",render:E=>E.apparel_type_name||"No Type"},{key:"price",label:"Price",sortable:!0,render:E=>`$${E.price.toFixed(2)}`},{key:"status",label:"Status",sortable:!0,render:E=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:E.status})},{key:"created_at",label:"Created At",sortable:!0,render:E=>new Date(E.created_at).toLocaleDateString()},{key:"actions",label:"Actions",render:E=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>D(E),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit Product",children:s.jsx(Jt,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>T(E),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete Product",children:s.jsx(Vt,{className:"h-4 w-4"})})]})}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Product Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your product catalog"})]}),s.jsxs("button",{onClick:P,className:"btn-primary flex items-center space-x-2",children:[s.jsx(Ai,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Product"})]})]}),s.jsx(Yt,{searchValue:t.search||"",onSearchChange:_,searchPlaceholder:"Search products by title or description...",filters:k,filterValues:o,onFilterChange:S,onClearFilters:C,resultCount:e.total,loading:r}),n&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:n})}),s.jsx(Zt,{data:e,columns:V,onParamsChange:N,currentParams:t,loading:r}),s.jsx(Oj,{isOpen:d,onClose:()=>u(!1),product:p,mode:h,onSuccess:()=>{u(!1),i()}}),s.jsx(Qc,{isOpen:b,onClose:()=>{j(!1),y(null)},onConfirm:R,title:"Delete Product",message:`Are you sure you want to delete "${x==null?void 0:x.title}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"})]})},Aj=({isOpen:e,onClose:t,onSuccess:r})=>{const[n,a]=g.useState([]),[i,o]=g.useState(""),[l,c]=g.useState(""),[d,u]=g.useState(""),[h,m]=g.useState([]),[p,w]=g.useState([]),[b,j]=g.useState(""),[x,y]=g.useState(""),[f,v]=g.useState(""),[k,N]=g.useState(""),[_,S]=g.useState(!1),[C,P]=g.useState(!1),[D,T]=g.useState("");g.useEffect(()=>{if(e){R();const X=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"});y(X)}},[e]),g.useEffect(()=>{i?V():(m([]),w([]))},[i,l,d]);const R=async()=>{try{const O=await dp();a(O)}catch(O){console.error("Error fetching customers:",O),T("Failed to load customers")}},V=async()=>{if(i)try{S(!0);const O=await Eb(i,l,d);m(O),w([])}catch(O){console.error("Error fetching unpaid orders:",O),T("Failed to load unpaid orders")}finally{S(!1)}},E=(O,X)=>{w(X?he=>[...he,O]:he=>he.filter(ge=>ge!==O))},M=O=>{w(O?h.map(X=>X.id):[])},Y=()=>h.filter(O=>p.includes(O.id)).reduce((O,X)=>O+(X.total_amount||0),0),$=O=>{switch(O){case"new":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-purple-100 text-purple-800";case"under_review":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},B=async O=>{if(O.preventDefault(),!i||p.length===0){T("Please select a customer and at least one order");return}if(!b.trim()){T("Please enter an invoice title");return}P(!0),T("");try{const X=n.find(ge=>ge.id===i),he=Y();await _b({customer_id:i,invoice_title:b.trim(),month_year:x,payment_link:f.trim()||null,order_ids:p,total_amount:he,status:"unpaid"}),H.success("Invoice generated successfully"),r(),o(""),c(""),u(""),m([]),w([]),j(""),v(""),N(""),T("")}catch(X){console.error("Error creating invoice:",X),H.error("Failed to generate invoice"),T("Failed to create invoice. Please try again.")}finally{P(!1)}};if(!e)return null;const z=n.find(O=>O.id===i),L=Y();return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Generate Invoice"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:C,children:s.jsx(Ue,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:B,className:"p-6",children:[D&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700 text-sm",children:D})}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(ut,{className:"h-4 w-4 inline mr-1"}),"Customer *"]}),s.jsxs("select",{value:i,onChange:O=>o(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0,children:[s.jsx("option",{value:"",children:"Select Customer"}),n.map(O=>s.jsxs("option",{value:O.id,children:[O.full_name," | ",O.email]},O.id))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(br,{className:"h-4 w-4 inline mr-1"}),"Invoice Title *"]}),s.jsx("input",{type:"text",value:b,onChange:O=>j(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"e.g., Monthly Invoice - September 2025",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Vn,{className:"h-4 w-4 inline mr-1"}),"Month/Year *"]}),s.jsx("input",{type:"text",value:x,onChange:O=>y(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"e.g., September 2025",required:!0,disabled:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Link (Optional)"}),s.jsx("input",{type:"url",value:f,onChange:O=>v(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"https://payment-provider.com/invoice/..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),s.jsx("input",{type:"date",value:l,onChange:O=>c(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),s.jsx("input",{type:"date",value:d,onChange:O=>u(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]})]}),i&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Unpaid Orders for ",z==null?void 0:z.full_name]}),h.length>0&&s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:p.length===h.length,onChange:O=>M(O.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Select All"})]})]}),_?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"loading-spinner mr-2"}),s.jsx("span",{className:"text-gray-600",children:"Loading orders..."})]}):h.length>0?s.jsx("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto",children:h.map(O=>{var X;return s.jsxs("label",{className:"flex items-center space-x-3 p-4 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:p.includes(O.id),onChange:he=>E(O.id,he.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-gray-900",children:O.order_number}),s.jsxs("span",{className:"font-semibold text-gray-900",children:["$",((X=O.total_amount)==null?void 0:X.toFixed(2))||"0"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:[O.order_type==="custom"?"Custom Design":"Catalog Item"," •"," ",new Date(O.created_at).toLocaleDateString()]}),s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${$(O.status)}`,children:(O.status||"unknown").replace("_"," ")})]}),O.apparel_type_name&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[O.apparel_type_name," • ",O.custom_width,'"×',O.custom_height,'"']})]})]},O.id)})}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No unpaid orders found for this customer"})]}),p.length>0&&s.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-lg font-medium text-gray-900",children:["Total (",p.length," orders):"]}),s.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["$",L.toFixed(2)]})]})}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"btn-secondary text-sm",disabled:C,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn-success text-sm flex items-center space-x-2",disabled:C||p.length===0,children:C?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loading-spinner-white w-4 h-4"}),s.jsx("span",{children:"Generating..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(zs,{className:"h-4 w-4"}),s.jsx("span",{children:"Generate Invoice"})]})})]})]})]})})]})},Rj=({isOpen:e,onClose:t,invoiceId:r,onSuccess:n})=>{const[a,i]=g.useState(null),[o,l]=g.useState([]),[c,d]=g.useState([]),[u,h]=g.useState(""),[m,p]=g.useState("unpaid"),[w,b]=g.useState(""),[j,x]=g.useState(!1),[y,f]=g.useState(!1),[v,k]=g.useState(""),[N,_]=g.useState(!1),[S,C]=g.useState(null);g.useEffect(()=>{e&&r&&P()},[e,r]);const P=async()=>{if(r)try{x(!0),k("");const L=await cp(r);i(L),h(L.invoice_title),p(L.status),b(L.payment_link||""),d(L.order_ids||[]);const O=await Sb(L.customer_id);l(O)}catch(L){console.error("Error fetching invoice data:",L),k(L.message||"Failed to load invoice data")}finally{x(!1)}},D=(L,O)=>{d(O?X=>[...X,L]:X=>X.filter(he=>he!==L))},T=L=>{d(L?o.map(O=>O.id):[])},R=()=>o.filter(L=>c.includes(L.id)).reduce((L,O)=>L+(O.total_amount||0),0),V=async L=>{if(L.preventDefault(),!a||!u.trim()){k("Invoice title is required");return}if(c.length===0){k("Please select at least one order");return}if(m!==a.status&&(m==="paid"||m==="cancelled")){C(m),_(!0);return}await E()},E=async()=>{f(!0),k("");try{const L=R();await Nb(a.id,{invoice_title:u.trim(),status:m,payment_link:w.trim()||null,order_ids:c,total_amount:L}),H.success("Invoice updated successfully"),n(),t()}catch(L){console.error("Error updating invoice:",L),H.error("Failed to update invoice"),k("Failed to update invoice. Please try again.")}finally{f(!1)}},M=async()=>{S&&(p(S),_(!1),C(null),await E())},Y=L=>{switch(L){case"paid":return"bg-green-100 text-green-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},$=L=>{switch(L){case"pending":return"bg-yellow-100 text-yellow-800";case"assigned":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-purple-100 text-purple-800";case"review":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"delivered":return"bg-emerald-100 text-emerald-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};if(!e)return null;const B=R(),z=(a==null?void 0:a.status)==="cancelled"||(a==null?void 0:a.status)==="paid";return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Invoice"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:y,children:s.jsx(Ue,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:V,className:"p-6",children:[v&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700 text-sm",children:v})}),j?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"loading-spinner mr-2"}),s.jsx("span",{className:"text-gray-600",children:"Loading invoice data..."})]}):a?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(br,{className:"h-4 w-4 inline mr-1"}),"Invoice Title *"]}),s.jsx("input",{type:"text",value:u,onChange:L=>h(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"e.g., Monthly Invoice - September 2025",required:!0,disabled:z})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),s.jsxs("select",{value:m,onChange:L=>p(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:z,children:[s.jsx("option",{value:"paid",children:"Paid"}),s.jsx("option",{value:"unpaid",children:"Unpaid"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Link (Optional)"}),s.jsx("input",{type:"url",value:w,onChange:L=>b(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"https://payment-provider.com/invoice/...",disabled:z})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Customer Information"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Customer Name"}),s.jsx("p",{className:"font-medium text-gray-900",children:a.customer_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("p",{className:"font-medium text-gray-900",children:a.customer_email})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Period"}),s.jsx("p",{className:"font-medium text-gray-900",children:a.month_year})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Current Status"}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y(a.status)}`,children:a.status.replace("_"," ")})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Select Orders (",o.length," available)"]}),o.length>0&&!z&&s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:c.length===o.length,onChange:L=>T(L.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Select All"})]})]}),o.length>0?s.jsx("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto",children:o.map(L=>{var O;return s.jsxs("label",{className:`flex items-center space-x-3 p-4 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 cursor-pointer ${z?"opacity-50 cursor-not-allowed":""}`,children:[s.jsx("input",{type:"checkbox",checked:c.includes(L.id),onChange:X=>D(L.id,X.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:z}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-gray-900",children:L.order_number}),s.jsxs("span",{className:"font-semibold text-gray-900",children:["$",((O=L.total_amount)==null?void 0:O.toFixed(2))||"0"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:[L.order_type==="custom"?"Custom Design":"Catalog Item"," •",new Date(L.created_at).toLocaleDateString()]}),s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${$(L.status)}`,children:L.status.replace("_"," ")})]}),L.apparel_type_name&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[L.apparel_type_name," • ",L.custom_width,'"×',L.custom_height,'"']}),L.custom_description&&s.jsx("p",{className:"text-sm text-gray-600 mt-1 truncate",children:L.custom_description})]})]},L.id)})}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No orders found for this customer"})]}),c.length>0&&s.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-lg font-medium text-gray-900",children:["Total (",c.length," orders):"]}),s.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["$",B.toFixed(2)]})]})}),z&&s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:s.jsxs("p",{className:"text-gray-600 text-sm",children:["This invoice is ",a==null?void 0:a.status," and cannot be edited."]})})]}):null,s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"btn-secondary text-sm",disabled:y,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn-primary text-sm flex items-center space-x-2",disabled:y||j,children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loading-spinner-white w-4 h-4"}),s.jsx("span",{children:"Updating..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(zs,{className:"h-4 w-4"}),s.jsx("span",{children:"Update Invoice"})]})})]})]}),s.jsx(Qc,{isOpen:N,onClose:()=>{_(!1),C(null)},onConfirm:M,title:"Confirm Status Change",message:`Are you sure you want to change the invoice status to "${S}"? This action is irreversible and cannot be undone.`,confirmText:"Confirm Change",cancelText:"Cancel",type:"warning"})]})})]})},$j=()=>{const{data:e,params:t,loading:r,error:n,updateParams:a,refetch:i}=Xt(lp,{page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"}),[o,l]=g.useState({status:"",customer:"",monthYear:"",dateFrom:"",dateTo:""}),[c,d]=g.useState(!1),[u,h]=g.useState(!1),[m,p]=g.useState(!1),[w,b]=g.useState(null),[j,x]=g.useState([]),[y]=g.useState({page:1,limit:25,search:"",sortBy:"created_at",sortOrder:"desc"});ue.useEffect(()=>{(async()=>{try{const R=await dp();x(R)}catch(R){console.error("Error fetching customers:",R)}})()},[]);const f=[{key:"status",label:"Status",options:[{value:"paid",label:"Paid"},{value:"unpaid",label:"Unpaid"}]},{key:"dateFrom",label:"From Date",type:"date"},{key:"dateTo",label:"To Date",type:"date"}],v=T=>{a(T)},k=T=>{a({search:T,page:1})},N=(T,R)=>{l(E=>({...E,[T]:R}));const V={page:1};T==="status"&&R?V.invoiceStatus=R:T==="dateFrom"&&R?V.dateFrom=R:T==="dateTo"&&R&&(V.dateTo=R),a(V)},_=()=>{l({status:"",monthYear:"",dateFrom:"",dateTo:""});const T={...y,invoiceStatus:void 0,dateFrom:void 0,dateTo:void 0};a(T)},S=T=>{switch(T){case"paid":return"bg-green-100 text-green-800";case"unpaid":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=T=>{b(T.id),h(!0)},P=T=>{T.status==="paid"||T.status==="cancelled"||(b(T.id),p(!0))},D=[{key:"invoice_title",label:"Invoice Title",sortable:!0},{key:"customer_name",label:"Customer",sortable:!0},{key:"month_year",label:"Period",sortable:!0,render:T=>s.jsxs("div",{className:"flex items-center",children:[s.jsx(Vn,{className:"h-4 w-4 mr-1 text-gray-400"}),T.month_year]})},{key:"order_ids",label:"Orders",render:T=>`${T.order_ids.length} orders`},{key:"total_amount",label:"Amount",sortable:!0,render:T=>s.jsxs("div",{className:"flex items-center",children:["$",T.total_amount.toFixed(2)]})},{key:"status",label:"Status",sortable:!0,render:T=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S(T.status)}`,children:T.status.replace("_"," ")})},{key:"created_at",label:"Created",sortable:!0,render:T=>new Date(T.created_at).toLocaleDateString()},{key:"actions",label:"Actions",render:T=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>C(T),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"View Invoice",children:s.jsx(Pe,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>P(T),className:`transition-colors ${T.status==="cancelled"||T.status==="paid"?"text-gray-400 cursor-not-allowed":"text-green-600 hover:text-green-900"}`,title:"Edit Invoice",disabled:T.status==="cancelled"||T.status==="paid",children:s.jsx(Jt,{className:"h-4 w-4"})})]})}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invoice Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and manage customer invoices"})]}),s.jsxs("button",{onClick:()=>d(!0),className:"btn-success btn-large px-6 flex items-center space-x-2",children:[s.jsx(Ai,{className:"h-5 w-5"}),s.jsx("span",{children:"Generate Invoice"})]})]}),s.jsx(Yt,{searchValue:t.search||"",onSearchChange:k,searchPlaceholder:"Search invoices by title, customer name, or email...",filters:f,filterValues:o,onFilterChange:N,onClearFilters:_,resultCount:e.total,loading:r}),n&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:n})}),s.jsx(Zt,{data:e,columns:D,onParamsChange:v,currentParams:t,loading:r}),s.jsx(Aj,{isOpen:c,onClose:()=>d(!1),onSuccess:()=>{d(!1),i()}}),s.jsx(vp,{isOpen:u,onClose:()=>h(!1),invoiceId:w}),s.jsx(Rj,{isOpen:m,onClose:()=>p(!1),invoiceId:w,onSuccess:()=>{p(!1),i()}})]})},Wu=()=>{const[e,t]=g.useState("overview"),[r,n]=g.useState(null),[a,i]=g.useState(!1),o=c=>{n(c),i(!0)},l=()=>{switch(e){case"overview":return s.jsx(qu,{onOrderClick:o});case"employees":return s.jsx(Ej,{});case"customers":return s.jsx(Pj,{});case"orders":return s.jsx(Tj,{onOrderClick:o});case"products":return s.jsx(Ij,{});case"invoices":return s.jsx($j,{});default:return s.jsx(qu,{onOrderClick:o})}};return s.jsxs(s.Fragment,{children:[s.jsx(Cj,{activeTab:e,onTabChange:t,children:l()}),s.jsx(Mi,{isOpen:a,onClose:()=>i(!1),order:r})]})},Lj=()=>{const e=Ds(),[t,r]=g.useState(!0),[n,a]=g.useState(!1),[i,o]=g.useState(null),[l,c]=g.useState({full_name:"",phone:""}),[d,u]=g.useState({newPassword:"",confirmPassword:""}),m=(T=>{let R=0;return T.length>=8&&R++,/[A-Z]/.test(T)&&R++,/[a-z]/.test(T)&&R++,/[0-9]/.test(T)&&R++,/[^A-Za-z0-9]/.test(T)&&R++,R})(d.newPassword),p=["Very Weak","Weak","Fair","Good","Strong"][m],w=["red","orange","yellow","blue","green"][m],[b,j]=g.useState(!1),[x,y]=g.useState(!1),[f,v]=g.useState(null);g.useEffect(()=>{k()},[]);const k=async()=>{try{r(!0);const{data:{user:T}}=await A.auth.getUser();if(!T){e("/login");return}const R=await $e(T.id);if(!R){v({type:"error",text:"Profile not found"});return}const V="role"in R&&R.role!=="customer"?R.role:"customer",E={id:R.id,full_name:R.full_name,email:R.email,phone:R.phone||"",role:V,company_name:"company_name"in R?R.company_name:void 0};o(E),c({full_name:E.full_name,phone:E.phone||""})}catch(T){console.error("Error loading user data:",T),v({type:"error",text:"Failed to load profile data"})}finally{r(!1)}},N=T=>{c({...l,[T.target.name]:T.target.value})},_=T=>{u({...d,[T.target.name]:T.target.value})},S=async T=>{if(T.preventDefault(),!!i)try{a(!0),v(null);const R={full_name:l.full_name,phone:l.phone||null,updated_at:new Date().toISOString()},V=i.role==="customer"?"customers":"employees",{error:E}=await A.from(V).update(R).eq("id",i.id);if(E)throw E;o({...i,...l}),H.success("Profile updated successfully"),v(null)}catch(R){console.error("Error updating profile:",R),H.error("Failed to update profile"),v({type:"error",text:R.message||"Failed to update profile"})}finally{a(!1)}},C=async T=>{if(T.preventDefault(),!d.newPassword.trim()){v({type:"error",text:"New password is required"});return}if(d.newPassword.length<8){v({type:"error",text:"Password must be at least 8 characters long"});return}if(d.newPassword!==d.confirmPassword){v({type:"error",text:"Passwords do not match"});return}try{a(!0),v(null);const{error:R}=await A.auth.updateUser({password:d.newPassword});if(R)throw R;u({newPassword:"",confirmPassword:""}),H.success("Password updated successfully"),v(null)}catch(R){console.error("Error updating password:",R),H.error("Failed to update password"),v({type:"error",text:R.message||"Failed to update password"})}finally{a(!1)}},P=()=>{const T=ni((i==null?void 0:i.role)||"");e(T||"/")},D=T=>{switch(T){case"admin":return"Administrator";case"sales_rep":return"Sales Representative";case"designer":return"Designer";case"customer":return"Customer";default:return T}};return t?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})}):i?s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:P,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Kr,{className:"w-5 h-5 mr-2"}),"Back to Dashboard"]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-8",children:[s.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[s.jsx(ut,{className:"w-8 h-8 mr-3"}),"Profile Settings"]}),s.jsx("p",{className:"text-blue-100 mt-2",children:"Manage your personal information and security"})]}),f&&s.jsx("div",{className:`mx-6 mt-6 p-4 rounded-lg ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:f.text}),s.jsxs("div",{className:"p-6 space-y-8",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(Iu,{className:"w-5 h-5 text-gray-600 mr-2"}),s.jsx("h3",{className:"font-semibold text-gray-800",children:"Account Information"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Email"}),s.jsxs("div",{className:"flex items-center bg-gray-100 px-3 py-2 rounded border border-gray-300",children:[s.jsx(Ht,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("input",{type:"email",value:i.email,disabled:!0,className:"flex-1 bg-transparent text-gray-500 cursor-not-allowed"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Role"}),s.jsxs("div",{className:"flex items-center bg-gray-100 px-3 py-2 rounded border border-gray-300",children:[s.jsx(Iu,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("input",{type:"text",value:D(i.role),disabled:!0,className:"flex-1 bg-transparent text-gray-500 cursor-not-allowed"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Role is managed by administrators"})]}),i.company_name&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Company Name"}),s.jsxs("div",{className:"flex items-center bg-gray-100 px-3 py-2 rounded border border-gray-300",children:[s.jsx(Vw,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("input",{type:"text",value:i.company_name,disabled:!0,className:"flex-1 bg-transparent text-gray-500 cursor-not-allowed"})]})]})]})]}),s.jsxs("form",{onSubmit:S,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[s.jsx(ut,{className:"w-5 h-5 mr-2"}),"Personal Information"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),s.jsx("input",{type:"text",id:"full_name",name:"full_name",value:l.full_name,onChange:N,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your full name"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"tel",id:"phone",name:"phone",value:l.phone,onChange:N,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"(123) 456-7890"})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{type:"submit",disabled:n,className:"btn-primary flex items-center px-6",children:[s.jsx(zs,{className:"w-5 h-5 mr-2"}),n?"Saving...":"Save Changes"]})})]}),s.jsx("div",{className:"border-t pt-6",children:s.jsxs("form",{onSubmit:C,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[s.jsx(Ze,{className:"w-5 h-5 mr-2"}),"Change Password"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:b?"text":"password",id:"newPassword",name:"newPassword",value:d.newPassword,onChange:_,className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter new password"}),s.jsx("button",{type:"button",onClick:()=>j(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:b?s.jsx(Tt,{className:"w-5 h-5"}):s.jsx(Pe,{className:"w-5 h-5"})})]}),d.newPassword&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all bg-${w}-500`,style:{width:`${m/5*100}%`}})}),s.jsx("span",{className:`text-xs text-${w}-600`,children:p})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use 8+ characters with uppercase, lowercase, numbers, and symbols"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:x?"text":"password",id:"confirmPassword",name:"confirmPassword",value:d.confirmPassword,onChange:_,className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Confirm new password"}),s.jsx("button",{type:"button",onClick:()=>y(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?s.jsx(Tt,{className:"w-5 h-5"}):s.jsx(Pe,{className:"w-5 h-5"})})]}),d.confirmPassword&&s.jsx("div",{className:"mt-2",children:d.newPassword===d.confirmPassword?s.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[s.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-1"}),"Passwords match"]}):s.jsx("p",{className:"text-xs text-red-600",children:"Passwords do not match"})})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{type:"submit",disabled:n||!d.newPassword||!d.confirmPassword,className:"btn-primary flex items-center px-6",children:[s.jsx(Ze,{className:"w-5 h-5 mr-2"}),n?"Updating...":"Update Password"]})})]})})]})]})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-red-600",children:"Failed to load profile"})})})},Dj=()=>{const e=Ds(),{items:t,getTotalPrice:r,clearCart:n,removeFromCart:a,updateCartItem:i}=Oc(),{addOrder:o}=Qf(),[l,c]=g.useState(null),[d,u]=g.useState(!1),[h,m]=g.useState(""),[p,w]=g.useState(!0),[b,j]=g.useState([]);g.useEffect(()=>{(async()=>{try{const v=await fe();if(!v){e("/login");return}if(t.length===0){e("/catalog");return}const k=await $e(v.id);k&&c(k);const N=await Oi();j(N)}catch(v){console.error("Error checking user:",v),e("/login")}finally{w(!1)}})()},[e,t.length]);const x=async f=>{if(f.preventDefault(),t.length===0){m("Your cart is empty");return}for(const v of t){if(!v.selectedApparelTypeId){m(`Please select an apparel type for ${v.title}`);return}if(!v.customWidth||v.customWidth<=0){m(`Please enter a valid width for ${v.title}`);return}if(!v.customHeight||v.customHeight<=0){m(`Please enter a valid height for ${v.title}`);return}}u(!0),m("");try{for(const v of t){const N=parseFloat(v.price.replace("$","")),_={order_type:"catalog",product_id:v.id,custom_description:`${v.title}`,apparel_type_id:v.selectedApparelTypeId,custom_width:v.customWidth,custom_height:v.customHeight,total_amount:N};await o(_),await new Promise(S=>setTimeout(S,100))}n(),H.success(`${t.length} order${t.length>1?"s":""} placed successfully!`),e("/customer/dashboard")}catch(v){console.error("Error placing orders:",v),H.error("Failed to place orders. Please try again."),m("Failed to place orders. Please try again.")}finally{u(!1)}},y=()=>{e("/catalog")};return p?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"loading-spinner mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading checkout..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 relative overflow-hidden",children:[s.jsx(Li,{}),s.jsxs("div",{className:"absolute inset-0 -z-10",children:[s.jsx("div",{className:"spotlight spotlight-1"}),s.jsx("div",{className:"spotlight spotlight-2"}),s.jsx("div",{className:"spotlight spotlight-3"})]}),s.jsxs("div",{className:"container mx-auto px-4 py-8 relative z-10",children:[s.jsxs("button",{onClick:y,className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600 transition-colors mb-8",children:[s.jsx(Kr,{className:"h-5 w-5"}),s.jsx("span",{children:"Back to Catalog"})]}),s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"glass rounded-2xl shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Checkout"}),s.jsx("p",{className:"text-blue-100",children:"Review your items and place your orders"})]}),s.jsxs("div",{className:"p-6",children:[h&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:h})}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Order Items"}),s.jsx("div",{className:"space-y-4 mb-6",children:t.map(f=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("img",{src:f.image,alt:f.title,className:"w-16 h-16 object-cover rounded-lg",onError:v=>{v.target.src="https://images.pexels.com/photos/1194420/pexels-photo-1194420.jpeg?auto=compress&cs=tinysrgb&w=100"}}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-800",children:f.title}),s.jsx("p",{className:"text-sm text-gray-500",children:f.apparelType}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Quantity: 1"}),s.jsx("span",{className:"font-bold text-blue-600",children:f.price})]})]}),s.jsx("button",{onClick:()=>a(f.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Remove from cart",children:s.jsx(Vt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Customization Options"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Apparel Type *"}),s.jsxs("select",{value:f.selectedApparelTypeId||"",onChange:v=>i(f.id,{selectedApparelTypeId:v.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0,children:[s.jsx("option",{value:"",children:"Select Type"}),b.map(v=>s.jsx("option",{value:v.id,children:v.type_name},v.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Width (inches) *"}),s.jsx("input",{type:"number",value:f.customWidth||"",onChange:v=>i(f.id,{customWidth:parseFloat(v.target.value)||0}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Width",min:"0.1",step:"0.1",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Height (inches) *"}),s.jsx("input",{type:"number",value:f.customHeight||"",onChange:v=>i(f.id,{customHeight:parseFloat(v.target.value)||0}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Height",min:"0.1",step:"0.1",required:!0})]})]})]})]},f.id))}),l&&s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Customer Information"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),s.jsx("p",{className:"font-medium text-gray-800",children:l.full_name})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("p",{className:"font-medium text-gray-800",children:l.email})]})]}),l.phone&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Us,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),s.jsx("p",{className:"font-medium text-gray-800",children:l.phone})]})]}),l.company_name&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Company"}),s.jsx("p",{className:"font-medium text-gray-800",children:l.company_name})]})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Order Summary"}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-gray-600",children:["Items (",t.length,")"]}),s.jsxs("span",{className:"font-medium",children:["$",r().toFixed(2)]})]}),s.jsx("hr",{className:"border-gray-200"}),s.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{className:"text-blue-600",children:["$",r().toFixed(2)]})]})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Note:"})," Each item will be processed as a separate order for optimal handling and tracking."]})}),s.jsx("form",{onSubmit:x,children:s.jsx("button",{type:"submit",disabled:d||t.length===0,className:"w-full btn-success btn-large flex items-center justify-center space-x-2",children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loading-spinner-white"}),s.jsx("span",{children:"Placing Orders..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ai,{className:"h-5 w-5"}),s.jsxs("span",{children:["Place Orders (",t.length," items)"]})]})})})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"What happens next?"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),s.jsx("span",{children:"Orders are assigned to our team"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsx("span",{children:"Track progress in your dashboard"})]})]})]})]})]})]})]})})]}),s.jsx(mp,{})]})},Mj=()=>s.jsxs(s.Fragment,{children:[s.jsx(Li,{}),s.jsx(Rb,{}),s.jsx(Mb,{}),s.jsx(Fb,{}),s.jsx(Ub,{}),s.jsx(zb,{}),s.jsx("section",{className:"py-16 bg-gradient-to-b from-gray-50 to-white",id:"contact",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 mb-4",children:"Get In Touch"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Ready to start your custom embroidery project? Contact us today!"})]}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx(Bb,{})}),s.jsx("div",{children:s.jsx(qb,{})})]})]})}),s.jsx(mp,{})]});function Fj(){const[e,t]=ue.useState(!1);return ue.useEffect(()=>{const r=()=>{t(!0)};return window.addEventListener("openPlaceOrderModal",r),()=>{window.removeEventListener("openPlaceOrderModal",r)}},[]),s.jsx(xy,{children:s.jsx(Mw,{children:s.jsx(oy,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs(Mx,{children:[s.jsx(Ie,{path:"/",element:s.jsx(Mj,{})}),s.jsx(Ie,{path:"/catalog",element:s.jsx(Kb,{})}),s.jsx(Ie,{path:"/about",element:s.jsx(Qb,{})}),s.jsx(Ie,{path:"/login",element:s.jsx(Jb,{})}),s.jsx(Ie,{path:"/signup",element:s.jsx(Yb,{})}),s.jsx(Ie,{path:"/employee-signup",element:s.jsx(Zb,{})}),s.jsx(Ie,{path:"/forgot-password",element:s.jsx(Xb,{})}),s.jsx(Ie,{path:"/reset-password",element:s.jsx(ej,{})}),s.jsx(Ie,{path:"/profile",element:s.jsx(Lj,{})}),s.jsx(Ie,{path:"/checkout",element:s.jsx(Dj,{})}),s.jsx(Ie,{path:"/sales/dashboard",element:s.jsx(cj,{})}),s.jsx(Ie,{path:"/designer/dashboard",element:s.jsx(jj,{})}),s.jsx(Ie,{path:"/customer/dashboard",element:s.jsx(Sj,{})}),s.jsx(Ie,{path:"/admin",element:s.jsx(Wu,{})}),s.jsx(Ie,{path:"/admin/*",element:s.jsx(Wu,{})})]}),s.jsx(gp,{isOpen:e,onClose:()=>t(!1)})]})})})})}sf(document.getElementById("root")).render(s.jsx(g.StrictMode,{children:s.jsx(Fj,{})}));
